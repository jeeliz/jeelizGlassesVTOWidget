/**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( JeelizÂ® - https://jeeliz.com )
 *
 * This software library is the proprietary and confidential information of
 * Jeeliz ("Licensor"). You may only use this software library if
 * you have obtained a valid commercial license from Licensor. If you have not
 * obtained a valid commercial license from Licensor, please check out
 * https://jeeliz.com/#pricing for licensing options and pricing.
 *
 * Unauthorized use, reproduction, or distribution of this software library or
 * any portion thereof may result in severe civil and criminal penalties, and
 * will be prosecuted to the maximum extent possible under the law.
 *
 * THIS SOFTWARE LIBRARY IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL LICENSOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE LIBRARY, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 

/* eslint-disable */
let JEELIZVTO=null;let JEELIZVTOWIDGET=null;var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(ea){var ma=0;return function(){return ma<ea.length?{done:!1,value:ea[ma++]}:{done:!0}}};$jscomp.arrayIterator=function(ea){return{next:$jscomp.arrayIteratorImpl(ea)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ea,ma,oa){if(ea==Array.prototype||ea==Object.prototype)return ea;ea[ma]=oa.value;return ea};$jscomp.getGlobal=function(ea){ea=["object"==typeof globalThis&&globalThis,ea,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var ma=0;ma<ea.length;++ma){var oa=ea[ma];if(oa&&oa.Math==Math)return oa}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(ea,ma,oa){if(!oa||null!=ea){oa=$jscomp.propertyToPolyfillSymbol[ma];if(null==oa)return ea[ma];oa=ea[oa];return void 0!==oa?oa:ea[ma]}};
$jscomp.polyfill=function(ea,ma,oa,Ja){ma&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(ea,ma,oa,Ja):$jscomp.polyfillUnisolated(ea,ma,oa,Ja))};$jscomp.polyfillUnisolated=function(ea,ma,oa,Ja){oa=$jscomp.global;ea=ea.split(".");for(Ja=0;Ja<ea.length-1;Ja++){var wa=ea[Ja];if(!(wa in oa))return;oa=oa[wa]}ea=ea[ea.length-1];Ja=oa[ea];ma=ma(Ja);ma!=Ja&&null!=ma&&$jscomp.defineProperty(oa,ea,{configurable:!0,writable:!0,value:ma})};
$jscomp.polyfillIsolated=function(ea,ma,oa,Ja){var wa=ea.split(".");ea=1===wa.length;Ja=wa[0];Ja=!ea&&Ja in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var jb=0;jb<wa.length-1;jb++){var na=wa[jb];if(!(na in Ja))return;Ja=Ja[na]}wa=wa[wa.length-1];oa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===oa?Ja[wa]:null;ma=ma(oa);null!=ma&&(ea?$jscomp.defineProperty($jscomp.polyfills,wa,{configurable:!0,writable:!0,value:ma}):ma!==oa&&(void 0===$jscomp.propertyToPolyfillSymbol[wa]&&(oa=1E9*Math.random()>>>0,
$jscomp.propertyToPolyfillSymbol[wa]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(wa):$jscomp.POLYFILL_PREFIX+oa+"$"+wa),$jscomp.defineProperty(Ja,$jscomp.propertyToPolyfillSymbol[wa],{configurable:!0,writable:!0,value:ma})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(ea){if(ea)return ea;var ma=function(jb,na){this.$jscomp$symbol$id_=jb;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:na})};ma.prototype.toString=function(){return this.$jscomp$symbol$id_};var oa="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",Ja=0,wa=function(jb){if(this instanceof wa)throw new TypeError("Symbol is not a constructor");return new ma(oa+(jb||"")+"_"+Ja++,jb)};return wa},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(ea){if(ea)return ea;ea=Symbol("Symbol.iterator");for(var ma="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),oa=0;oa<ma.length;oa++){var Ja=$jscomp.global[ma[oa]];"function"===typeof Ja&&"function"!=typeof Ja.prototype[ea]&&$jscomp.defineProperty(Ja.prototype,ea,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return ea},
"es6","es3");$jscomp.iteratorPrototype=function(ea){ea={next:ea};ea[Symbol.iterator]=function(){return this};return ea};$jscomp.polyfill("Object.is",function(ea){return ea?ea:function(ma,oa){return ma===oa?0!==ma||1/ma===1/oa:ma!==ma&&oa!==oa}},"es6","es3");
$jscomp.makeIterator=function(ea){var ma="undefined"!=typeof Symbol&&Symbol.iterator&&ea[Symbol.iterator];if(ma)return ma.call(ea);if("number"==typeof ea.length)return $jscomp.arrayIterator(ea);throw Error(String(ea)+" is not an iterable or ArrayLike");};
$jscomp.polyfill("Promise",function(ea){function ma(){this.batch_=null}function oa(na){return na instanceof wa?na:new wa(function(Ga,Sa){Ga(na)})}if(ea&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return ea;ma.prototype.asyncExecute=function(na){if(null==this.batch_){this.batch_=[];var Ga=this;this.asyncExecuteFunction(function(){Ga.executeBatch_()})}this.batch_.push(na)};
var Ja=$jscomp.global.setTimeout;ma.prototype.asyncExecuteFunction=function(na){Ja(na,0)};ma.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var na=this.batch_;this.batch_=[];for(var Ga=0;Ga<na.length;++Ga){var Sa=na[Ga];na[Ga]=null;try{Sa()}catch(eb){this.asyncThrow_(eb)}}}this.batch_=null};ma.prototype.asyncThrow_=function(na){this.asyncExecuteFunction(function(){throw na;})};var wa=function(na){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=
!1;var Ga=this.createResolveAndReject_();try{na(Ga.resolve,Ga.reject)}catch(Sa){Ga.reject(Sa)}};wa.prototype.createResolveAndReject_=function(){function na(eb){return function(ub){Sa||(Sa=!0,eb.call(Ga,ub))}}var Ga=this,Sa=!1;return{resolve:na(this.resolveTo_),reject:na(this.reject_)}};wa.prototype.resolveTo_=function(na){if(na===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(na instanceof wa)this.settleSameAsPromise_(na);else{a:switch(typeof na){case "object":var Ga=
null!=na;break a;case "function":Ga=!0;break a;default:Ga=!1}Ga?this.resolveToNonPromiseObj_(na):this.fulfill_(na)}};wa.prototype.resolveToNonPromiseObj_=function(na){var Ga=void 0;try{Ga=na.then}catch(Sa){this.reject_(Sa);return}"function"==typeof Ga?this.settleSameAsThenable_(Ga,na):this.fulfill_(na)};wa.prototype.reject_=function(na){this.settle_(2,na)};wa.prototype.fulfill_=function(na){this.settle_(1,na)};wa.prototype.settle_=function(na,Ga){if(0!=this.state_)throw Error("Cannot settle("+na+
", "+Ga+"): Promise already settled in state"+this.state_);this.state_=na;this.result_=Ga;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};wa.prototype.scheduleUnhandledRejectionCheck_=function(){var na=this;Ja(function(){if(na.notifyUnhandledRejection_()){var Ga=$jscomp.global.console;"undefined"!==typeof Ga&&Ga.error(na.result_)}},1)};wa.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var na=$jscomp.global.CustomEvent,
Ga=$jscomp.global.Event,Sa=$jscomp.global.dispatchEvent;if("undefined"===typeof Sa)return!0;"function"===typeof na?na=new na("unhandledrejection",{cancelable:!0}):"function"===typeof Ga?na=new Ga("unhandledrejection",{cancelable:!0}):(na=$jscomp.global.document.createEvent("CustomEvent"),na.initCustomEvent("unhandledrejection",!1,!0,na));na.promise=this;na.reason=this.result_;return Sa(na)};wa.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var na=0;na<this.onSettledCallbacks_.length;++na)jb.asyncExecute(this.onSettledCallbacks_[na]);
this.onSettledCallbacks_=null}};var jb=new ma;wa.prototype.settleSameAsPromise_=function(na){var Ga=this.createResolveAndReject_();na.callWhenSettled_(Ga.resolve,Ga.reject)};wa.prototype.settleSameAsThenable_=function(na,Ga){var Sa=this.createResolveAndReject_();try{na.call(Ga,Sa.resolve,Sa.reject)}catch(eb){Sa.reject(eb)}};wa.prototype.then=function(na,Ga){function Sa(zb,Gb){return"function"==typeof zb?function(lc){try{eb(zb(lc))}catch(ac){ub(ac)}}:Gb}var eb,ub,bc=new wa(function(zb,Gb){eb=zb;ub=
Gb});this.callWhenSettled_(Sa(na,eb),Sa(Ga,ub));return bc};wa.prototype.catch=function(na){return this.then(void 0,na)};wa.prototype.callWhenSettled_=function(na,Ga){function Sa(){switch(eb.state_){case 1:na(eb.result_);break;case 2:Ga(eb.result_);break;default:throw Error("Unexpected state: "+eb.state_);}}var eb=this;null==this.onSettledCallbacks_?jb.asyncExecute(Sa):this.onSettledCallbacks_.push(Sa);this.isRejectionHandled_=!0};wa.resolve=oa;wa.reject=function(na){return new wa(function(Ga,Sa){Sa(na)})};
wa.race=function(na){return new wa(function(Ga,Sa){for(var eb=$jscomp.makeIterator(na),ub=eb.next();!ub.done;ub=eb.next())oa(ub.value).callWhenSettled_(Ga,Sa)})};wa.all=function(na){var Ga=$jscomp.makeIterator(na),Sa=Ga.next();return Sa.done?oa([]):new wa(function(eb,ub){function bc(lc){return function(ac){zb[lc]=ac;Gb--;0==Gb&&eb(zb)}}var zb=[],Gb=0;do zb.push(void 0),Gb++,oa(Sa.value).callWhenSettled_(bc(zb.length-1),ub),Sa=Ga.next();while(!Sa.done)})};return wa},"es6","es3");
$jscomp.owns=function(ea,ma){return Object.prototype.hasOwnProperty.call(ea,ma)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(ea,ma){for(var oa=1;oa<arguments.length;oa++){var Ja=arguments[oa];if(Ja)for(var wa in Ja)$jscomp.owns(Ja,wa)&&(ea[wa]=Ja[wa])}return ea};$jscomp.polyfill("Object.assign",function(ea){return ea||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Math.log2",function(ea){return ea?ea:function(ma){return Math.log(ma)/Math.LN2}},"es6","es3");$jscomp.findInternal=function(ea,ma,oa){ea instanceof String&&(ea=String(ea));for(var Ja=ea.length,wa=0;wa<Ja;wa++){var jb=ea[wa];if(ma.call(oa,jb,wa,ea))return{i:wa,v:jb}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(ea){return ea?ea:function(ma,oa){return $jscomp.findInternal(this,ma,oa).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(ea){return ea?ea:function(ma,oa){var Ja=this;Ja instanceof String&&(Ja=String(Ja));var wa=Ja.length;oa=oa||0;for(0>oa&&(oa=Math.max(oa+wa,0));oa<wa;oa++){var jb=Ja[oa];if(jb===ma||Object.is(jb,ma))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(ea,ma,oa){if(null==ea)throw new TypeError("The 'this' value for String.prototype."+oa+" must not be null or undefined");if(ma instanceof RegExp)throw new TypeError("First argument to String.prototype."+oa+" must not be a regular expression");return ea+""};$jscomp.polyfill("String.prototype.includes",function(ea){return ea?ea:function(ma,oa){return-1!==$jscomp.checkStringArgs(this,ma,"includes").indexOf(ma,oa||0)}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(ea){return ea?ea:function(ma,oa){return $jscomp.findInternal(this,ma,oa).i}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(ea){return ea?ea:function(ma){return this.then(function(oa){return Promise.resolve(ma()).then(function(){return oa})},function(oa){return Promise.resolve(ma()).then(function(){throw oa;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(ea){return ea?ea:function(ma){ma=Number(ma);return 0===ma||isNaN(ma)?ma:0<ma?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function ea(){Ua.mode=qb.realtime;Ua.isRT=!0;Ca.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(Ca.adjust){Ca.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");Ca.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");Ca.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");Ca.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var Q=Ca.adjust;Q&&Q.addEventListener("click",zb,!1);(Q=Ca.adjustExit)&&
Q.addEventListener("click",Gb,!1);[Ca.adjust,Ca.changeModelContainer,Ca.buttonResizeCanvas].forEach(oa)}cc.enabled&&Va.do_instantDetection(cc.interval,cc.callback);mc&&(mc(!0),mc=null)}function ma(){var Q=document.createElement("style");Q.setAttribute("type","text/css");Q.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var X=document.getElementsByTagName("head");1<=X.length?X[0].appendChild(Q):document.body.appendChild(Q)}function oa(Q){Q&&
(Q.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(Q).display&&Q.classList.add("_jeelizVTOForceShow"))}function Ja(Q){Q&&(Q.classList.add("_jeelizVTOForceHide"),Q.classList.remove("_jeelizVTOForceShow"))}function wa(Q,X){if(Q)for(var sa in X)Q.style[sa]=X[sa]}function jb(Q){if(!Q)return{width:0,height:0};Q=Q.getBoundingClientRect();return{width:Q.width,height:Q.height}}function na(Q){return new Promise(function(X,sa){var Da=new XMLHttpRequest;Da.open("GET",Q,!0);Da.onreadystatechange=
function(){if(4===Da.readyState)if(200===Da.status||0===Da.status)try{var La=JSON.parse(Da.responseText);X(La)}catch(sb){sa("INVALID JSON")}else sa("HTTP ERROR "+Da.status)};Da.send()})}function Ga(Q,X){return fetch(Q,{method:"GET",mode:"cors",cache:"no-cache"}).then(function(sa){return sa.json()}).then(function(sa){var Da=sa.tweaker;return Sa(sa.modelURL,X).then(function(){ad(Da,null)})})}function Sa(Q,X){return new Promise(function(sa,Da){na(Q).then(function(La){bd(X,La,sa)}).catch(Da)})}function eb(){vb.toggle_loading(!1);
Ua.mode=qb.realtime;ub("INVALID_SKU")}function ub(Q){Mc.error?Mc.error(Q):console.log("ERROR:",Q)}function bc(Q){var X=jb(Ca.container),sa=Math.abs(gb.displayWidth-X.width),Da=Math.abs(gb.displayHeight-X.height);if(!Q&&1>=sa&&1>=Da&&1===gb.oFactor)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small. Abort resize");else if(gb.displayWidth=X.width,gb.displayHeight=X.height,gb.oFactor=1,console.log("INFO in JeelizVTOWidget.resize: width = "+gb.displayWidth.toString()+" height = "+
gb.displayHeight.toString()+" oFactor = "+(1).toString()),gb.cvWidth=Math.round(1*gb.displayWidth),gb.cvHeight=Math.round(1*gb.displayHeight),wa(Ca.cv,{width:gb.displayWidth.toString()+"px",height:gb.displayHeight.toString()+"px"}),Ca.cv.width=gb.cvWidth,Ca.cv.height=gb.cvHeight,Va)if(Ua.mode===qb.notLoaded)Va.set_size(gb.cvWidth,gb.cvHeight,!1);else Va.onLoad(function(){Va.resize(gb.cvWidth,gb.cvHeight,!1,Q)})}function zb(){[Ca.adjust,Ca.changeModelContainer,Ca.buttonResizeCanvas].forEach(Ja);Ua.mode=
qb.adjust;[Ca.adjustNotice,Ca.adjustExit].forEach(oa);Ca.cv.style.setProperty("cursor","move");Va.switch_modeInteractor("movePinch");zc("ADJUST_START")}function Gb(){[Ca.adjustNotice,Ca.adjustExit].forEach(Ja);[Ca.adjust,Ca.changeModelContainer,Ca.buttonResizeCanvas].forEach(oa);Ca.cv.style.setProperty("cursor","auto");Ua.mode=Ua.realtime;Va.switch_modeInteractor("idle");zc("ADJUST_END")}function lc(){if(!Ca.trackIframe){var Q=Mb.appstaticURL+"jeewidget/";Ca.trackIframe=document.createElement("iframe");
Ca.trackIframe.width="8";Ca.trackIframe.height="8";Ca.trackIframe.src=Q+"trackIframe.html";Ca.trackIframe.style.border="none";wa(Ca.trackIframe,{position:"fixed",zIndex:-1,bottom:"0",right:"-10px"});window.addEventListener("beforeunload",ac.bind(null,"WINDOW_UNLOAD",null));Ca.container.appendChild(Ca.trackIframe)}}function ac(Q,X){if(Ca.trackIframe){var sa=location.href.split("?").shift().split("://").pop();sa=sa.split("/").shift();sa=sa.split("www.").pop();Q={action:Q,domain:sa};X&&(Q.sku=X);try{Ca.trackIframe.contentWindow.postMessage(Q,
"*")}catch(Da){}}}function cd(Q,X){Ua.mode=qb.realtime;X&&X();vb.toggle_loading(!1);ac("COUNT_TRY_ON_SESSION",Q)}function dd(Q){if(Q.isAutoVTO)return Mb.autoVTOURL+"getByProductPage/"+encodeURIComponent(Q.mod);var X=Q.mod+".json";return Q.isStandalone?nc+"models3DStandalone/"+X:X}function ed(Q,X,sa,Da){var La=dd(X);X.isAutoVTO?Ga(La,Q).then(sa):X.isStandalone?Sa(La,Q).then(sa):Va.load_model(La,X.mats,cd.bind(null,Q,sa),Q,Da)}function bd(Q,X,sa){Va.set_modelStandalone(X,cd.bind(null,Q,sa),Q)}function zc(Q){(Q=
fd[Q])&&Q()}function Nc(){Ac&&Ac.detach();Ac=null}function Bc(){Nc();Ac=new Ed(Ca.container,function(Q){vb.resize(!1)})}function ad(Q,X){X=X||{scale:1};Q?(Nb.set_tweaker({preScale:Q.scale*X.scale,preOffset:[0,Q.dy,Q.dz],rx:Q.rx,beginBendZ:Q.templesBendingOffset,bendStrength:Q.templesBendingStrength,maskBranchStartEnd:Q.templesFading}),Fd(Q),Gd(Q.materials,Q.templesTextureCopyMode||0)):(Nb.set_tweaker({preScale:X.scale}),gd())}function Hd(Q,X){if(!Q.materials)return[0,0,0,0];if(!Q.lensesYGradientEnabled||
"lenses"!==X.id)return[X.alpha,X.alpha,0,0];var sa=-30*Q.lensesYGradientHeight-40,Da=50*Q.lensesYGradientSmoothness;return[X.alpha*Q.lensesYGradientAlphaMinFactor,X.alpha,sa-.5*Da,sa+.5*Da]}function Fd(Q){Q&&0!==Q.materials.length?Q.materials.forEach(function(X){var sa=Hd(Q,X);X.matInds.forEach(function(Da){Nb.update_material(Da,{metalness:X.metalness,roughness:X.roughness,fresnelMin:X.fresnelRange[0],fresnelMax:X.fresnelRange[1],diffuseColor:X.color,isDisableColorTexture:X.isDisableColorTexture,
alpha:sa,alphaUsage:1,whiteToAlpha:X.whiteToAlpha||0},!1)})}):gd()}function Id(Q){return(Q=Q.find(function(X){return"temples"===X.id}))?Q.matInds:[]}function Gd(Q,X){if(X){var sa=Id(Q);2===sa.length&&(2===X&&sa.reverse(),Nb.get_materialsSpec().then(function(Da){Nb.update_material(sa[0],{diffuseTexture:Da[sa[1]].diffuseTexture},!0)}))}}function gd(){Nb.get_materialsSpec().then(function(Q){Q=Q.length;for(var X=0;X<Q;++X)Nb.update_material(X,{alphaUsage:1})})}function Jd(Q){return Q?"json"===Q.split(".").pop().toLowerCase()?
Promise.resolve(Q):na(Mb.glassesDBURL+Q).then(function(X){return X.intrinsic?dd(X.intrinsic):""}):Promise.resolve("")}var Nb=function(){function Q(a,b){if(b)a:{var d=Tb;a=a.split(".");for(var f=0;f<a.length-1;f++){var m=a[f];if(!(m in d))break a;d=d[m]}a=a[a.length-1];f=d[a];b=b(f);b!=f&&null!=b&&Kd(d,a,{configurable:!0,writable:!0,value:b})}}function X(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function sa(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&
a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return{next:X(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}function Da(a,b,d){a instanceof String&&(a=String(a));for(var f=a.length,m=0;m<f;m++){var r=a[m];if(b.call(d,r,m,a))return{wi:m,lk:r}}return{wi:-1,lk:void 0}}function La(a,b){return a[0]*(1-b)+a[1]*b}function sb(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||
b(d.responseText)};d.send()}function Oa(a,b){sb(a+"",function(d){b(JSON.parse(d))})}function mb(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=mb(a[d],b);return a}function Ab(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function Qb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";
case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return"gl_FragColor=gl_FragColor;\n          vec4 zou=gl_FragColor;\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          gl_FragColor=0.5*zou*(vec4(1.)+tanhZou);";default:return!1}}function Hb(a,b){return a[b>>
3]>>7-(b&7)&1}function oc(a,b,d){for(var f=0,m=0;m<d;m++)f=f<<1|Hb(a,b+m);return f}function dc(a){var b=null;a=a.data;"undefined"===typeof btoa&&"undefined"!==typeof Buffer?b=Buffer.from(a,"base64").toString("latin1"):b=atob(a);a=b.length;for(var d=new Uint8Array(a),f=0;f<a;++f)d[f]=b.charCodeAt(f);return d}function Ub(a){return"string"===typeof a?JSON.parse(a):a}function pc(a){return"undefined"===typeof Ub(a).nb?Rb(a):ec(a)}function ec(a){var b=Ub(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var d=
b.n;b=dc(b);for(var f=new Uint32Array(d),m=0;m<d;++m)f[m]=oc(b,m*a,a);return f}function Rb(a){var b=Ub(a);a=b.ne;var d=b.nf,f=b.n;b=dc(b);for(var m=new Float32Array(f),r=new Float32Array(d),n=a+d+1,g=new Float32Array(d),l=.5,q=0;q<d;q++)g[q]=l,l*=.5;for(l=0;l<f;++l){var w=n*l;q=0===Hb(b,w)?1:-1;var H=oc(b,w+1,a),t=b;w=w+1+a;for(var x=r.length,A=0,k=w;k<w+x;++k)r[A]=Hb(t,k),++A;for(w=t=0;w<d;++w)t+=r[w]*g[w];m[l]=0===t&&0===H?0:q*(1+t)*Math.pow(2,1+H-Math.pow(2,a-1))}return m}function Cc(a){var b=
null,d=null,f=null,m=0,r=this,n=null,g={Qc:[],ee:"none",lg:!1,de:null,grid:null};this.m=function(){this.ll(n.Qc);f.Uo({ee:n.ee,lg:n.lg,de:n.de})};this.sm=function(l){return b[l]};this.Ae=function(l){["s32","s34","s27"].forEach(function(q){aa.j(q,[{type:"2f",name:"u21",value:l}])});b&&b.forEach(function(q){q.Ae(l)})};this.ll=function(l){var q=null;m=l.length;var w=null!==n.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),H=w?n.grid:[1,1];w&&this.Ae(H);b=l.map(function(t,x){t=Object.assign({},t,
{index:x,parent:r,je:q,bn:x===m-1,Lc:w,Aa:H});return q=0===x?Ld.instance(t):Md.instance(t)});d=b[0];f=b[m-1];b.forEach(function(t,x){0!==x&&t.Sn()})};this.Ca=function(l){l.h(0);var q=l;b.forEach(function(w){q=w.Ca(q,!1)});return q};this.ii=function(){return d.rm()};this.Ic=function(){return f.vm()};this.ei=function(){return f.ei()};this.A=function(){b&&(b.forEach(function(l){l.A()}),f=d=b=null,m=0)};"undefined"!==typeof a&&(n=Object.assign({},g,a),this.m())}function Vb(a,b){a[b]=!0;a.setAttribute(b,
"true")}function qc(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a}function rc(a,b){window.addEventListener("beforeunload",function(){b&&b.getTracks&&b.getTracks().forEach(function(d){b.removeTrack(d)});a.videoStream&&a.videoStream.stop();a.videoStream=null},!1)}function Dc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function sc(a){if(!a)return a;var b=null;if(a.video){var d=function(f){return f&&"object"===typeof f?Object.assign({},f):f};b={};"undefined"!==typeof a.video.width&&(b.width=
d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&hd(b,a.deviceId);return b}function hd(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function id(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}function Nd(a){function b(t){return[480,576,640,648,
720,768,800,960,1080,1152,1280,1366,1920].sort(function(x,A){return Math.abs(x-t)-Math.abs(A-t)})}function d(t){var x=sc(a);t=t(x);m.push(t);f(t)}function f(t){if(t.video&&t.video.facingMode&&t.video.facingMode.exact){var x=t.video.facingMode.exact;t=sc(t);delete t.video.facingMode.exact;t.video.facingMode.ideal=x;m.push(t)}}var m=[];if(!a||!a.video)return m;f(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var r=b(a.video.width.ideal).slice(0,3),n=b(a.video.height.ideal).slice(0,
3),g={},l=0;for(g.Mb=void 0;l<r.length;g={Mb:g.Mb},++l){g.Mb=r[l];var q={},w=0;for(q.Bb=void 0;w<n.length;q={Bb:q.Bb},++w)if(q.Bb=n[w],g.Mb!==a.video.width.ideal||q.Bb!==a.video.height.ideal){var H=Math.max(g.Mb,q.Bb)/Math.min(g.Mb,q.Bb);H<4/3-.1||H>16/9+.1||d(function(t,x){return function(A){A.video.width.ideal=t.Mb;A.video.height.ideal=x.Bb;return A}}(g,q))}}}d(function(t){return id(t)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(t){delete t.video.width.ideal;
delete t.video.height.ideal;return t}),d(function(t){delete t.video.width;delete t.video.height;return t}));a.video.facingMode&&(d(function(t){delete t.video.facingMode;return t}),a.video.width&&a.video.height&&d(function(t){id(t);delete t.video.facingMode;return t}));m.push({audio:a.audio,video:!0});return m}function jd(a){a.volume=0;Vb(a,"muted");if(Dc()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",
b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Vb(a,"muted")},5)}}function Od(a){var b=Fa.element,d=Fa.Eh;return null===b?Promise.resolve():new Promise(function(f,m){if(b.srcObject&&b.srcObject.getVideoTracks){var r=b.srcObject.getVideoTracks();1!==r.length?m("INVALID_TRACKNUMBER"):(r=r[0],a?kd(b,f,m,d):(r.stop(),f()))}else m("BAD_IMPLEMENTATION")})}function ld(a,b,d,f){function m(n){r||(r=!0,d(n))}var r=!1;navigator.mediaDevices.getUserMedia(f).then(function(n){function g(){setTimeout(function(){if(a.currentTime){var q=
a.videoHeight;if(0===a.videoWidth||0===q)m("VIDEO_NULLSIZE");else{q={tl:null,Lg:null,An:null};try{var w=n.getVideoTracks()[0];w&&(q.An=w,q.tl=w.getCapabilities(),q.Lg=w.getSettings())}catch(H){}r||(rc(a,n),b(a,n,q))}}else m("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var q=a.play();jd(a);"undefined"===typeof q?g():q.then(function(){g()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),
a.videoStream=n);jd(a);a.addEventListener("loadeddata",l,!1)}).catch(function(n){m(n)})}function kd(a,b,d,f){a?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(Vb(a,"autoplay"),Vb(a,"playsinline"),f&&f.audio?a.volume=0:Vb(a,"muted"),Pd(f).then(function(){ld(a,b,function(){function m(n){if(0===n.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var g=n.shift();ld(a,b,function(){m(n)},g)}}var r=Nd(f);m(r)},f)})):d&&d("MEDIASTREAMAPI_NOT_FOUND"):d&&d("VIDEO_NOT_PROVIDED")}function Pd(a){if(!a||
!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var b=a.video.facingMode;b=b.exact||b.ideal;if(!b)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[b];return d&&0!==d.length?new Promise(function(f){md(function(m){m?(m=m.find(function(r){var n=r.label;return n?d.some(function(g){return n.includes(g)}):!1}))?(a.video.deviceId={exact:m.deviceId},f("SUCCESS")):f("NO_PREFERRED_DEVICE_FOUND"):
f("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function md(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function Qd(){function a(K){K=K?Ec.pf:1;pa.width=K*J.width;pa.height=K*J.height;
return pa}function b(K){var S=K.length-1,Z=K[S];if("data:"===Z.substring(0,5))return Z;for(Z="";0<=S;--S){var ua=K[S],Pa="http"===ua.substring(0,4).toLowerCase();Z=ua+Z;if(Pa)break}return Z}function d(K,S,Z){return new Promise(function(ua){Ba.Sj(S);Ea.ca();nb.isEnabled=!0;Wa.isEnabled=!1;nb.qa||(nb.qa=tc.instance({}));K.ki()&&(nb.qa.Dg(K.ki()),Ba.sa(nb.qa));K.set();Wa.isEnabled=!1;t();var Pa=ob.gi(Z);setTimeout(function(){nb.isEnabled=!1;Ba.Sj(!1);ua(Pa)},1)})}function f(K,S){Ha.bd=.5;return new Promise(function(Z){Wa.ec=
K;Wa.isEnabled=!0;Wa.C=function(){var ua=nd.instance(S());Wa.C=null;Z(ua)}})}function m(K,S){return new Promise(function(Z,ua){Oa(S+K,function(Pa){Pa.error?ua("SKU_NOT_FOUND"):Z({Bn:Pa.intrinsic.mod+".json",zn:Pa.intrinsic.mats})})})}function r(K,S){var Z=b([J.ea,J.xa,J.ae+"/"]);S=S.map(function(ua){return Z+ua});W.model={url:b([J.ea,J.xa,J.be+"/"+K]),dc:S,rh:!1,qh:!1};return new Promise(function(ua){Ta.Qi(W.model,function(){ha.isBusy=!1;ua()})})}function n(K,S){if(!S)return K;K=K.slice(0);var Z=
ab.zf().map(function(kb){return kb.toLowerCase()}),ua;for(ua in S){var Pa=S[ua],rb=-1;"number"===typeof ua?rb=ua:rb=Z.indexOf(ua.toLowerCase());-1!==rb&&(K[rb]=Pa)}return K}function g(K,S){return new Promise(function(Z,ua){ha.set_model(K,function(){ha.set_materials(S,function(){ha.isBusy=!1;Z()})},function(){ha.isBusy=!1;ua("CANNOT_LOAD_MODEL")})})}function l(K,S){K&&(S&&A(),K.preOffset&&(wb=K.preOffset),K.preScale&&(Wb=K.preScale),void 0!==K.rx&&(I=K.rx),void 0!==K.beginBendZ&&(O=K.beginBendZ),void 0!==
K.bendStrength&&(Xb=K.bendStrength),K.maskBranchStartEnd&&(Yb=K.maskBranchStartEnd),ha.ready&&Ta.De())}function q(K){K.tweaker?l(K.tweaker,!0):(A(),ha.ready&&Ta.De())}function w(){ha.load_model=function(K,S,Z,ua,Pa,rb){if(ha.isBusy)return!1;ha.isBusy=!0;S=n(S,Pa);(W.model?g(K,S):r(K,S)).then(Z).catch(rb);return!0};ha.set_offset=function(K){Qa=K;Ta.Be()};ha.set_scale=function(K){Ia=K;Ta.Ce()};ha.set_rx=function(K){la=K;Ta.hk()};ha.switch_shadow=Ba.Qg;ha.switch_bgBlur=Ba.Pg;ha.set_zoom=Ba.Cg;ha.is_viewer3D=
function(){return ya===va.Ma};ha.switch_viewer3D=function(K,S){if(ya===va.pc||ya===va.qc||ya===va.Z&&!K||ya===va.Ma&&K||Wa.isEnabled)return!1;if(ya===va.wa)return xb!==va.Ma||K?xb===va.Z&&K?(xb=va.Ma,Ba.sa(Ha.Lb),Ba.hb(1),S&&S(),!0):!1:(xb=va.Z,Ba.sa(Ha.La),Ba.hb(0),S&&S(),!0);var Z=0,ua=-1,Pa=0;ya===va.Z?(ya=va.pc,ua=J.Dp):ya===va.Ma&&(ya=va.qc,ua=J.Gp);var rb=Oc.vf();Bb=setInterval(function(){var kb=Oc.vf();Z+=(kb-rb)/ua;1<=Z&&(Z=1,ya===va.pc?(ya=va.Ma,Ba.sa(Ha.Lb)):(ya=va.Z,Ba.sa(Ha.La)),S&&S(),
clearInterval(Bb),Bb=null);var Ib=0;ya===va.qc||ya===va.Z?Ib=1-J.Bp(Z):Ib=J.Ap(Z);Ba.hb(Ib);ya!==va.qc&&ya!==va.pc||0!==Pa++%2||(Ba.sa(Ha.eg),Ha.eg.Oo(Ib));rb=kb},.016);return!0};ha.capture_image=function(K,S,Z,ua){Wa.ec=K;Wa.isEnabled=!0;"undefined"===typeof isAllocate&&(Z=!1);(ua="undefined"===typeof ua?!1:ua)&&Ba.ue(!1);L();Wa.C=function(){Ba.nj(0);c.flush();var Pa=ob.gi(Z);S(Pa);ua&&Ba.ue(!0)}};ha.capture_detection=function(K,S){var Z=null===ka.Ob?ka.pb:ka.ed;f(K,function(){return{td:xa.sc.clone(),
fg:ab.oi(),ag:ab.mi(),background:Z.clone(),qa:za.Na.pi().clone(),$f:pb}}).then(S)};ha.process_image=function(K){function S(){return new Promise(function(Cb,tb){Wa.$g=kb.updateLightInterval;f(kb.nSteps,Z).then(function(lb){Wa.$g=3;lb?1>=lb.xm().data[0]?(lb.I(),tb("FACE_NOT_FOUND")):d(lb,kb.isMask,!0).then(function(Rd){Ba.sa(Ha.La);lb.I();Cb(Rd)}):tb("CRITICAL")});t()})}function Z(){return{td:xa.sc.clone(),fg:!1,ag:!1,background:ka.pb.clone(!0),qa:za.Na.pi().clone()}}function ua(){return new Promise(function(Cb,
tb){m(kb.modelSKU,kb.glassesDBURL).then(function(lb){ha.load_model(lb.Bn,lb.zn,function(){Cb()},kb.modelSKU,null,function(){tb("CANNOT_LOAD_MODEL")})}).catch(function(lb){tb(lb)})})}function Pa(){if(kb.image){var Cb=kb.image;rb(Cb);return Promise.resolve(Cb)}return new Promise(function(tb){var lb=new Image;lb.onload=function(){rb(lb);tb()};lb.src=kb.imageBase64})}function rb(Cb){var tb=Cb.width,lb=Cb.height;if(tb!==J.width||lb!==J.height)Fa.Sd&&(Fa.element.width=tb,Fa.element.height=lb),u(tb,lb,kb.overSamplingFactor);
Fa.Th.drawImage(Cb,0,0);L()}var kb=Object.assign({imageBase64:null,image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",isMask:!0},K);if(J.Oc)throw Error("This feature cannot be called");var Ib=cb.FOVforced;kb.FOVHztDeg&&(cb.FOVforced=kb.FOVHztDeg);Ba.sa(Ha.La);return new Promise(function(Cb,tb){return ua().then(Pa).then(function(){S().then(function(lb){cb.FOVforced=Ib;Cb(lb)}).catch(tb)}).catch(tb).catch(tb)})};
ha.process_offlineRendering=function(K,S,Z,ua,Pa){Ta.oo();ua&&(qa.xn.drawImage(ob.xb(),0,0),ob.xb().parentNode.insertBefore(qa.Eb,ob.xb()),qa.Eb.setAttribute("class","jeefitMask"));ha.set_model(S,function(){ha.set_materials(Z,function(){setTimeout(function(){d(K,ua).then(Pa);Ta.lo(ua?function(){ob.xb().parentNode.removeChild(qa.Eb)}:!1)},1)})})};ha.serialize_detection=function(K){return K.fc()};ha.unserialize_detection=function(K,S,Z){return nd.dd(K,S,Z)};ha.do_instantDetection=function(K,S){od.m(xa.sc);
od.start(K,S)};ha.relieve_DOM=function(K,S){if(F.Zb)return!1;k(S||160);Ma.isEnabled=!1;ta&&clearTimeout(ta);ta=setTimeout(function(){k(J.Ea);ta=!1;E()},K);return!0};ha.switch_slow=function(K,S){if(F.Zb)return!1;"undefined"===typeof S&&(S=J.Hk);ta&&(k(J.Ea),E(),clearTimeout(ta),ta=!1);K?Ma.isEnabled=!1:E();k(K?S:J.Ea);return!0};ha.switch_sleep=function(K,S){function Z(){ha.isBusy=!1;K?(xb=ya,ya=va.wa):(ya=xb,t())}if(F.Zb||ha.isBusy)return S?Promise.reject():null;if(K&&ya===va.wa||!K&&ya!==va.wa)return S?
Promise.resolve(!1):!1;Bb&&(clearInterval(Bb),Bb=null);ya===va.qc?(ya=va.Z,Ba.sa(Ha.La),Ba.hb(0)):ya===va.pc&&(ya=va.Ma,Ba.sa(Ha.Lb),Ba.hb(1));Eb.stop();var ua=null;ha.isBusy=!0;S?ua=Od(!K).then(Z):Z();return S?ua:!0};ha.set_modelStandalone=function(K,S){Ba.ve(!1);Pc.instance({rd:q,url:K.model,dc:K.materials,Te:function(Z){x(Z);S&&S();Ta.Ng();Ba.ve(!0)}})};ha.start_rendering=Ta.Ng;ha.get_partsNames=function(){return ab?ab.zf():[]};ha.update_material=function(K,S,Z){if(!ab)return Promise.reject("MODEL_NOT_LOADED");
var ua=-1;switch(typeof K){case "number":ua=K;break;case "string":ua=ab.zf().findIndex(function(Pa){return Pa.includes(K)});if(-1===ua)return Promise.reject("PART_NOT_FOUND");break;default:return Promise.reject("INVALID_PART_ID")}void 0===Z&&(Z=!0);ab.gk(ua,S,Z);return Promise.resolve()};ha.set_model=function(K,S,Z){ab&&(K=b([J.ea,J.xa,J.be+"/",K]),ab.replace(K,function(){S&&S(ab.xl())},Z))};ha.update_tweaker=function(K){l(K,!1)};ha.set_tweaker=function(K,S){function Z(ua){l(ua,!0);S&&S()}"string"===
typeof K?sb(J.ea+J.xa+J.hp+"/"+K,Z):Z(K)};ha.get_tweaker=function(){return{preOffset:wb,preScale:Wb,rx:I,beginBendZ:O,bendStrength:Xb,maskBranchStartEnd:Yb}};ha.get_materialsSpec=function(){return ab?ab.li():Promise.reject("NOT_READY")};ha.set_materials=function(K,S){if(ab){var Z=b([J.ea,J.xa,J.ae+"/"]);K=K.map(function(ua){var Pa=ua;"string"===typeof ua&&(Pa=Z+ua,Pa=Pa.replace(/([^:])\/\//,"$1/"));return Pa});ab.Eg(K,S)}};ha.replace_material=function(K,S){if(ab)return ab.li().then(function(Z){Z=
Object.assign({isReplaced:!0},Z[S]);ab.gk(S,K,!0);return Z})}}function H(){ja.dh(Ec.am);Ta.cd();J.bc&&(Ea.reset(),za.Na.wh(Fa.V),za.Na.vh());ha.ready=!0;Fc.forEach(function(K){K()});Fc.splice(0)}function t(){Ob.reset();Eb.stop();Ea.ca();h(0)}function x(K){ab&&(Ba.eo(ab),ab.remove());Ba.Ck(K);ab=K}function A(){wb=[0,0,0];Wb=1;Xb=O=I=0;Yb=J.Sc}function k(K){da=K;Eb.update({Ea:da})}function h(K){Ma.Fb=-1;if(Wa.isEnabled)Ma.Fb=Wa.ec;else if(nb.isEnabled)Ma.Fb=nb.ec;else if(Ma.isEnabled){if(!L())return;
Ma.Fb=ya===va.Z?Ob.X():1}else if(Ma.Fb=J.gd[0],!L())return;Ea.ca();if(!nb.isEnabled)for(var S=0;S<Ma.Fb;++S)aa.set("s64"),ka.Kf.J(.25*pa.width,ra.ii()),ka.pb.h(0),xa.Vc.h(1),Y.l(!1,!1),ra.Ca(ka.Kf),Wa.isEnabled&&0===(S+1)%Wa.$g&&p();Wa.isEnabled?(Wa.C&&Wa.C(),Wa.isEnabled=!1,c.flush(),ya!==va.wa&&Eb.xg(h)):(Ba.animate(K),ka.tg&&Math.abs(bb-Ha.Oi)>Ha.Vj&&J.bc&&ya===va.Z&&(Ea.ca(),p(),Ea.ba()),nb.isEnabled||(Ma.isEnabled&&(Ob.Zj(),S=Ob.fi(1),Ma.th=S,Ma.Ne=La(J.Fk,S),J.bc&&ya===va.Z&&(Ha.Vj=La(J.Pi,
S),Ha.bd=La(J.rn,S),Ha.bd=Math.min(Ha.bd,.5))),bb=K,ya!==va.wa&&Eb.xg(h)))}function E(){bb=Oc.vf();Ma.isEnabled=!0}function L(){var K=15;if(!Fa.Sd){if(!Fa.element.videoWidth)return Eb.stop(),ha.request_cameraVideoStream().then(t),!1;var S=Fa.element.currentTime;if(!S)return!0;K=S-Qc;0>K&&(Qc=S);if(1E3*K<J.vp)return!0}Fa.V.refresh();Qc+=K;Fa.Ad=K;$a=!0;Ea.ca();aa.set("s0");xa.ug.J();xa.Vc.il(0);Y.l(!0,!0);aa.set("s62");ka.pb.J();Fa.V.h(0);Y.l(!1,!1);null!==ka.Ob&&(aa.set("s63"),ka.ed.u(),ka.pb.h(0),
ka.Ob.h(1),Y.l(!1,!1));return!0}function B(){ka.mk=ca.instance({isPot:!0,isLinear:!0,isFloat:!1,url:J.ea+J.xa+J.wp});var K={isPot:!1,isLinear:!0,isFloat:!1,width:pa.width,height:pa.height};ka.pb=ca.instance(K);ka.ed=ca.instance(K);F.Wj.push(ka.pb,ka.ed);ka.Kf=Sd.instance({});J.Yd&&(uc=ca.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(J.Zf||-1!==J.Yf.indexOf("//")?"":J.ea+J.xa)+J.Yf}))}function D(){function K(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,
0,0,0])}}var S={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};xa.Vc=Rc.instance(K());xa.ug=ca.instance(K());xa.sc=ca.instance(K());xa.ge=Rc.instance(K());xa.gf=ca.instance(S);S={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};xa.eh=ca.instance(S);xa.Fe=ca.instance(S);Ha.he=ca.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function e(K){ka.tg=K;if($a){$a=!1;aa.set("s70");xa.eh.J();xa.Fe.h(2);
var S=La(J.kl,Ob.fi(.5));aa.D("u72",S);xa.ug.h(1);aa.D("u73",1E3*Fa.Ad);Y.l(!1,!1);aa.set("s71");xa.Fe.u();xa.eh.h(0);Y.l(!1,!1)}K.h(0);xa.Vc.Bj(1);c.viewport(0,0,1,1);aa.set("s65");aa.Jg("u48",pd.get(0));Y.l(!1,!1);aa.set("s66");c.viewport(1,0,2,1);Y.l(!1,!1);xa.gf.J();aa.set("s67");aa.O("u59",J.Oe[0]*Ma.Ne,J.Oe[1]);aa.D("u62",Ma.th);xa.Vc.h(0);xa.ge.h(1);Y.l(!1,!1);aa.set("s68");xa.ge.Bj(1);xa.gf.h(0);xa.Fe.h(2);xa.Vc.h(3);Y.l(!1,!1);aa.set("s69");xa.ge.h(0);xa.sc.u();Y.l(!1,!1)}function p(){Ha.Oi=
bb;Ha.he.J();aa.set(M.Fi?"s73":"s72");ka.tg.h(0);Y.l(!1,!1);za.Na.kk(Fa.V,Ha.he,Ha.bd)}function z(){return new Promise(function(K){sb(qd(),function(S){S=JSON.parse(S);if(S.exportData){var Z=S.exportData;M.Ua=Z.rotationEulerAnglesFactors?[-Z.rotationEulerAnglesFactors[0],-Z.rotationEulerAnglesFactors[1],Z.rotationEulerAnglesFactors[2]]:M.Ua;M.Fc=void 0===Z.deformScaleXFactor?M.Fc:Z.deformScaleXFactor;M.ua=Z.translationScalingFactors||M.ua;M.Sh=Z.dyOffset||0;M.Qh=Z.dsOffset||0;M.Fi=Z.isLThetaSplitCosSin||
!1;U()}ra=new Cc({Qc:S.layers,ee:"gpuRawAvg",de:e});K()})})}function P(K){a(K);K=J.width;var S=J.height;T.sb[0]=1;T.sb[1]=K/S;pd.m({fe:J.scanOverlapFactors,Yi:J.scanNScaleLevels,Y:K,cb:S,tj:J.scanScale0Factor,ua:M.ua,yg:!0});Zb=K>S?[K/S,1]:[1,S/K];F.Qa=!0}function G(){aa.j("s65",[{type:"3f",name:"u49",value:[M.ua[0]*T.sb[0],M.ua[1]*T.sb[1],M.ua[2]]}])}function U(){aa.j("s64",[{type:"1f",name:"u44",value:M.Fc},{type:"1f",name:"u46",value:M.Sh},{type:"1f",name:"u45",value:M.Qh}]);G();var K=[1/M.Ua[0],
1/M.Ua[1],1/M.Ua[2]];aa.j("s66",[{type:"3f",name:"u54",value:K}]);aa.j("s70",[{type:"3f",name:"u54",value:K}])}function N(){aa.j("s64",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u42",value:1},{type:"2f",name:"u43",value:T.sb}]);aa.j("s65",[{type:"1i",name:"u47",value:0},{type:"1i",name:"u42",value:1},{type:"1f",name:"u52",value:J.ep},{type:"1f",name:"u53",value:J.El},{type:"3f",name:"u50",value:[J.rc[0][0],J.rc[1][0],J.rc[2][0]]},{type:"3f",name:"u51",value:[J.rc[0][1],J.rc[1][1],J.rc[2][1]]}]);
aa.j("s66",[{type:"1i",name:"u47",value:0},{type:"1i",name:"u42",value:1},{type:"2f",name:"u56",value:J.Vn},{type:"3f",name:"u55",value:J.Yj},{type:"1f",name:"u57",value:J.bm}]);aa.j("s67",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u58",value:1},{type:"2f",name:"u59",value:J.Oe},{type:"1f",name:"u60",value:J.mo},{type:"1f",name:"u61",value:J.Un}]);aa.j("s68",[{type:"1i",name:"u58",value:1},{type:"1i",name:"u63",value:0},{type:"1i",name:"u64",value:2},{type:"1i",name:"u65",value:3},{type:"2f",
name:"u43",value:T.sb},{type:"1f",name:"u67",value:ra.ii()},{type:"2f",name:"u66",value:J.io}]);aa.j("s69",[{type:"1i",name:"u42",value:0},{type:"1f",name:"u68",value:J.po},{type:"1f",name:"u69",value:J.gp}]);aa.j("s70",[{type:"1i",name:"u47",value:0},{type:"1i",name:"u42",value:1},{type:"1i",name:"u64",value:2},{type:"3f",name:"u55",value:J.Yj}]);aa.j("s71",[{type:"1i",name:"u64",value:0},{type:"2f",name:"u74",value:J.fp},{type:"2f",name:"u75",value:J.no}]);aa.j("s72",[{type:"1i",name:"u47",value:0}]);
aa.j("s73",[{type:"1i",name:"u47",value:0}]);aa.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u76",value:1}])}function u(K,S,Z){var ua=0===Z,Pa=a(ua);J.width=K;J.height=S;P(ua);N();G();F.Wj.forEach(function(rb){rb.resize(K,S)});Z=ua?1:Z;ja.resize(Pa.width*Z,Pa.height*Z);Ta.cd();hb.Kg(Fa.element.videoWidth||Fa.element.width,Fa.element.videoHeight||Fa.element.height);hb.Rg();hb.Tj()}function y(){Eb.stop();F.lb&&(clearTimeout(F.lb),F.lb=null);if(!F.Zb){var K=F.width,S=F.height;if(J.width===
K&&J.height===S)t();else if(ya!==va.Z&&ya!==va.Ma)F.lb=setTimeout(y,J.rj);else{var Z="undefined"===typeof Fb?!1:Fb.get_mode(),ua=ya;ya=va.wa;F.Zb=!0;Wa.isEnabled=!0;Wa.C=function(){Wa.isEnabled=!1;F.Zb=!1;E();k(J.Ea);ta&&clearTimeout(ta);ta=!1;ya=ua};u(K,S,0);t();ya===va.Ma&&(ya=va.Z,ha.switch_viewer3D(!0,!1));Z&&Fb.switch_mode(Z)}}}var I,O,T={sb:[-1,-1]},ba=null,fa=[.5,0,0,.5],pa={width:-1,height:-1},V={width:-1,height:-1,lb:null,Zb:!1,Qa:!1,Wj:[]},F=Object.assign({},V),v=[0,J.ie[1],J.ie[2]],M={Ua:[-J.Ua[0],
-J.Ua[1],J.Ua[2]],Fc:J.Fc,ua:J.ua,Sh:0,Qh:0,Fi:!1},da=J.Ea,ta=null,ra=null,qa={Nb:null,tc:null,Eb:null,Nq:null};a(!0);var Qa=[0,0,0],Ia=1,la=0,R={pb:null,ed:null,Kf:null,mk:null,tg:null,Ob:null},ka=Object.assign({},R),xa={ug:null,sc:null,ge:null,gf:null,eh:null,Fe:null},bb=0,$a=!1,Ra={La:null,Lb:null,eg:null,Oi:0,Vj:J.Pi[1],bd:.1,he:null},Ha=Object.assign({},Ra),Pb=!1,fb=!1,Ma={isEnabled:!0,Ne:1,Fb:-1,th:1},va={wa:-1,Z:0,Ma:1,pc:2,qc:3},ya=va.Z,Bb=null,xb=va.Z,Wa={isEnabled:!1,ec:1,$g:3,C:null},nb=
{isEnabled:!1,qa:null,ec:0},uc=null,Zb=-1,fc=!1,vc=!1,Xa=!1,wc=[0,0,0],ia=1,Aa,ib,Na,wb=[0,0,0],Wb=1,Xb=O=I=0,Yb=J.Sc,Gc=[0,0,0],pb={scale:1,offsetX:0,offsetY:0},Qc=0,Ta={m:function(){aa.xc([{id:"s62",name:"_",v:"attribute vec2 a0;uniform mat2 u41;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u41*a0;}",K:["a0"],S:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u41"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
v:"attribute vec2 a0;uniform sampler2D u42;uniform vec2 u43;uniform float u44,u45,u46;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5);varying vec2 vv0;void main(){vec4 b=texture2D(u42,h);vec2 c=b.gb,a=b.a*u43;vec4 l=texture2D(u42,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u44),1.);a*=n,a*=1.+u45;vec2 o=a0*.5;float d=texture2D(u42,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5)*a*(g*vec2(0.,u46)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",K:["a0"],S:[2],i:"u1 u42 u43 u44 u45 u46".split(" "),
precision:"lowp"},{id:"s65",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u47,u42;uniform vec3 u48,u49,u50,u51;uniform float u52,u53;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u47,vec2(.625,.625)),k=texture2D(u47,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u53;vec4 a=texture2D(u42,f);m?a.r=2.:a.r>u52?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u48);else{float n=dot(e,texture2D(u47,vec2(.875,.875))),o=dot(e,texture2D(u47,vec2(.125,.625))),p=dot(e,texture2D(u47,vec2(.375,.625))),b=texture2D(u42,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u42,g).a;vec3 s=mix(u50,u51,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u49*s*a.a;}gl_FragColor=a;}",
i:"u47 u42 u48 u52 u49 u53 u50 u51".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u47,u42;uniform vec3 u54,u55;uniform vec2 u56;uniform float u57;const vec4 v=vec4(1.),f=vec4(0.),e=vec4(.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u42,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u47,vec2(.125,.125)),e),a=smoothstep(u56.x,u56.y,m);vec4 n=texture2D(u42,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u47,vec2(.125,.875))),q=dot(e,texture2D(u47,vec2(.375,.875))),r=dot(e,texture2D(u47,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u55+s*u54;float c=texture2D(u42,i).r,d=b.z*u57;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u47 u42 u56 u54 u55 u57".split(" ")},{id:"s67",name:"_",g:"uniform sampler2D u42,u58;uniform vec2 u59;uniform float u60,u61,u62;const vec4 f=vec4(1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 j=vec4(max(.1,1.-u62),0.,0.,0.),k=texture2D(u42,vv0),l=texture2D(u58,vv0),q=texture2D(u42,g),m=texture2D(u58,g);float n=pow(m.a,u61),o=mix(u59.y,u59.x,n),b=step(.66,vv0.x),c=step(.34,vv0.x)*(1.-b);vec4 a=mix(h,i,c);a=mix(a,j,b);vec4 d=max(o*f,a);d*=mix(f,u60*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),c);vec4 p=k-l;gl_FragColor=p*d;}",
i:"u42 u58 u59 u60 u61 u62".split(" "),precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u58,u63,u64,u65;uniform vec2 u43,u66;uniform float u67;const vec4 w=vec4(0.),x=vec4(1.);const vec2 j=vec2(.25,.5),k=vec2(.75,.5),g=vec2(.16,.5),l=vec2(.5,.5);varying vec2 vv0;bool f(float a){return (a<0.||0.<a||a==0.)&&a+1.!=a?false:true;}void main(){float y=step(vv0.x,.33),m=step(.33,vv0.x)*step(vv0.x,.66),z=step(.66,vv0.x);vec4 n=texture2D(u65,l);float b=n.a;b*=texture2D(u64,j).a,b*=texture2D(u64,k).a;vec4 o=texture2D(u58,vv0),p=texture2D(u63,vv0),c=o+p;c.a=mix(c.a,b,m);vec4 e=texture2D(u58,g),q=texture2D(u65,g);vec2 r=e.gb,s=q.gb;float t=e.a;vec2 h=u67*abs(r-s)/(u43*t);float u=max(h.x,h.y),v=smoothstep(u66.x,u66.y,u);vec4 i=texture2D(u65,vv0),a=mix(c,i,v);if(f(a.x)||f(a.y)||f(a.z)||f(a.w)){gl_FragColor=i;return;}gl_FragColor=a;}",
i:"u58 u63 u64 u65 u43 u67 u66".split(" "),precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u42;uniform float u68,u69;const vec2 f=vec2(.5,.5);const float h=-.4;varying vec2 vv0;void main(){vec4 a=texture2D(u42,vv0);float b=step(vv0.x,.33),g=(1.-b)*step(.66,vv0.x),c=texture2D(u42,f).r,d=texture2D(u42,f).g;a.a+=b*a.a*u68*abs(sin(d)),a.r-=u69*g*step(c,0.)*sin(c)*sin(d),gl_FragColor=a;}",i:["u42","u68","u69"],precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u42,u64,u47;uniform vec3 u54,u55;uniform float u72,u73;const vec4 e=vec4(.25);const vec3 g=vec3(1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u42,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u64,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u47,k)),o=dot(e,texture2D(u47,l)),p=dot(e,texture2D(u47,m));vec3 q=mix(i,u54,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u55+b-r,a)/u73;vec4 s=mix(vec4(b,0.),j,vec4(u72*g,0.));gl_FragColor=s;}",
i:"u42 u64 u47 u72 u73 u54 u55".split(" "),precision:"highp"},{id:"s71",name:"_",g:"uniform sampler2D u64;uniform vec2 u74,u75;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u74.x,u75.x,a),d=mix(u74.y,u75.y,a);vec3 b=texture2D(u64,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u64","u74","u75"],precision:"highp"},{id:"s72",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u47;const vec4 e=vec4(.25);const float f=3.1415;void main(){float a=dot(texture2D(u47,vec2(.375,.375)),e),b=dot(texture2D(u47,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u47,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u47,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u47"]},{id:"s73",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u47;const vec4 e=vec4(.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u47,vec2(.875,.375)),e),c=dot(texture2D(u47,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u47,vec2(.625,.375)),e),a=dot(texture2D(u47,vec2(.125,.375)),e),h=dot(texture2D(u47,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u47"]},{id:"s63",name:"_",g:"uniform sampler2D u1,u76;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u76);}",
i:["u1","u76"]}]);D();Eb.m({Ei:!1,Ea:da});Ob.m({ig:1,n:J.gd[1]-J.gd[0]+1,Sf:J.gd[0]});ha.set_videoRotation=function(K){cb.rotate=K;ha.ready&&(hb.Kg(Fa.element.videoWidth,Fa.element.videoHeight),hb.Rg())};ha.set_viewRotation=function(){};ha.set_LUT=function(K){return new Promise(function(S){K?ca.instance({url:K,isFloat:!1,isFlipY:!1,C:function(Z){ka.Ob=Z;Ta.cd();S()}}):(ka.Ob=null,Ta.cd(),S())})};ha.resize=function(K,S,Z,ua){ha.ready&&(F.lb&&(clearTimeout(F.lb),F.lb=null),Eb.stop(),Z=Z?Ec.pf:1,F.width=
K*Z,F.height=S*Z,F.lb=setTimeout(y,ua?0:J.rj))};return z()},cm:u,ap:function(){B();P(!0);N();U();Ta.Tj();w();Hc.forEach(function(K){K()});Hc.splice(0);W.model&&!ha.isBusy?Ta.Qi(W.model):J.Oc||H();return Promise.resolve()},wm:function(){return pa},A:function(){return new Promise(function(K,S){ha.ready?(Eb.A(),ha.switch_sleep(!0,!0).finally(function(){ra&&ra.A();ja.A();ob.A();c&&(c=null);ra=null;J.Zf=!1;ab=null;fb=Pb=!1;Ma.isEnabled=!0;Ma.Ne=1;Ma.Fb=-1;ya=va.Z;Bb=null;xb=va.Z;Object.assign(F,V);Object.assign(Fa,
rd);Object.assign(ka,R);Object.assign(Ha,Ra);ha.ready=!1;ha.isBusy=!1;ha.load_model=null;K()}).catch(function(Z){S(Z)})):S("NOT_READY")})},cd:function(){Ba.zj(xa.sc,null===ka.Ob?ka.pb:ka.ed,Ha.he,ka.mk)},um:function(){return pb},Hj:function(K){pb=K},Be:function(){Gc[0]=Qa[0]-pb.offsetX;Gc[1]=Qa[1]+pb.offsetY;Gc[2]=Qa[2];Ba.vo(v,wb,Gc)},Ce:function(){Ba.wo(Ia*J.Qn,Wb,pb.scale)},hk:function(){Ba.xo(la+I)},mp:function(){Ba.to(J.md+O,J.Qb+Xb)},op:function(){Ba.uo(Yb)},De:function(){Ta.Be();Ta.Ce();Ta.hk();
Ta.mp();Ta.op()},oo:function(){Eb.stop();Bb&&(clearInterval(Bb),Bb=null);nb.isEnabled=!0;nb.ec=0;fc=Ba.tm();vc=ab.oi();Xa=ab.mi();ia=Wb;wc=wb;Aa=Yb;ib=O;Na=Xb;Wa.isEnabled=!1;Ba.ue(!1)},lo:function(K){function S(){2===++Z&&(nb.isEnabled=!1,Wb=ia,wb=wc,Yb=Aa,O=ib,Xb=Na,Ta.De(),Ba.sa(fc),t(),K&&K())}var Z=0;ya===va.pc?ya=va.Ma:ya===va.qc&&(ya=va.Z);Ba.hb(ya===va.Z?0:1);ab.replace(vc,S);ab.Eg(Xa,S);Ta.cd();Ba.ue(!0)},Tj:function(){var K=Math.tan(Fa.sf/2);Ba.yj({rf:J.rf/K,qo:K,Tn:Fa.ij,Ja:J.Ja,gg:J.gg,
hg:J.hg,qk:T.sb,Ak:J.zp,Jc:J.Jc,Gf:J.Gf,Ef:J.Ef,Ff:J.Ff,Sc:Yb,Pe:J.Pe,bf:J.bf,wg:J.wg,mc:J.mc,Vo:J.Nj,Wo:J.Oj,te:J.te,nc:J.nc,ud:J.ud,ef:J.ef,df:J.df,cf:J.cf,Se:J.Se,Re:J.ea+J.xa+J.Re,md:J.md+O,Qb:J.Qb+Xb,Cf:J.Cf,jh:J.jh,ih:J.ih,Ie:J.Ie,Fp:J.Ep,He:Fa.He,Yd:J.Yd,tn:uc,Xd:J.Xd,Zd:J.Zd,Xf:J.Xf,sn:Zb,Sg:J.Sg})},ul:function(){var K=cb.Le,S=cb.Ke,Z=1/Math.tan(.5*Fa.sf),ua=ob.aa()/ob.P();Fa.ij=[Z,0,0,0,0,Z/ua,0,0,0,0,-(S+K)/(S-K),-1,0,0,-2*K*S/(S-K),0];Fa.He=1/Math.tan(J.Cp*Math.PI/360)/Z},Kg:function(K,
S){ba=[.5,.5];K=S/K;S=ob.aa()/ob.P();90===Math.abs(cb.rotate)&&(K=1/K);K>S?ba[1]*=S/K:ba[0]*=K/S;fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;switch(cb.rotate){case 0:fa[0]=ba[0];fa[3]=ba[1];break;case 180:fa[0]=-ba[0];fa[3]=-ba[1];break;case 90:fa[1]=ba[0];fa[2]=-ba[1];break;case -90:fa[1]=-ba[0],fa[2]=ba[1]}J.Hi||(fa[0]*=-1,fa[1]*=-1);S=ba;var Z=qc(),ua=cb.FOVforced;Z=(ua?ua:Z?cb.FOVmobile:cb.FOVdesktop)*Math.PI/180;Z=2*Math.atan(Math.max(K,1/K)/(16/9)*Math.tan(.5*Z));Fa.sf=2*Math.atan(2*S[0]*Math.tan(.5*(1<
K?2*Math.atan(1/K*Math.tan(.5*Z)):Z)));Ta.ul()},Rg:function(){aa.j("s62",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u41",value:fa}])},Jf:function(K,S){return fb?Promise.resolve():new Promise(function(Z,ua){Ta.Om(K,S);Promise.all([Ta.m(),Ta.Pm()]).then(function(){Ta.yi();fb=!0;Z()}).catch(function(Pa){Sb&&Sb("GL_INCOMPATIBLE","Cannot init JEELIZVTO");ua(Pa)})})},Om:function(K,S){qa.Nb=document.createElement("canvas");qa.Eb=document.createElement("canvas");qa.Eb.width=J.width;qa.Eb.height=J.height;
qa.xn=qa.Eb.getContext("2d");ha.replace_video=function(Z){Fa.element=Z;Fa.Yg.ma=Fa.element;return!0};qa.tc=qa.Nb.getContext("2d");ha.capture_background=function(Z,ua){Z="undefined"===typeof Z?K:Z;ua="undefined"===typeof ua?S:ua;qa.Nb.width=Z;qa.Nb.height=ua;var Pa=Z/ua,rb=0,kb=0;if(K/S>Pa){var Ib=S*Pa;Pa=S;rb=Math.round((K-Ib)/2)}else Ib=K,Pa=K/Pa,kb=Math.round((S-Pa)/2);qa.tc.save();qa.tc.translate(Z,0);qa.tc.scale(-1,1);qa.tc.drawImage(Fa.element,rb,kb,Ib,Pa,0,0,Z,ua);qa.tc.restore();Z=document.createElement("canvas");
Z.width=qa.Nb.width;Z.height=qa.Nb.height;Z.getContext("2d").drawImage(qa.Nb,0,0);return Z}},yi:function(){window.CanvasListeners&&(Fb.init({ta:ob.xb()}),ha.init_listeners=Ta.yi,ha.add_listener=Fb.add_listener,ha.remove_listener=Fb.remove_listener,ha.animate_swipe=Fb.animate_swipe,ha.switch_modeInteractor=Fb.switch_mode,ha.get_modeInteractor=Fb.get_mode,Fb.add_listener("move",function(K,S){ya===va.Z&&(J.un&&(pb.offsetX-=S[0]*J.Si,pb.offsetX=Math.min(Math.max(pb.offsetX,-J.$d),J.$d)),pb.offsetY-=S[1]*
J.Si,pb.offsetY=Math.min(Math.max(pb.offsetY,-J.$d),J.$d),Ta.Be())},!0).add_listener("pinch",function(K,S){ya===va.Z&&(pb.scale+=S*J.vn,pb.scale=Math.min(Math.max(pb.scale,J.Ti[0]),J.Ti[1]),Ta.Ce())},!0))},Pm:function(){return new Promise(function(K,S){ja.m({Od:!1,sl:!1,expand:!1,ta:ob.xb(),Vb:ob,onload:function(){Ha.Lb=tc.instance({Pb:J.ea+J.xa+db.xp,zc:J.ea+J.xa+db.yp,yc:db.nk,Ac:db.pk});J.bc?(Ha.La=tc.instance({}),za.Na.sa(Ha.La)):Ha.La=Ha.Lb;Ba.sa(Ha.La);Ha.eg=J.bc?Td.instance({qn:Ha.La,on:Ha.Lb}):
Ha.Lb;K()}})||S("CANNOT_INIT_JE3D")})},Ng:function(){Pb||(Pb=!0,Ta.De(),H(),bb=0,J.Oc&&t())},Qi:function(K,S){K=Pc.instance({Te:function(){Ta.Ng();S&&S()},rd:q,url:K.url,dc:K.dc});x(K)},Uj:function(){if(J.bc){var K=Object.assign({},db,{Hb:b([J.ea,J.xa,db.Hb])});za.Na.mb(K)}}};return Ta}function Ud(a){var b=document.createElement("link");b.setAttribute("href",a);"json"===a.split(".").pop().toLowerCase()?(b.setAttribute("rel","preload"),b.setAttribute("as","fetch"),b.setAttribute("type","application/json"),
b.setAttribute("crossorigin","")):b.setAttribute("rel","prefetch");document.head.appendChild(b)}function qd(a){if(!a){a=J.ea;var b=J.fd.split("://").shift();if("http"===b||"https"===b)a=""}a+=J.fd;"json"!==a.split(".").pop()&&(a+=J.neuralNetworkPath);return a}function sd(){return new Promise(function(a,b){Sc&&Sc();Fa.Sd=!1;var d={width:{min:cb.minWidth,max:cb.maxWidth,ideal:cb.idealWidth},height:{min:cb.minHeight,max:cb.maxHeight,ideal:cb.idealHeight},facingMode:{ideal:"user"}},f={video:d,audio:!1};
Fa.Eh=f;d&&-1!==Fa.deviceId&&hd(f,Fa.deviceId);kd(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(m){Tc&&Tc(m);td(m).then(a).catch(b)},function(m){Sb&&Sb("WEBCAM_UNAVAILABLE",m);b(m)},f)})}function td(a){Fa.element=a;a=Fa.element.videoWidth||Fa.element.width;var b=Fa.element.videoHeight||Fa.element.height;Fa.Yg={ma:Fa.element,isPot:!1,isFloat:!1,isFlipY:!0};Fa.V=ca.instance(Fa.Yg);hb.Kg(a,b);return hb.Jf(a,b).then(function(){hb.Rg();return hb.ap()}).catch(function(d){return Promise.reject(d)})}
function Vd(){var a=document.createElement("canvas");a.width=J.width;a.height=J.height;Fa.Th=a.getContext("2d");Fa.Sd=!0;return td(a)}function gc(a){return 3===arguments.length?this.vb(arguments):this.set(a)}function ud(a,b){b=Math.floor(b);a.r=(b>>16&255)/255;a.$=(b>>8&255)/255;a.b=(b&255)/255}function Wd(a,b){function d(g){void 0!==g&&1>parseFloat(g)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var f;if(f=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var m=f[2];switch(f[1]){case "rgb":case "rgba":if(f=
/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(m)){a.r=Math.min(255,parseInt(f[1],10))/255;a.$=Math.min(255,parseInt(f[2],10))/255;a.b=Math.min(255,parseInt(f[3],10))/255;d(f[5]);return}if(f=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(m)){a.r=Math.min(100,parseInt(f[1],10))/100;a.$=Math.min(100,parseInt(f[2],10))/100;a.b=Math.min(100,parseInt(f[3],10))/100;d(f[5]);return}break;case "hsl":case "hsla":if(f=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(m)){m=
parseFloat(f[1])/360;var r=parseInt(f[2],10)/100,n=parseInt(f[3],10)/100;d(f[5]);a.so(m,r,n);return}}}else if(f=/^#([A-Fa-f0-9]+)$/.exec(b)){f=f[1];m=f.length;if(3===m){a.r=parseInt(f.charAt(0)+f.charAt(0),16)/255;a.$=parseInt(f.charAt(1)+f.charAt(1),16)/255;a.b=parseInt(f.charAt(2)+f.charAt(2),16)/255;return}if(6===m){a.r=parseInt(f.charAt(0)+f.charAt(1),16)/255;a.$=parseInt(f.charAt(2)+f.charAt(3),16)/255;a.b=parseInt(f.charAt(4)+f.charAt(5),16)/255;return}}b&&0<b.length&&(f=Xd[b],void 0!==f?ud(a,
f):console.warn("JETHREE.Color: Unknown color "+b))}function Ic(a,b,d,f){this.F=a||0;this.G=b||0;this.H=d||0;this.T=void 0!==f?f:1}function vd(a,b,d){var f=b.F,m=b.G,r=b.H;b=b.T;var n=d.F,g=d.G,l=d.H;d=d.T;a.F=f*d+b*n+m*l-r*g;a.G=m*d+b*g+r*n-f*l;a.H=r*d+b*l+f*g-m*n;a.T=b*d-f*n-m*g-r*l;return a}function hc(a,b){this.x=a||0;this.y=b||0}function Ya(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function wd(a,b){var d=a.x,f=a.y,m=a.z;a.x=f*b.z-m*b.y;a.y=m*b.x-d*b.z;a.z=d*b.y-f*b.x}function ic(a,b,d,f){this.F=
a||0;this.G=b||0;this.H=d||0;this.Wa=f||ic.tk}function Uc(a,b){this.min=void 0!==a?a:new Ya(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Ya(-Infinity,-Infinity,-Infinity)}function Jc(a){return(new Ya).jd(a.min,a.max).Ha(.5)}function Yd(a,b){a.min.min(b);a.max.max(b)}function jc(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function xd(a,b,d){var f=b.elements,
m=d.elements;d=a.elements;b=f[0];var r=f[4],n=f[8],g=f[12],l=f[1],q=f[5],w=f[9],H=f[13],t=f[2],x=f[6],A=f[10],k=f[14],h=f[3],E=f[7],L=f[11];f=f[15];var B=m[0],D=m[4],e=m[8],p=m[12],z=m[1],P=m[5],G=m[9],U=m[13],N=m[2],u=m[6],y=m[10],I=m[14],O=m[3],T=m[7],ba=m[11];m=m[15];d[0]=b*B+r*z+n*N+g*O;d[4]=b*D+r*P+n*u+g*T;d[8]=b*e+r*G+n*y+g*ba;d[12]=b*p+r*U+n*I+g*m;d[1]=l*B+q*z+w*N+H*O;d[5]=l*D+q*P+w*u+H*T;d[9]=l*e+q*G+w*y+H*ba;d[13]=l*p+q*U+w*I+H*m;d[2]=t*B+x*z+A*N+k*O;d[6]=t*D+x*P+A*u+k*T;d[10]=t*e+x*G+A*
y+k*ba;d[14]=t*p+x*U+A*I+k*m;d[3]=h*B+E*z+L*N+f*O;d[7]=h*D+E*P+L*u+f*T;d[11]=h*e+E*G+L*y+f*ba;d[15]=h*p+E*U+L*I+f*m;return a}function Vc(a,b,d,f,m,r){this.a=a;this.b=b;this.c=d;this.Ia=f instanceof Ya?f:new Ya;this.Ge=Array.isArray(f)?f:[];this.color=m instanceof gc?m:new gc;this.gh=Array.isArray(m)?m:[];this.cc=void 0!==r?r:0}function Zd(a,b,d){var f=new XMLHttpRequest;f.open("GET",a,!0);var m=f.withCredentials=!1;f.onreadystatechange=function(){404!==f.status||m||(m=!0,d&&d(404));if(4===f.readyState&&
200===f.status){var r=null;try{r=JSON.parse(f.responseText)}catch(n){d&&d(-1)}b&&r&&b(r)}};f.onerror=function(){d&&d(0)};f.send()}function Wc(a,b,d){"object"===typeof a?b(a):Zd(a,b,d)}function $d(a){return new Promise(function(b,d){Wc(a,b,d)})}function ae(a,b){for(var d=new Ya,f=new Ya,m=0,r=b.length;m<r;m++){var n=b[m],g=a[n.a],l=a[n.b],q=a[n.c];g&&l&&q&&(d.kb(q,l),f.kb(g,l),wd(d,f),0!==d.Rf()&&(d.normalize(),n.Ia.N(d)))}}function be(a,b){for(var d=Array(a.length),f=0,m=a.length;f<m;++f)d[f]=new Ya;
f=new Ya;m=new Ya;for(var r=0,n=b.length;r<n;++r){var g=b[r],l=a[g.a],q=a[g.b],w=a[g.c];l&&q&&w&&(f.kb(w,q),m.kb(l,q),wd(f,m),d[g.a].add(f),d[g.b].add(f),d[g.c].add(f))}f=0;for(a=a.length;f<a;++f)d[f].normalize();a=0;for(f=b.length;a<f;++a)g=b[a],m=g.Ge,r=d[g.a],n=d[g.b],g=d[g.c],r&&n&&g&&(3===m.length?(m[0].N(r),m[1].N(n),m[2].N(g)):(m[0]=r.clone(),m[1]=n.clone(),m[2]=g.clone()));return d}function ce(a,b,d,f){function m(p){D.N(b[p]);e.N(D);var z=g[p];L.N(z);L.sub(D.Ha(D.wd(z))).normalize();var P=
e.x,G=e.y,U=e.z,N=z.x,u=z.y;z=z.z;B.x=G*z-U*u;B.y=U*N-P*z;B.z=P*u-G*N;P=0>B.wd(l[p])?-1:1;n[4*p]=L.x;n[4*p+1]=L.y;n[4*p+2]=L.z;n[4*p+3]=P}for(var r=a.length,n=new Float32Array(4*r),g=Array(r),l=Array(r),q=0;q<r;q++)g[q]=new Ya,l[q]=new Ya;var w=new Ya,H=new Ya,t=new Ya,x=new hc,A=new hc,k=new hc,h=new Ya,E=new Ya;f.forEach(function(p){var z=p.a,P=p.b;p=p.c;w.N(a[z]);H.N(a[P]);t.N(a[p]);x.N(d[z]);A.N(d[P]);k.N(d[p]);var G=H.x-w.x,U=t.x-w.x,N=H.y-w.y,u=t.y-w.y,y=H.z-w.z,I=t.z-w.z,O=A.x-x.x,T=k.x-x.x,
ba=A.y-x.y,fa=k.y-x.y,pa=1/(O*fa-T*ba);h.set((fa*G-ba*U)*pa,(fa*N-ba*u)*pa,(fa*y-ba*I)*pa);E.set((O*U-T*G)*pa,(O*u-T*N)*pa,(O*I-T*y)*pa);g[z].add(h);g[P].add(h);g[p].add(h);l[z].add(E);l[P].add(E);l[p].add(E)});var L=new Ya,B=new Ya,D=new Ya,e=new Ya;f.forEach(function(p){m(p.a);m(p.b);m(p.c)});return n}function yd(a,b,d,f){return Math.sqrt((a-d)*(a-d)+(b-f)*(b-f))}var Kd="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;
a[b]=d.value;return a},Tb=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}(this);Q("Promise",function(a){function b(n){this.Ba=0;this.Sa=void 0;this.ia=[];this.kh=!1;var g=this.Rc();try{n(g.resolve,g.reject)}catch(l){g.reject(l)}}function d(){this.ia=null}function f(n){return n instanceof b?
n:new b(function(g){g(n)})}if(a)return a;d.prototype.Ba=function(n){if(null==this.ia){this.ia=[];var g=this;this.Sa(function(){g.Uc()})}this.ia.push(n)};var m=Tb.setTimeout;d.prototype.Sa=function(n){m(n,0)};d.prototype.Uc=function(){for(;this.ia&&this.ia.length;){var n=this.ia;this.ia=[];for(var g=0;g<n.length;++g){var l=n[g];n[g]=null;try{l()}catch(q){this.Rc(q)}}}this.ia=null};d.prototype.Rc=function(n){this.Sa(function(){throw n;})};b.prototype.Rc=function(){function n(q){return function(w){l||
(l=!0,q.call(g,w))}}var g=this,l=!1;return{resolve:n(this.vk),reject:n(this.Uc)}};b.prototype.vk=function(n){if(n===this)this.Uc(new TypeError("A Promise cannot resolve to itself"));else if(n instanceof b)this.yk(n);else{a:switch(typeof n){case "object":var g=null!=n;break a;case "function":g=!0;break a;default:g=!1}g?this.uk(n):this.bk(n)}};b.prototype.uk=function(n){var g=void 0;try{g=n.then}catch(l){this.Uc(l);return}"function"==typeof g?this.zk(g,n):this.bk(n)};b.prototype.Uc=function(n){this.lh(2,
n)};b.prototype.bk=function(n){this.lh(1,n)};b.prototype.lh=function(n,g){if(0!=this.Ba)throw Error("Cannot settle("+n+", "+g+"): Promise already settled in state"+this.Ba);this.Ba=n;this.Sa=g;2===this.Ba&&this.xk();this.rk()};b.prototype.xk=function(){var n=this;m(function(){if(n.sk()){var g=Tb.console;"undefined"!==typeof g&&g.error(n.Sa)}},1)};b.prototype.sk=function(){if(this.kh)return!1;var n=Tb.CustomEvent,g=Tb.Event,l=Tb.dispatchEvent;if("undefined"===typeof l)return!0;"function"===typeof n?
n=new n("unhandledrejection",{cancelable:!0}):"function"===typeof g?n=new g("unhandledrejection",{cancelable:!0}):(n=Tb.document.createEvent("CustomEvent"),n.initCustomEvent("unhandledrejection",!1,!0,n));n.promise=this;n.reason=this.Sa;return l(n)};b.prototype.rk=function(){if(null!=this.ia){for(var n=0;n<this.ia.length;++n)r.Ba(this.ia[n]);this.ia=null}};var r=new d;b.prototype.yk=function(n){var g=this.Rc();n.qd(g.resolve,g.reject)};b.prototype.zk=function(n,g){var l=this.Rc();try{n.call(g,l.resolve,
l.reject)}catch(q){l.reject(q)}};b.prototype.then=function(n,g){function l(t,x){return"function"==typeof t?function(A){try{q(t(A))}catch(k){w(k)}}:x}var q,w,H=new b(function(t,x){q=t;w=x});this.qd(l(n,q),l(g,w));return H};b.prototype.catch=function(n){return this.then(void 0,n)};b.prototype.qd=function(n,g){function l(){switch(q.Ba){case 1:n(q.Sa);break;case 2:g(q.Sa);break;default:throw Error("Unexpected state: "+q.Ba);}}var q=this;null==this.ia?r.Ba(l):this.ia.push(l);this.kh=!0};b.resolve=f;b.reject=
function(n){return new b(function(g,l){l(n)})};b.race=function(n){return new b(function(g,l){for(var q=sa(n),w=q.next();!w.done;w=q.next())f(w.value).qd(g,l)})};b.all=function(n){var g=sa(n),l=g.next();return l.done?f([]):new b(function(q,w){function H(A){return function(k){t[A]=k;x--;0==x&&q(t)}}var t=[],x=0;do t.push(void 0),x++,f(l.value).qd(H(t.length-1),w),l=g.next();while(!l.done)})};return b});Q("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});var de="function"==
typeof Object.assign?Object.assign:function(a,b){for(var d=1;d<arguments.length;d++){var f=arguments[d];if(f)for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(a[m]=f[m])}return a};Q("Object.assign",function(a){return a||de});Q("Array.prototype.find",function(a){return a?a:function(b,d){return Da(this,b,d).lk}});Q("Object.is",function(a){return a?a:function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d}});Q("Array.prototype.includes",function(a){return a?a:function(b,d){var f=this;f instanceof
String&&(f=String(f));var m=f.length;d=d||0;for(0>d&&(d=Math.max(d+m,0));d<m;d++){var r=f[d];if(r===b||Object.is(r,b))return!0}return!1}});Q("String.prototype.includes",function(a){return a?a:function(b,d){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(b,d||0)}});Q("Array.prototype.findIndex",
function(a){return a?a:function(b,d){return Da(this,b,d).wi}});Q("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(d){return Promise.resolve(b()).then(function(){return d})},function(d){return Promise.resolve(b()).then(function(){throw d;})})}});Q("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});var W={Hh:!0,bq:!1,cq:!1,Dl:!1,Gh:!1,aq:!1,Ta:!1,Od:!1,Pq:!1,ea:"",Vi:"",al:700,$k:200,Ih:!1,qp:!1,rp:!1,pp:!1,Ik:3,Sb:!1,
sh:!0,Pb:"images/backgrounds/interior2.jpg",zc:"images/backgrounds/interior_light.jpg",cl:[256,256,512,512],yc:2.1,Ac:8,bl:[64,128,256,256],Vm:[60,96,160,250],Um:[8,12,18,40],Wc:2.2,qg:1,Ue:300,xh:500,Ve:50,ml:0,nl:0,Rp:45,Tp:1,Sp:1E3,yh:20,Hp:10,Jp:10,Kp:5,Pn:.1,cj:20,fj:100,gj:100,On:-Math.PI/3,Nn:Math.PI/3,ej:0,Xj:0,Ad:[40,32,16,16],Gk:[0,.87,.92,.9],Kn:2,En:100,ga_:!1,Jk:16,Kk:.4,Mk:[.72,.73,.72,.74],Wk:1.2,Tk:[.5,.5,.5,1],Yk:140,Xk:280,Zk:1.2,Nk:20,Ok:40,Vk:[6,9,9,12],Sk:[.03,.02,.02,.018],Rk:[.35,
.35,.4,.5],Pk:[.2,.2,.2,.2],Lk:[.1,.15,.15,.15],Uk:[200,200,150,120],Qk:[1,2,3,5],Xo:1.1,ir:[.25,.5,1,2],jr:256,hr:256,gr:200,Yo:[40,80,200,500],Zo:[35,45,80,120],yl:!0,zl:"CCW"},zd={},aa=function(){function a(y,I,O){I=y.createShader(I);y.shaderSource(I,O);y.compileShader(I);return y.getShaderParameter(I,y.COMPILE_STATUS)?I:null}function b(y,I,O){I=a(y,y.VERTEX_SHADER,I);O=a(y,y.FRAGMENT_SHADER,O);y===c&&g.push(I,O);var T=y.createProgram();y.attachShader(T,I);y.attachShader(T,O);y.linkProgram(T);
return T}function d(y){return["float","sampler2D","int"].map(function(I){return"precision "+y+" "+I+";\n"}).join("")}function f(y,I){I.R=I.R?!0:!1;if(!I.R){I.v=I.v||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";I.K=I.K||["a0"];I.S=I.S||[2];I.precision=I.precision||t;I.id=w++;void 0!==I.uj&&(I.uj.forEach(function(ba,fa){I.g=I.g.replace(ba,I.Ka[fa])}),I.uj.splice(0));I.hh=0;I.S.forEach(function(ba){I.hh+=4*ba});var O=d(I.precision);
I.ra=b(y,O+I.v,O+I.g);I.B={};I.i.forEach(function(ba){I.B[ba]=y.getUniformLocation(I.ra,ba)});I.attributes={};I.ya=[];I.K.forEach(function(ba){var fa=y.getAttribLocation(I.ra,ba);I.attributes[ba]=fa;I.ya.push(fa)});if(I.o){y.useProgram(I.ra);q=I;l=I.id;for(var T in I.o)y.uniform1i(I.B[T],I.o[T])}I.Qa=!0}}function m(y){Db.Lj(u);l!==y.id&&(u.M(),l=y.id,q=y,c.useProgram(y.ra),y.ya.forEach(function(I){0!==I&&c.enableVertexAttribArray(I)}))}function r(y,I,O){f(y,I,O);y.useProgram(I.ra);y.enableVertexAttribArray(I.attributes.a0);
l=-1;return q=I}function n(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],o:{u1:0}}}var g=[],l=-1,q=null,w=0,H=!1,t="highp",x=["u1"],A=["u0"],k={u1:0},h={u0:0},E={u1:0,u2:1},L={u1:0,u3:1},B=["u1","u3","u4"],D=["u5","u6"],e={u5:0},p=["u7","u8","u9","u10"],z={u7:0,u8:1},P={s0:n(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:x,o:k,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
i:["u1","u2"],o:E},s3:{g:"uniform sampler2D u1;uniform vec2 u11,u12;varying vec2 vv0;void main(){vec2 a=vv0*u11+u12;gl_FragColor=texture2D(u1,a);}",i:["u1","u11","u12"],o:k,R:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:x,o:k},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],o:E},
s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:x,o:k},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:x,o:k},s8:{g:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u11;}",i:["u0","u11"],o:h},s9:{g:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u11,f);gl_FragColor=b*g;}",
i:["u0","u11"],o:h},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:x,o:k},s11:{g:"uniform sampler2D u1,u13;uniform float u14;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u13,vv0);gl_FragColor=mix(b,a,u14*f);}",i:["u1","u13","u14"],o:{u1:0,u13:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u15)+texture2D(u1,vv0+u15*vec2(1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,1.)));}",
i:["u1","u15"],o:k},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",i:x,o:k,R:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:x,o:k,R:!0},
s15:{g:"uniform sampler2D u1;uniform vec4 u16;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u16);gl_FragColor=j(a);}",
i:["u1","u16"],o:k},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:A,o:h,R:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:A,o:h,R:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:A,o:h,R:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:A,o:h,R:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:A,o:h},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:A,o:h},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:A,o:h,R:!0},s23:{g:"uniform sampler2D u0,u17;uniform float u18;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u17,e);float b=u18*u18;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u17","u18"],o:{u0:0,u17:1},R:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u19;varying vec2 vv0;void main(){float a=u19.x*u19.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u19.y),f=floor(u19.x*fract(b*u19.y)),g=(f*u19.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u19"],o:k},s25:{g:"uniform sampler2D u8,u7,u20;varying vec2 vv0;void main(){vec4 a=texture2D(u20,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u8,b),f=texture2D(u7,c);gl_FragColor=d*f;}",i:["u8","u7","u20"],o:Object.assign({u20:2},z),R:!0},s26:{g:"uniform float u9,u10;uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec2 b=fract(vv0*u9);float a=u9*u10;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u8,c),f=texture2D(u7,b);gl_FragColor=d*f;}",i:p,o:z},s27:{g:"uniform float u9,u10;uniform vec2 u21;uniform sampler2D u8,u7;varying vec2 vv0;void main(){float a=u9*u10;vec2 b=mod(vv0*u21,vec2(1.)),c=floor(vv0*u21)/u21,d=c+fract(b*u9)/u21,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u8,f),h=texture2D(u7,d);gl_FragColor=g*h;}",
i:["u21"].concat(p),o:z,R:!0},s28:{g:"uniform float u9,u10;uniform sampler2D u8,u7,u23,u24,u25,u26;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u9),d=vv0;float h=u9*u10;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u8,d),m=texture2D(u7,c),a=texture2D(u26,d);a=floor(.5+a*255.);vec4 n=texture2D(u23,c),o=texture2D(u24,c),p=texture2D(u25,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u26","u23","u24","u25"].concat(p),o:Object.assign({u26:3,u23:4,u24:5,u25:6},z),R:!0},s29:{g:"uniform sampler2D u8,u7,u3;uniform float u9,u27,u28,u10;uniform vec2 u29;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u27*vv0),d=u27*vv0-c;float g=u9/u27;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u27;float m=u27*u10/u9;vec2 b=m*h,n=floor(.5*(u10-1.)*(f-u29));b=floor(u29*b+n);vec2 a=(b+i*u28)/u10;a+=.25/u10;vec2 k=step(a,f)*step(l,a);vec4 o=texture2D(u8,j),p=texture2D(u7,a),q=o*p,r=texture2D(u3,j);gl_FragColor=(q*u28*u28+r)*k.x*k.y;}",
i:["u27","u28","u3","u29"].concat(p),o:Object.assign({u3:2},z)},s30:{g:"uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec4 a=texture2D(u8,vv0),b=texture2D(u7,vv0);gl_FragColor=a*b;}",i:["u8","u7"],o:z,R:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:B,o:L},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);}",
i:["u21"].concat(B),o:L,R:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:B,o:L,R:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u21"].concat(B),o:L,R:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:B,o:L,R:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:x,o:k,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u30"],o:k,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u30"],o:k,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 f=vec4(1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u31))*2.,b-=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,b+=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u31))*2.,b+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u31"],o:E,R:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u31,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u31"],o:E,R:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 f=vec2(1.),g=vec2(.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=f/u6,c=u6/2.,d=floor(vv0*c)+g,j=d/c,b=j-a*.5;vec4 k=texture2D(u5,b),l=texture2D(u5,b+a*h),m=texture2D(u5,b+a*i),n=texture2D(u5,b+a),o=max(k,l),p=max(m,n);gl_FragColor=max(o,p);}",
i:D,o:e,R:!0},s42:{g:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 k=vec2(1.),l=vec2(1.,0.),m=vec2(0.,1.),n=vec2(2.,0.),o=vec2(0.,2.);vec4 e(vec2 b,vec2 a){vec4 c=texture2D(u5,a),d=texture2D(u5,a+b*l),f=texture2D(u5,a+b*m),g=texture2D(u5,a+b),h=max(c,d),i=max(f,g);return max(h,i);}void main(){vec2 a=k/u6,c=u6/4.,d=4.*floor(vv0*c),f=d/u6,b=f+a*.5;vec4 g=e(a,b),h=e(a,b+a*n),i=e(a,b+a*2.),p=e(a,b+a*o),q=max(g,h),r=max(i,p);gl_FragColor=max(q,r);}",i:D,o:e,R:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
i:["u1"],o:k,precision:"lowp",R:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u15)+2002./e*texture2D(u1,vv0-2.*u15)+3003./e*texture2D(u1,vv0-u15)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u15)+2002./e*texture2D(u1,vv0+2.*u15)+1001./e*texture2D(u1,vv0+3.*u15);gl_FragColor=a;}",i:["u15","u1"],o:k,precision:"lowp",R:!0},s45:{g:"uniform sampler2D u1,u17,u32;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u32,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
i:["u1","u17","u32"],o:{u1:0,u17:1,u32:2},R:!0}},G={s46:{g:"uniform float u9,u33;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u9+eps2);float weightSize=toSparsity*u9;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u33*(xyPatch-halfFromSparsity))/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u9","u8","u7","u3","u33"],Ka:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u9,u33,u10;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u10,xyTo=floor(vv0*u9+eps2);float weightSize=fromSparsity*u10;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u9;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u33*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u10,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u9 u10 u8 u7 u3 u33".split(" "),Ka:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},U=null,N=null,u={Db:function(){return H},m:function(){if(!H){U=mb(P,2);N=mb(G,2);t="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var y in U)f(c,U[y],y);aa.set("s0");c.enableVertexAttribArray(0);H=!0}},xc:function(y){y.forEach(function(I){u.pa(I)})},pa:function(y){U[y.id]=y;f(c,y,y.id)},Sm:function(y,
I,O){I||(I=y);U[I]=Object.create(N[y]);U[I].an=!0;N[y].Ka&&N[y].Ka.forEach(function(T,ba){var fa="";"gl_Frag"===T.substring(0,7)?(T=new RegExp("[,;]?"+T,"g"),fa=";"):T=new RegExp(T,"g");U[I].g=U[I].g.replace(T,fa+O[ba])});f(c,U[I],I)},set:function(y){var I=U[y];I.R&&(I.R=!1,f(c,I,y));m(I)},Ib:function(y){return r(y,n(),"s48")},oe:function(y){return r(y,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:t},"s49")},$l:function(y){return"undefined"===typeof U[y]?!1:U[y].Qa},M:function(){-1!==
l&&(l=-1,q.ya.forEach(function(y){0!==y&&c.disableVertexAttribArray(y)}))},re:function(){var y=0;q.ya.forEach(function(I,O){O=q.S[O];c.vertexAttribPointer(I,O,c.FLOAT,!1,q.hh,y);y+=4*O})},Yl:function(){c.enableVertexAttribArray(0)},jc:function(){u.kc(c)},kc:function(y){y.vertexAttribPointer(q.ya[0],2,y.FLOAT,!1,8,0)},pe:function(y,I){c.uniform1i(q.B[y],I)},D:function(y,I){c.uniform1f(q.B[y],I)},O:function(y,I,O){c.uniform2f(q.B[y],I,O)},Ig:function(y,I){c.uniform2fv(q.B[y],I)},Jg:function(y,I){c.uniform3fv(q.B[y],
I)},qe:function(y,I,O,T){c.uniform3f(q.B[y],I,O,T)},Qo:function(y,I,O,T,ba){c.uniform4f(q.B[y],I,O,T,ba)},Da:function(y,I){c.uniform4fv(q.B[y],I)},Ro:function(y,I){c.uniformMatrix2fv(q.B[y],!1,I)},So:function(y,I){c.uniformMatrix3fv(q.B[y],!1,I)},$c:function(y,I){c.uniformMatrix4fv(q.B[y],!1,I)},j:function(y,I){u.set(y);I.forEach(function(O){switch(O.type){case "4f":c.uniform4fv(q.B[O.name],O.value);break;case "3f":c.uniform3fv(q.B[O.name],O.value);break;case "2f":c.uniform2fv(q.B[O.name],O.value);
break;case "1f":c.uniform1f(q.B[O.name],O.value);break;case "1i":c.uniform1i(q.B[O.name],O.value);break;case "mat2":c.uniformMatrix2fv(q.B[O.name],!1,O.value);break;case "mat3":c.uniformMatrix3fv(q.B[O.name],!1,O.value);break;case "mat4":c.uniformMatrix4fv(q.B[O.name],!1,O.value)}})},rq:function(){return"lowp"},A:function(){u.M();c.disableVertexAttribArray(0);for(var y in U){var I=U[y];I.Qa&&(I.Qa=!1,c.deleteProgram(I.ra));I.an&&delete U[y]}g.forEach(function(O){c.deleteShader(O)});g.splice(0);w=
0;H=!1;q=null;l=-1}};return u}(),c=null,ob=function(){function a(x){console.log("ERROR in ContextFF: ",x);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(x,A,k){x.setAttribute("width",A);x.setAttribute("height",k)}function f(x){if(b())return!1;var A=document.createElement("canvas");d(A,5,5);var k=null;try{k=A.getContext("webgl2",x)}catch(h){return!1}if(!k)return!1;m(k);Ka.Uh(k);x=Ka.ff(k);if(!x.$a&&!x.bb)return Jb.A(),Ka.reset(),!1;k=Jb.zh(k,
x);Jb.A();Ka.reset();return k?!0:!1}function m(x){x.clearColor(0,0,0,0);x.disable(x.DEPTH_TEST);x.disable(x.BLEND);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.disable(x.CULL_FACE);x.GENERATE_MIPMAP_HINT&&x.FASTEST&&x.hint(x.GENERATE_MIPMAP_HINT,x.FASTEST);x.disable(x.SAMPLE_ALPHA_TO_COVERAGE);x.disable(x.SAMPLE_COVERAGE);x.depthFunc(x.LEQUAL);x.clearDepth(1)}var r=null,n=null,g=null,l=!0,q=null,w=null,H=[],t={P:function(){return r.width},aa:function(){return r.height},xb:function(){return r},
fm:function(){return c},oa:function(){return l},flush:function(){c.flush()},zq:function(){Ea.reset();Ea.ca();t.jo()},jo:function(){ca.reset();Y.reset();aa.M();aa.Yl();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);Y.pd();aa.jc()},km:function(){q||(q=new Uint8Array(r.width*r.height*4));c.readPixels(0,0,r.width,r.height,c.RGBA,c.UNSIGNED_BYTE,q);return q},nq:function(){return r.toDataURL("image/jpeg")},oq:function(){Ea.ba();n||(n=document.createElement("canvas"),g=n.getContext("2d"));d(n,r.width,r.height);
for(var x=t.km(),A=g.createImageData(n.width,n.height),k=n.width,h=n.height,E=A.data,L=0;L<h;++L)for(var B=h-L-1,D=0;D<k;++D){var e=4*(L*k+D),p=4*(B*k+D);E[e]=x[p];E[e+1]=x[p+1];E[e+2]=x[p+2];E[e+3]=x[p+3]}g.putImageData(A,0,0);return n.toDataURL("image/png")},gi:function(x){!n&&x&&(n=document.createElement("canvas"),g=n.getContext("2d"));var A=x?n:document.createElement("canvas");d(A,r.width,r.height);(x?g:A.getContext("2d")).drawImage(r,0,0);return A},m:function(x){x=Object.assign({ab:null,kg:null,
ta:null,af:null,width:512,height:512,premultipliedAlpha:!1,Ym:!0,antialias:!1,debug:!1,$p:!1},x);x.ab?(c=x.ab,r=x.ab.canvas):x.af&&!x.ta?r=document.getElementById(x.af):x.ta&&(r=x.ta);r||(r=document.createElement("canvas"));r.width=x.width;r.height=x.height;if(c)l=c instanceof WebGL2RenderingContext;else{l=!0;var A={antialias:x.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:x.premultipliedAlpha,stencil:!1,depth:x.Ym,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};
navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(A.antialias=!1);var k=f(A);k||!A.antialias||b()||(A.antialias=!1,k=f(A));k&&(c=r.getContext("webgl2",A));c?l=!0:((c=r.getContext("webgl",A))||(c=r.getContext("experimental-webgl",A)),l=!1)}if(!c)return a("WebGL1 and 2 are not enabled");x.kg&&r.addEventListener&&(w=x.kg,r.addEventListener("webglcontextlost",w,!1));if(!Ka.m())return a("Not enough GL capabilities");m(c);aa.m();Y.m();Jb.zh(c,Ka.hm());H.forEach(function(h){h(c)});
H.splice(0);return!0},Qp:function(){return new Promise(function(x){c?x(c):H.push(x)})},A:function(){c&&(Ka.A(),aa.A(),Jb.A());w&&(r.removeEventListener("webglcontextlost",w,!1),w=null);c=q=g=n=r=null;H.splice(0)}};return t}(),Db=function(){function a(){null===b&&("undefined"!==typeof aa?b=aa:"undefined"!==typeof C&&(b=C))}var b=null;return{reset:function(){b=null},Lj:function(d){b!==d&&(b&&b.M(),b=d)},Db:function(){return b.Db()},jc:function(){return b.jc()},kc:function(d){return b.kc(d)},re:function(){return b.re()},
M:function(){return b.M()},set:function(d){a();return b.set(d)},Ib:function(d){a();return b.Ib(d)},oe:function(d){a();return b.oe(d)}}}(),ca=function(){function a(u){c.bindTexture(c.TEXTURE_2D,u)}function b(){return r?c.NO_ERROR:c.getError()}function d(u){var y=new Uint16Array(u.length);u.forEach(function(I,O){P[0]=I;var T=G[0];I=T>>16&32768;var ba=T>>12&2047,fa=T>>23&255;T=103>fa?I:142<fa?I|31744|((255==fa?0:1)&&T&8388607):113>fa?(ba|=2048,I|(ba>>114-fa)+(ba>>113-fa&1)):(I|fa-112<<10|ba>>1)+(ba&
1);y[O]=T});return y}function f(){if(null!==U.Hf)return U.Hf;var u=m(d([.5,.5,.5,.5]),!0);return null===u?!0:U.Hf=u}function m(u,y){if(!Db.Db()||!k)return null;var I=null,O=Math.sqrt(u.length/4);try{var T=c.getError();if("FUCKING_BIG_ERROR"===T)return!1;I=N.instance({isFloat:!1,U:y,array:u,width:O});T=c.getError();if(T!==c.NO_ERROR)return!1}catch(ba){return!1}Ea.ba();c.viewport(0,0,O,O);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);Db.set("s0");I.za(0);Y.l(!0,!0);u=4*O*O;y=new Uint8Array(u);c.readPixels(0,
0,O,O,c.RGBA,c.UNSIGNED_BYTE,y);O=!0;for(T=0;T<u;++T)O=O&&3>Math.abs(y[T]-127);I.remove();Ea.ca();return O}var r=!1,n=0,g=null,l=0,q=null,w=null,H=null,t=null,x=null,A=null,k=!1,h=[],E={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,Gi:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ma:null,si:null,$m:!1,U:!1,C:null,L:4,bg:0},L=!1,B=null,D=null,e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,z=!1,P=new Float32Array(1),
G=new Int32Array(P.buffer),U={Hf:null,If:null},N={m:function(){k||(x=[c.RGBA,null,c.RGBA,c.RGBA],A=[c.RGBA,null,c.RGBA,c.RGBA],g=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],p="undefined"!==typeof ja,z="undefined"!==typeof Ka,q=[-1,-1,-1,-1,-1,-1,-1,-1],t=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],k=!0)},Go:function(){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)},Jo:function(){c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST)},Qm:function(){if(!w){for(var u=new Float32Array(16384),y=0;16384>y;++y)u[y]=2*Math.random()-1;w={random:N.instance({isFloat:!0,isPot:!0,array:u,width:64}),ak:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.np()},Gj:function(u){c.framebufferTexture2D(Ea.xf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,u,0)},ri:function(){return w.ak},np:function(){t[1]=Ka.wf(c)},Lo:function(){A=x=[c.RGBA,
c.RGBA,c.RGBA,c.RGBA]},oj:function(u){aa.set("s1");Ea.ba();var y=u.P(),I=u.aa();c.viewport(0,0,y,I);u.h(0);Y.l(!1,!1)},Rq:function(u,y){N.oj(u);c.readPixels(0,0,u.P(),u.aa(),c.RGBA,c.UNSIGNED_BYTE,y)},Sq:function(u,y){N.oj(u);return Ka.vg(0,0,u.P(),u.aa(),y)},ai:function(u,y,I,O,T,ba,fa){u.activeTexture(u.TEXTURE0);var pa=u.createTexture();u.bindTexture(u.TEXTURE_2D,pa);T=T instanceof Float32Array?T:new Float32Array(T);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE);u.texParameteri(u.TEXTURE_2D,
u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST);u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,ba);u.texImage2D(u.TEXTURE_2D,0,u.RGBA,I,O,0,u.RGBA,u.FLOAT,T);u.bindTexture(u.TEXTURE_2D,null);u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!1);fa&&(Ea.ca(),aa.Ib(u));u.viewport(0,0,I,O);u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,y,0);u.bindTexture(u.TEXTURE_2D,pa);fa?Y.l(!0,!0):Y.Ub(u);u.deleteTexture(pa);
k&&(q[0]=-1,H=null,n=0)},Me:function(u){u!==n&&(c.activeTexture(g[u]),n=u)},er:function(u){r=u},instance:function(u){function y(){la=void 0!==V.ma.videoWidth?V.ma.videoWidth:V.ma.width;R=void 0!==V.ma.videoHeight?V.ma.videoHeight:V.ma.height}function I(ia){var Aa=b();if("FUCKING_BIG_ERROR"===Aa)return!1;c.texImage2D(c.TEXTURE_2D,0,fb,Ma,va,ia);Aa=b();Aa!==c.NO_ERROR&&Ma!==c.RGBA&&(Ma=c.RGBA,c.texImage2D(c.TEXTURE_2D,0,fb,Ma,va,ia));return!0}function O(){if(!xa){a(qa);ya&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,
ya);V.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,V.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,V.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));V.isAnisotropicFiltering&&"undefined"!==typeof W&&c.texParameterf(c.TEXTURE_2D,ja.lm().TEXTURE_MAX_ANISOTROPY_EXT,W.Ik);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,V.isLinear?c.LINEAR:
c.NEAREST);var ia=V.isMipmap&&!xb;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,V.Gi?c.LINEAR_MIPMAP_LINEAR:V.isLinear?ia?c.NEAREST_MIPMAP_LINEAR:c.LINEAR:ia?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);Ma=x[V.L-1];fb=A[V.L-1];va=t[v];Ka.oa()&&(ia=Ka.nm(),Ma===c.RGBA&&va===c.FLOAT?V.isMipmap||V.isLinear?fb=Jb.pm(c):Ka.ka()?ia&&(fb=ia):fb=c.RGBA16F||c.RGBA:Ma===c.RGB&&va===c.FLOAT&&ia&&(fb=ia,Ma=c.RGBA));if(V.U&&!V.isFloat||V.isFloat&&V.isMipmap&&Jb.kn())fb=Ka.om(),va=Ka.wf(c);V.bg&&(nb=V.bg);V.isSrgb&&
4===V.L&&(Ma=ja.Im());if(V.ma)I(V.ma);else if(V.url)I(Qa);else if(Ia){ia=Ia;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,ia),b()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,null),b()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,la,R,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(Wb){c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,null)}V.isKeepArray||(Ia=null)}else ia=b(),"FUCKING_BIG_ERROR"!==ia&&(c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,null),ia=
b(),ia!==c.NO_ERROR&&(Ma=c.RGBA,V.U&&va!==c.FLOAT&&(va=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,null))));if(V.isMipmap)if(!xb&&Xa)Xa.Hc(),Zb=!0;else if(xb){ia=Math.log2(Math.min(la,R));Wa=Array(1+ia);Wa[0]=qa;for(var Aa=1;Aa<=ia;++Aa){var ib=Math.pow(2,Aa),Na=la/ib;ib=R/ib;var wb=c.createTexture();a(wb);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,fb,Na,ib,0,Ma,va,null);a(null);Wa[Aa]=
wb}Zb=!0}a(null);q[n]=-1;ya&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);ka=!0;V.C&&Xa&&(V.C(Xa),V.C=null)}}function T(){for(var ia=la*R,Aa=2*ia,ib=3*ia,Na=0;Na<ia;++Na)$a[0][Na]=Pb[Na],$a[1][Na]=Pb[Na+ia],$a[2][Na]=Pb[Na+Aa],$a[3][Na]=Pb[Na+ib]}function ba(){var ia=la*R*4;Ra=[new Uint8Array(ia),new Uint8Array(ia),new Uint8Array(ia),new Uint8Array(ia)];$a=[new Float32Array(Ra[0].buffer),new Float32Array(Ra[1].buffer),new Float32Array(Ra[2].buffer),new Float32Array(Ra[3].buffer)];Ha=new Uint8Array(4*ia);
Pb=new Float32Array(Ha.buffer);bb=!0}function fa(){pa=new Uint8Array(la*R*4);vc=new Float32Array(pa.buffer);fc=!0}var pa,V=Object.assign({},E,u),F=l++;null===V.isFlipY&&(V.isFlipY=V.url?!0:!1);V.data&&(V.array="string"===typeof V.data?pc(V.data):V.isFloat?new Float32Array(V.data):new Uint8Array(V.data),V.isFlipY=!1);var v=0,M=V.ma?!0:!1,da=null,ta=null,ra=!1;V.U=V.U||V.isFloat;V.U&&(v=1);!V.$m&&V.isFloat&&z&&!Ka.ka()&&(V.isFloat=!1);V.isFloat&&(v=2);V.isAnisotropicFiltering&&p&&!ja.hn()&&(V.isAnisotropicFiltering=
!1);var qa=V.si||c.createTexture(),Qa=null,Ia=!1,la=0,R=0,ka=!1,xa=!1,bb=!1,$a=null,Ra=null,Ha=null,Pb=null,fb=null,Ma=null,va=null,ya=V.isFlipY,Bb=(u=V.U&&V.isMipmap)&&Jb.pl(),xb=u&&!Bb?!0:!1,Wa=null,nb=-1,uc=-1,Zb=!1,fc=!1,vc=pa=null;V.width&&(la=V.width,R=V.height?V.height:la);var Xa={get:function(){return qa},P:function(){return la},aa:function(){return R},Jm:function(){return V.url},jn:function(){return V.isFloat},Fq:function(){return V.U},dr:function(ia){qa=ia},Hq:function(){return V.isLinear},
Hc:function(){c.generateMipmap(c.TEXTURE_2D)},hl:function(ia,Aa){xb?(ia||(ia=Xa.ni()),N.Me(Aa),a(Wa[ia]),q[Aa]=-1):Xa.h(Aa)},ni:function(){-1===nb&&(nb=Math.log2(la));return nb},Ij:function(ia){c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,ia)},em:function(ia){ia||(ia=Xa.ni());if(xb){aa.set("s12");N.Me(0);for(var Aa=la,ib=R,Na=1;Na<=ia;++Na)Aa/=2,ib/=2,aa.O("u15",.25/Aa,.25/ib),c.viewport(0,0,Aa,ib),a(Wa[Na-1]),c.framebufferTexture2D(Ea.xf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,
Wa[Na],0),Y.l(!1,1===Na);q[0]=-1}else ia!==uc&&(uc=ia,Xa.Ij(ia)),Xa.Hc()},fr:function(ia){(M=!(Array.isArray(ia)||ia.constructor===Float32Array||ia.constructor===Uint8Array))?(Ia=null,V.ma=ia,y()):Ia=ia},h:function(ia){if(!ka)return!1;N.Me(ia);if(q[ia]===F)return!1;a(qa);q[ia]=F;return!0},za:function(ia){c.activeTexture(g[ia]);n=ia;a(qa);q[ia]=F},u:function(){H=Xa;N.Gj(qa)},J:function(){c.viewport(0,0,la,R);H=Xa;N.Gj(qa)},ze:N.ze,Do:function(ia,Aa){la=ia;R=Aa},resize:function(ia,Aa){Xa.Do(ia,Aa);
O()},clone:function(ia){ia=N.instance({width:la,height:R,U:V.U,isFloat:V.isFloat,isLinear:V.isLinear,isMirrorY:V.isMirrorY,isFlipY:ia?!ya:ya,isPot:V.isPot});Db.set("s0");Ea.ca();ia.J();Xa.h(0);Y.l(!0,!0);return ia},ad:function(){c.viewport(0,0,la,R)},remove:function(){c.deleteTexture(qa);xa=!0;h.splice(h.indexOf(Xa),1);Xa=null},refresh:function(){Xa.za(0);ya&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);M?c.texImage2D(c.TEXTURE_2D,0,fb,Ma,va,V.ma):c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,Ia);ya&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,
!1)},mj:function(){bb||ba();c.readPixels(0,0,la,4*R,c.RGBA,c.UNSIGNED_BYTE,Ha);T();return $a},Yn:function(){bb||ba();return Ka.vg(0,0,la,4*R,Ha).then(function(){T();return $a})},$n:function(){fc||fa();c.readPixels(0,0,la,R,c.RGBA,c.UNSIGNED_BYTE,pa);return vc},Zn:function(){fc||fa();return Ka.vg(0,0,la,R,pa)},Nh:function(ia){Ea.ba();aa.set("s15");Xa.h(0);if(ia)c.viewport(0,0,la,R),aa.Qo("u16",.25,.25,.25,.25),Y.l(!1,!0);else for(ia=0;4>ia;++ia)c.viewport(0,R*ia,la,R),aa.Da("u16",e[ia]),Y.l(!1,0===
ia)},bh:function(ia){var Aa;if(Aa=va===t[0])null!==U.If?Aa=U.If:(Aa=m(new Uint8Array([127,127,127,127]),!1),Aa=null===Aa?!0:U.If=Aa),Aa=!Aa;a(qa);ya&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);Aa?(ra||(da=document.createElement("canvas"),da.width=la,da.height=R,ta=da.getContext("2d"),ta.createImageData(la,R),ra=!0),null.data.set(ia),ta.putImageData(null,0,0),c.texImage2D(c.TEXTURE_2D,0,fb,Ma,va,da)):c.texImage2D(c.TEXTURE_2D,0,fb,la,R,0,Ma,va,ia);q[n]=F;ya&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},ur:function(ia,
Aa){a(qa);Aa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,fb,Ma,va,ia);q[n]=F;Aa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},fc:function(ia,Aa){var ib=la*R,Na=4*ib;ia=V.U?ia?"RGBE":"JSON":"RGBA";Aa&&(ia=Aa);Aa=Ka.oa()&&!1;var wb=null;switch(ia){case "RGBE":wb="s13";break;case "JSON":wb=Aa?"s0":"s15";break;case "RGBA":case "RGBAARRAY":wb="s7"}bb||("RGBA"===ia||"RGBE"===ia||"RGBAARRAY"===ia?(Ra=new Uint8Array(Na),bb=!0):"JSON"!==ia||Aa||ba());Ea.ba();aa.set(wb);Xa.h(0);Na=null;
if("RGBA"===ia||"RGBE"===ia||"RGBAARRAY"===ia){c.viewport(0,0,la,R);Y.l(!0,!0);c.readPixels(0,0,la,R,c.RGBA,c.UNSIGNED_BYTE,Ra);if("RGBAARRAY"===ia)return{data:Ra};L||(B=document.createElement("canvas"),D=B.getContext("2d"),L=!0);B.width=la;B.height=R;ib=D.createImageData(la,R);ib.data.set(Ra);D.putImageData(ib,0,0);Na=B.toDataURL("image/png")}else if("JSON"===ia)if(Aa)Na=new Float32Array(ib),c.viewport(0,0,la,R),Y.l(!0,!0),c.readPixels(0,0,la,R,c.RGBA,c.FLOAT,Na);else{for(Na=0;4>Na;++Na)c.viewport(0,
R*Na,la,R),aa.Da("u16",e[Na]),Y.l(!Na,!Na);Xa.mj();Na=Array(ib);for(Aa=0;Aa<ib;++Aa)Na[4*Aa]=$a[0][Aa],Na[4*Aa+1]=$a[1][Aa],Na[4*Aa+2]=$a[2][Aa],Na[4*Aa+3]=$a[3][Aa]}return{format:ia,data:Na,width:la,height:R,isMirrorY:V.isMirrorY,isFlipY:"RGBA"===ia?V.isFlipY:!V.isFlipY}}};V.isMipmap&&!xb&&ka&&!Zb&&(Xa.Hc(),Zb=!0);if(V.url)a(qa),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),Qa=new Image,Qa.crossOrigin="anonymous",Qa.src=V.url,Qa.onload=function(){la=Qa.width;R=Qa.height;O()};
else if(V.ma){var wc=function(){y();la?O():setTimeout(wc,1)};wc()}else V.array?(V.U&&!V.isFloat?V.array instanceof Uint16Array?(Ia=V.array,O()):f()?(Ia=d(V.array),O()):(O(),N.ai(c,qa,Xa.P(),Xa.aa(),V.array,ya,!0)):(Ia=V.isFloat?V.array instanceof Float32Array?V.array:new Float32Array(V.array):V.array instanceof Uint8Array?V.array:new Uint8Array(V.array),O()),V.isKeepArray||(Ia&&Ia!==V.array&&(Ia=null),delete V.array)):V.si?ka=!0:O();Xa.vq=Xa.P;V.C&&ka&&(V.C(Xa),V.C=null);h.push(Xa);return Xa},ba:function(u){u!==
n&&(c.activeTexture(g[u]),n=u);q[u]=-1;a(null)},jl:function(u){w.random.h(u)},ze:function(){H=null;c.framebufferTexture2D(Ea.xf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==n&&c.activeTexture(g[0]);for(var u=0;u<g.length;++u)q[u]=-1;n=-1},Vq:function(){n=-1},dk:function(){for(var u=0;u<g.length;++u)N.ba(u)},I:function(){w&&(w.random.remove(),w.ak.remove())},dd:function(u,y){if("RGBA"===u.format||"RGBE"===u.format){var I=new Image;I.src=u.data;I.onload=function(){N.instance({isMirrorY:u.isMirrorY,
isFlipY:u.isFlipY,isFloat:!1,ma:I,C:function(O){if("RGBA"===u.format)y(O);else{var T=u.width,ba=u.height,fa=N.instance({isMirrorY:u.isMirrorY,isFloat:!0,width:T,height:ba,isFlipY:u.isFlipY});Ea.ca();c.viewport(0,0,T,ba);aa.set("s14");fa.u();O.h(0);Y.l(!0,!0);N.ba(0);y(fa);Ka.flush();O.remove()}}})}}else"JSON"===u.format?y(N.instance({isFloat:!0,isFlipY:u.isFlipY,width:u.width,height:u.height,array:new Float32Array(u.data)})):y(!1)},vl:d,A:function(){H&&(Ea.ca(),N.ze(),Ea.ba());N.dk();h.slice(0).forEach(function(u){u.remove()});
h.splice(0);k=!1;l=0;"undefined"!==typeof Jb&&Jb.A();w=null}};return N}(),Rc={instance:function(a){var b=[ca.instance(a),ca.instance(a)],d=[b[1],b[0]],f=d,m={Bj:function(r){f[1].u();f[0].h(r);m.Pj()},Cj:function(r){f[1].J();f[0].h(r);m.Pj()},Pj:function(){f=f===b?d:b},refresh:function(){f[0].refresh();f[1].refresh()},h:function(r){f[0].h(r)},za:function(r){f[0].za(r)},il:function(r){f[1].h(r)},ji:function(){return f[0]},tq:function(){return f[1]},bh:function(r){f[0].bh(r);f[1].bh(r)},remove:function(){f[0].remove();
f[1].remove();f=null},sync:function(){m.Cj(0);aa.set("s0");Y.l(!1,!1)}};return m}},Y=function(){function a(l){var q={la:null,indices:null};q.la=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,q.la);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);q.indices=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,q.indices);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),l.STATIC_DRAW);return q}var b=null,d=0,f=!1,m=[],r=-2,n=-2,g={reset:function(){n=r=-2},m:function(){f||
(b=a(c),g.pd(),f=!0)},instance:function(l){var q=d++,w=l.indices?l.indices.length:0,H="undefined"===typeof l.mode?c.STATIC_DRAW:l.mode,t=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,t);c.bufferData(c.ARRAY_BUFFER,l.la instanceof Float32Array?l.la:new Float32Array(l.la),H);r=q;var x=null,A=null,k=null;if(l.indices){x=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,x);var h=null;65536>l.indices.length?(h=Uint16Array,A=c.UNSIGNED_SHORT,k=2):(h=Uint32Array,A=c.UNSIGNED_INT,k=4);h=l.indices instanceof
h?l.indices:new h(l.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,H);n=q}var E={Bc:function(L){r!==q&&(c.bindBuffer(c.ARRAY_BUFFER,t),r=q);L&&Db.re()},fl:function(){n!==q&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,x),n=q)},bind:function(L){E.Bc(L);E.fl()},W:function(){c.drawElements(c.TRIANGLES,w,A,0)},Pa:function(L,B){c.drawElements(c.TRIANGLES,L,A,B*k)},remove:function(){c.deleteBuffer(t);l.indices&&c.deleteBuffer(x);E=null}};m.push(E);return E},pd:function(){-1!==r&&(c.bindBuffer(c.ARRAY_BUFFER,b.la),
r=-1);-1!==n&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),n=-1)},l:function(l,q){l&&Y.pd();q&&Db.jc();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ub:function(l){l=l||c;var q=a(l);l.bindBuffer(l.ARRAY_BUFFER,q.la);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,q.indices);Db.kc(l);l.clear(l.COLOR_BUFFER_BIT);l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();l.bindBuffer(l.ARRAY_BUFFER,null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(q.la);l.deleteBuffer(q.indices);g.reset();f&&
(g.pd(),Db.jc())},I:function(){var l=c,q=b;l.deleteBuffer(q.la);l.deleteBuffer(q.indices)},A:function(){g.I();m.forEach(function(l){l.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);g.reset();f=!1;m.splice(0);d=0}};return g}(),Ea=function(){var a=null,b=null,d=null,f=!1,m=[],r={na:-2,$h:1},n={Db:function(){return f},m:function(){if(!f){a=c.createFramebuffer();var g=Ka.oa();b=g&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=g&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:
c.FRAMEBUFFER;f=!0}},mm:function(){return b},hi:function(){return d},xf:function(){return c.FRAMEBUFFER},uq:function(){return r},kq:function(){return a},instance:function(g){void 0===g.Kc&&(g.Kc=!1);var l=g.V?g.V:null,q=g.width,w=void 0!==g.height?g.height:g.width,H=a,t=null,x=!1,A=!1,k=0;l&&(q=q?q:l.P(),w=w?w:l.aa());var h={vj:function(){x||(H=c.createFramebuffer(),x=!0,k=r.$h++)},kd:function(){h.vj();h.u();t=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,t);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,q,w);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,t);c.clearDepth(1)},bind:function(E,L){k!==r.na&&(c.bindFramebuffer(b,H),r.na=k);l&&l.u();L&&c.viewport(0,0,q,w);E&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},uh:function(){k!==r.na&&(c.bindFramebuffer(b,H),r.na=k)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Xe:function(){c.clear(c.COLOR_BUFFER_BIT)},Bh:function(){c.clear(c.DEPTH_BUFFER_BIT)},ad:function(){c.viewport(0,0,q,w)},u:function(){k!==
r.na&&(c.bindFramebuffer(b,H),r.na=k)},rtt:function(E){l=E;r.na!==k&&(c.bindFramebuffer(c.FRAMEBUFFER,H),r.na=k);E.u()},ba:function(){c.bindFramebuffer(b,null);r.na=-1},resize:function(E,L){q=E;w=L;t&&(c.bindRenderbuffer(c.RENDERBUFFER,t),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,q,w))},remove:function(){H===a||A||(c.bindFramebuffer(b,H),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),t&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,
null),r.na=-1,c.deleteFramebuffer(H),t&&c.deleteRenderbuffer(t));A=!0}};g.Kc&&h.kd();m.push(h);return h},ba:function(){c.bindFramebuffer(b,null);r.na=-1},sr:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ka.Mj();r.na=-1},reset:function(){r.na=-2},ca:function(){0!==r.na&&(c.bindFramebuffer(b,a),r.na=0)},clear:function(){Ka.Mj();c.clear(c.COLOR_BUFFER_BIT)},A:function(){n.ba();m.forEach(function(g){g.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);n.reset();
f=!1;m.splice(0);r.$h=1}};return n}(),Ka=function(){function a(){g="undefined"===typeof ob?ja:ob;l=!0}function b(e,p,z){for(var P=0;P<p.length;++P){var G=z.getExtension(p[P]+"_"+e);if(G)return G}return null}function d(){null!==h.ye&&(clearTimeout(h.ye),h.ye=null);h.Xb=!1}function f(e){if(0===h.Ab.length){h.Fa=c.PIXEL_PACK_BUFFER;h.Ab.splice(0);h.Kd.splice(0);for(var p=0;p<h.Ec;++p)h.Ab.push(c.createBuffer()),h.Kd.push(-1);h.Ya=0;h.jg=0}c.bindBuffer(h.Fa,h.Ab[h.Ya]);e.byteLength!==h.Kd[h.Ya]&&(c.bufferData(h.Fa,
e.byteLength,c.STREAM_READ),h.Kd[h.Ya]=e.byteLength);h.Aq=!0}function m(){c.bindBuffer(h.Fa,null)}function r(){h.Wb.forEach(function(e){c.deleteSync(e)});h.Wb.splice(0)}function n(){h.Ya=(h.Ya+1)%h.Ec;++h.jg}var g=null,l=!1,q={Ci:!1,Ug:null,Vg:null,Ji:!1,fn:!1,Wg:null,Ki:!1,Xg:null,Di:!1,Ye:null,Wm:!1,Ze:null,Xm:!1},w=null,H={$a:!0,bb:!0,qf:!0,lj:!1},t=null,x=!0,A=null,k=null,h={wl:1,Ec:-1,Ya:0,jg:0,Xb:!1,Ab:[],Wb:[],Kd:[],Fa:null,ye:null},E="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),L=["OES",
"MOZ_OES","WEBKIT_OES"],B="undefined"===typeof window?{}:window,D={m:function(){if(l)return!0;D.reset();l||a();var e=c;if(!w.Ci){w.Ug=D.Xh(e);B.GL_EXT_FLOAT=w.Ug;w.Ji=w.Ug?!0:!1;if(w.Ji||D.oa())w.Vg=D.Yh(e),w.fn=w.Vg?!0:!1,B.GL_EXT_FLOATLINEAR=w.Vg;w.Ci=!0}if(!w.Di){w.Wg=D.Cd(e);w.Wg&&(w.Ki=!0,B.GL_EXT_HALFFLOAT=w.Wg);if(w.Ki||D.oa())w.Xg=D.Zh(e),B.GL_EXT_HALFFLOATLINEAR=w.Xg;w.Dq=w.Xg?!0:!1;w.Di=!0}w.Ye=D.Vh(e);w.Wm=w.Ye?!0:!1;B.GL_EXT_COLORBUFFERFLOAT=w.Ye;w.Ze=D.Wh(e);w.Xm=w.Ze?!0:!1;B.GL_EXT_COLORBUFFERHALFFLOAT=
w.Ze;Ea.m();ca.m();if(!D.Gl())return!1;Y.m();ca.Qm();return!0},reset:function(){w=Object.assign({},q);t=Object.assign({},H)},P:function(){l||a();return g.P()},aa:function(){l||a();return g.aa()},oa:function(){l||a();return g.oa()},Uh:function(e){D.Vh(e);D.Wh(e);D.Xh(e);D.Yh(e);D.Cd(e);D.Zh(e)},Vh:b.bind(null,"color_buffer_float",E),Wh:b.bind(null,"color_buffer_half_float",E),Xh:b.bind(null,"texture_float",L),Yh:b.bind(null,"texture_float_linear",L),Cd:b.bind(null,"texture_half_float",L),Zh:b.bind(null,
"texture_half_float_linear",L),wf:function(e){var p=D.Cd(e);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},nm:function(){return k||c.RGBA32F||c.RGBA},om:function(){return A||c.RGBA16F||c.RGBA},hm:function(){return t},ka:function(){return t.$a},Up:function(){return t.bb},ol:function(){return t.qf},rl:function(){return t.lj&&x},$j:function(e){x=e;!e&&h.Xb&&(r(),c.bindBuffer(h.Fa,null),h.Xb=!1)},Iq:function(){return h.Xb},we:function(e,p,z){function P(){e.bindTexture(e.TEXTURE_2D,
null);e.bindFramebuffer(G,null);e.deleteTexture(u);e.deleteFramebuffer(N)}var G=e.FRAMEBUFFER,U=e.NEAREST,N=e.createFramebuffer();e.bindFramebuffer(G,N);var u=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,u);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,U);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,
U);e.texImage2D(e.TEXTURE_2D,0,p,3,3,0,e.RGBA,z,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return P(),!1;Db.oe(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);Y.Ub(e);e.bindFramebuffer(G,null);Db.Ib(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,u);Y.Ub(e);p=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,
p);P();for(z=0;36>z;++z)if(3!==z%4&&3<Math.abs(p[z]-127))return!1;return!0},ff:function(e){var p={$a:!1,bb:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&D.we(e,e.RGBA32F,e.FLOAT)&&(p.$a=!0,k=e.RGBA32F);!p.$a&&D.we(e,e.RGBA,e.FLOAT)&&(p.$a=!0,k=e.RGBA);var z=D.wf(e);A=null;e.RGBA16F&&D.we(e,e.RGBA16F,z)&&(p.bb=!0,A=e.RGBA16F);!p.bb&&D.we(e,e.RGBA,z)&&(p.bb=!0,A=e.RGBA);return p},Il:function(){var e=Ea.instance({width:2});e.vj();var p=ca.instance({width:2,isFloat:!0,
L:3});e.u();p.u();D.flush();c.checkFramebufferStatus(Ea.hi())!==c.FRAMEBUFFER_COMPLETE?(ca.Lo(),t.qf=!1):t.qf=!0;e.remove();p.remove()},Jl:function(){var e=!1;D.oa()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof c[p]}));t.lj=e},Gl:function(){var e=D.ff(c);Object.assign(t,e);if(!t.$a&&!t.bb)return!1;D.Il();D.Jl();return!0},ao:function(e,p,z,P,G){c.readPixels(e,p,z,P,c.RGBA,c.UNSIGNED_BYTE,
G);return Promise.resolve(G,!1)},vg:function(e,p,z,P,G,U,N){if(!D.rl())return D.ao(e,p,z,P,G);h.Ec=N||h.wl;f(G);c.readPixels(e,p,z,P,c.RGBA,c.UNSIGNED_BYTE,0);h.Wb[h.Ya]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);D.flush();var u=!1;return new Promise(function(y,I){function O(){if(!h.Xb)return d(),m(),n(),I(),!1;var T=(h.Ya+1)%h.Ec;switch(c.clientWaitSync(h.Wb[T],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(h.Wb[T]),h.Wb[T]=null,c.bindBuffer(h.Fa,h.Ab[T]),
c.getBufferSubData(h.Fa,0,G),m(),n(),y(G,u),!0}h.ye=setTimeout(O,0);return!1}d();h.jg+1<h.Ec?(m(),n(),y(G,!1)):(h.Xb=!0,O()||!U||u||(u=!0,U()))})},Mj:function(){c.viewport(0,0,D.P(),D.aa())},flush:function(){c.flush()},A:function(){d();r();ca.A();Ea.A();Y.A();h.Ab.forEach(function(e){c.deleteBuffer(e)});h.Ab.splice(0);Db.reset();l=!1}};return D}(),Jb=function(){function a(e,p,z,P){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,P?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var G=null;if(null!==z)try{G=h.getError();
if("FUCKING_BIG_ERROR"===G)return!1;h.texImage2D(h.TEXTURE_2D,0,e,4,4,0,h.RGBA,p,z);G=h.getError();if(G!==h.NO_ERROR)return!1}catch(U){return!1}P&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);Y.Ub(h);G=h.getError();if("FUCKING_BIG_ERROR"===G)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,w);G=h.getError();G===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,w),G=h.getError());if(G!==
h.NO_ERROR)return!1;z=!0;for(P=0;16>P;++P)z=z&&4>Math.abs(w[P]-127);z&&(l.hj=p,l.Bi=e);return z}function b(e,p){return E.$a&&a(e,h.FLOAT,new Float32Array(H),p)?(g=n.ph,!0):!1}function d(e,p,z){if(!E.bb)return!1;var P=ca.vl(H),G=Ka.Cd(h);if(G&&G.HALF_FLOAT_OES&&a(e,G.HALF_FLOAT_OES,P,p)||h.HALF_FLOAT&&a(e,h.HALF_FLOAT,P,p))return g=n.wc,!0;P=new Float32Array(H);if(a(e,h.FLOAT,P,p))return g=n.wc,!0;h.bindTexture(h.TEXTURE_2D,z);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(l.xd,
D);ca.ai(h,z,2,2,P,!1,!1);h.bindFramebuffer(l.xd,null);h.bindTexture(h.TEXTURE_2D,z);return a(e,null,null,p)?(g=n.wc,!0):!1}function f(e,p,z){q=!0;if(d(e,!0,z)||b(p,!0))return!0;q=!1;return d(e,!1,z)||b(p,!1)?!0:!1}function m(e){if(g===n.M){h=e||c;g=n.RGBA8;q=!0;Ka.Uh(h);E||(E=Ka.ff(h));Ea.reset();D=h.createFramebuffer();l.xd=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(l.xd,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);aa.M();L=aa.Ib(h);e=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,
e);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);B=e;var p=e=h.RGBA,z=h.RGBA16F,P=h.RGBA32F;P&&(e=P);z&&(p=z);if((z||P)&&f(p,e,B))return r(),!0;e=p=h.RGBA;if(f(p,e,B))return r(),!0;g=n.RGBA8;r();return!1}}function r(){h.deleteProgram(L.ra);h.deleteTexture(B);B=L=null}for(var n={M:-1,ph:3,wc:2,RGBA8:0},g=n.M,l={hj:null,Bi:null,xd:null},q=!0,w=new Uint8Array(16),H=Array(64),
t=0;4>t;++t)for(var x=0;4>x;++x){var A=0===(x+t)%2?1:0,k=4*t+x;H[4*k]=A;H[4*k+1]=A;H[4*k+2]=A;H[4*k+3]=A}var h=null,E=null,L=null,B=null,D=null;return{pl:function(e){m(e);return q},zh:function(e,p){g===n.M&&(typeof("undefined"!==p)&&(E=p),m(e));return g!==n.RGBA8},Eq:function(e){m(e);return g===n.ph},kn:function(e){m(e);return g===n.wc},qq:function(e){m(e);return l.hj},pm:function(e){m(e);return l.Bi},A:function(){h=null;q=!0;g=n.M;E=null}}}(),Ld={instance:function(a){function b(){w&&w.remove();w=
ca.instance({isFloat:!1,isPot:!1,width:d.size*d.Aa[0],height:d.size*d.Aa[1],isLinear:d.isLinear})}var d=Object.assign({mask:null,size:-1,preprocessing:"none",preprocessingSize:a.size,customInputShader:null,isLinear:!0,nBlurPass:1,varianceMin:.1,blurKernelSizePx:5,gain:1,overlap:0,isNormalized:!1,tilt:-1,Aa:[1,1]},a),f=null,m=!1,r=!1,n=null,g=!1;a=!1;var l=null;d.mask&&(m=!0,"undefined"!==typeof J&&J&&void 0!==J.ea&&(d.mask=J.ea+d.mask),f=ca.instance({isFloat:!1,url:d.mask}));var q=null;d.customInputShader&&
(q="s50",aa.pa({name:"_",id:q,g:d.customInputShader,tr:["uSource"],precision:"lowp"}),aa.j(q,[{type:"1i",name:"_",value:0}]));switch(d.preprocessing){case "sobel":l="s39";g=!0;break;case "meanNormalization":l="s40";g=!0;break;case "grayScale":l="s36";g=!1;break;case "grayScaleTilt":l="s37";a=!0;g=!1;break;case "rgbGrayTilt":l="s38";a=!0;g=!1;break;case "copy":l=q?q:"s0";break;case "inputLightRegulation":l=q?q:"s36";n=ee.instance({Ai:d.preprocessingSize,bj:d.size,Xi:d.nBlurPass,Ga:!1});r=!0;break;
case "inputMix0":l="none";n=fe.instance({Y:d.preprocessingSize,ob:d.varianceMin,Xa:d.blurKernelSizePx,gain:d.gain||1,Ga:!1,isLinear:d.isLinear});r=!0;break;case "inputMix1":l="none";n=ge.instance({Y:d.preprocessingSize,ob:d.varianceMin,Xa:d.blurKernelSizePx,gain:d.gain||1,Ga:!1});r=!0;break;case "inputCut4":l="none";n=he.instance({Y:d.preprocessingSize,ob:d.varianceMin,Xa:d.blurKernelSizePx,gain:d.gain||1,Mc:d.isNormalized||!1,pg:d.overlap||0,Ga:!1});d.preprocessingSize*=n.qm();r=!0;break;case "direct":case "none":case "abort":l=
"abort";break;default:l="s4"}d.preprocessingSize=Math.ceil(d.preprocessingSize);a&&aa.j(l,[{name:"u30",type:"1f",value:d.tilt}]);m&&(l+="Mask");var w=null;b();var H={P:function(){return d.size},rm:function(){return d.preprocessingSize},yf:function(){return H.P()},vm:function(){return r?n.Ic():w},Ae:function(t){d.Aa=t;b()},Ca:function(t){Ea.ca();if("abort"===l)return t.h(0),t;"none"!==l&&(aa.set(l),g&&aa.D("u31",1/d.size),w.J(),m&&f.h(1),Y.l(!1,!1),w.h(0),t=w);r&&n.process(t)},A:function(){w.remove();
m&&f.remove()}};return H}},Md={instance:function(a){function b(){if(D.oc){m.input&&(m.input.remove(),m.Nd.remove());var p=a.size*a.sparsity;B=Math.log(p/a.size)/Math.log(2);m.input=ca.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:p*a.Aa[0],height:p*a.Aa[1],bg:B});m.Nd=ca.instance({isFloat:!0,isPot:!0,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}}function d(){m.output&&m.output.remove();m.output=ca.instance({isFloat:!0,isPot:!n,isLinear:!n&&g.isLinear,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}
function f(p){g.buffer.forEach(function(z,P){g.results[P][0]=p[0][z];g.results[P][1]=p[1][z];g.results[P][2]=p[2][z];g.results[P][3]=p[3][z]});return g.results}a.normalize=a.normalize||!1;var m={input:null,bias:null,Nd:null,output:null,og:null,mg:null,ng:null},r=null,n=!0,g={type:"undef",C:null,isLinear:!1,buffer:[],results:[],Rd:!1},l=-1,q=a.isReorganize?a.isReorganize:!1,w=a.kernelsCount?!0:!1,H=[a.Lc?"s32":"s31",a.Lc?"s34":"s33","s35"][a.shiftRGBAMode||0],t={isEnabled:!1},x=1/a.size;a.bn?(a.sparsity=
"undefined"!==typeof a.sparsity?a.sparsity:a.je.yf(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.je.yf());var A={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],k=a.sparsity*a.sparsity,h=!1,E=a.size,L="";if(a.maxPooling){switch(a.maxPooling.size){case 2:L="s41";break;case 4:L="s42"}h=!0;E/=a.maxPooling.size;m.mg=ca.instance({isFloat:!0,isPot:!1,width:E})}var B=-1,D=null;n&&d();m.bias=ca.instance(a.bias);var e={P:function(){return a.size},
yf:function(){return E},ei:function(){return a.classesCount},gl:function(p){r.h(p)},Sn:function(){a.remap&&a.remap.isEnabled&&(t={isEnabled:!0,yn:ca.instance(a.remap.maskTexture),Qc:a.remap.layers.map(function(p){return a.parent.sm(p)}),depth:a.remap.depth})},Mo:function(){switch(a.connectivityUp){case "direct":D=ie.instance(a.connectivity);break;case "square":D=je.instance(a.connectivity);break;case "squareFast":D=ke.instance(a.connectivity,a.activation);break;case "full":D=le.instance(Object.assign({Lc:a.Lc},
a.connectivity));break;case "conv":l=a.kernelsCount,D=me.instance(a.connectivity),q&&(m.og=ca.instance({width:E,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},Ca:function(p,z){r=p;D.oc?(m.input.J(),w&&m.bias.h(2),D.Ca(t),m.input.h(0),m.input.em(B),m.Nd.J(),w?aa.set("s0"):(aa.set(H),aa.D("u4",k),m.bias.h(1)),m.input.hl(B,0),Y.l(!1,!1),aa.set(A),m.output.u(),m.Nd.h(0),Y.l(!1,!1)):(m.output.J(),m.bias.h(1),D.Ca());if(n)return z=m.output,h&&(m.mg.J(),z.h(0),aa.set(L),aa.O("u6",a.size,a.size),Y.l(!1,!1),z=m.mg),
q&&(m.og.u(),aa.set("s24"),aa.O("u19",l,E/l),z.h(0),Y.l(!1,!1),z=m.og),z.h(0),z;var P=m.output;if(a.normalize||g.Rd)p=a.normalize,aa.set(g.Rd?"s9":"s8"),aa.D("u11",p?x:1),m.ng.J(),P.h(0),Y.l(!1,!1),P=m.ng;p=null;switch(g.type){case "cpuRGBA2Float":P.Nh(!1);z?p=e.Wn(P).then(g.C):(P=e.Xn(P),g.C(P));break;case "cpuMeanFloat":P.Nh(!0);if(z)p=P.Zn().then(g.C);else{P=P.$n();for(var G=0;G<P.length;++G);g.C(P)}break;case "gpuRawAvg":case "gpuRaw":P.h(0);case "none":null!==g.C&&g.C(P)}z&&null===p&&(p=Promise.resolve());
return p},Ae:function(p){a.Aa=p;b();d()},Uo:function(p){p&&(g.type=p.ee||"none",g.C=p.de||null,g.isLinear=p.lg?!0:!1);d();p="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var z=0,P=0,G=0;z<p;++z)g.buffer.push(P+(a.size-1-G)*a.size),g.results.push([-1,-1,-1,-1]),++P,P===a.size&&(P=0,++G);g.Rd="gpuRawAvg"===g.type||"cpuMeanFloat"===g.type;if(a.normalize||g.Rd)m.ng=ca.instance({isFloat:!0,isPot:!0,width:a.size})},Wn:function(p){return p.Yn().then(f)},Xn:function(p){p=
p.mj();f(p);return g.results},A:function(){for(var p in m){var z=m[p];z&&z.remove()}D&&(D.A(),D=null)}};a.je&&e.Mo(a.je);return e}},ie={instance:function(a){var b=ca.instance(a.weights);return{oc:!0,Hd:function(){return 1},A:function(){b.remove()},Km:function(){return b},Ca:function(){aa.set("s30");b.h(1);Y.l(!1,!1)}}}},le={instance:function(a){var b=a.fromLayerSize,d=ca.instance(a.weights),f=a.Lc?"s27":"s26";return{oc:!0,Hd:function(){return b},A:function(){d.remove()},Ca:function(m){if(m.isEnabled){aa.set("s28");
m.yn.h(3);for(var r=Math.min(m.Qc.length,m.depth),n=0;n<r;++n)m.Qc[n].gl(4+n)}else aa.set(f);aa.D("u9",a.toLayerSize);aa.D("u10",a.fromLayerSize);d.h(1);Y.l(!1,!1)}}}},je={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,f=a.toSparsity,m=f*d,r=m/b,n=b/d,g=0,l=0,q=0,w=Array(f*d*f*d*4),H=Array(f*d*f*d*4),t=Array(b*b),x=0;x<t.length;++x)t[x]=0;x=Math.floor(f/2);for(var A=.5/d,k=.5/b,h=.5/m,E=0;E<d;++E)for(var L=Math.round(E*n),B=0;B<d;++B){var D=Math.round(B*n),e=E/d,p=B/d;e+=A;p+=A;for(var z=
0;z<f;++z){var P=L+z-x;0>P&&(P+=b);P>=b&&(P-=b);for(var G=0;G<f;++G){var U=g/m,N=l/m,u=D+G-x;0>u&&(u+=b);u>=b&&(u-=b);var y=P/b,I=u/b;N=1-N-1/m;y+=k;I+=k;U+=h;N+=h;var O=E*f+z,T=B*f+G;T=d*f-T-1;O=T*d*f+O;w[4*O]=U;w[4*O+1]=N;w[4*O+2]=y;w[4*O+3]=I;I=t[u*b+P]++;O=I%r;y=P*r+O;u=u*r+(I-O)/r;u=b*r-1-u;u=u*b*r+y;H[4*u]=U;H[4*u+1]=N;H[4*u+2]=e;H[4*u+3]=p;++g>=m&&(g=0,++l);++q}}}t=null;var ba=ca.instance(a.weights);delete a.weights.data;var fa=ca.instance({width:m,isFloat:!0,array:new Float32Array(H),isPot:!0});
H=null;var pa=ca.instance({width:m,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{oc:!0,Hd:function(){return r},A:function(){fa.remove();pa.remove();ba.remove()},Ca:function(){aa.set("s25");ba.h(1);pa.h(2);Y.l(!1,!1)}}}},me={instance:function(a){var b=a.kernelsCount,d=a.toSparsity,f=d*a.toLayerSize/a.fromLayerSize,m=a.inputScale||[1,1],r=ca.instance(a.weights);return{oc:!0,Hd:function(){return f},xq:function(){return d},Km:function(){return r},A:function(){r.remove()},Ca:function(){aa.set("s29");
aa.Ig("u29",m);aa.D("u27",b);aa.D("u28",d);aa.D("u9",a.toLayerSize);aa.D("u10",a.fromLayerSize);r.h(1);Y.l(!1,!1)}}}},ke={instance:function(a,b){var d=a.fromLayerSize,f=a.toLayerSize,m=a.toSparsity,r=a.stride?a.stride:1,n=m*f/d,g=f<d,l=d/f,q=ca.instance(a.weights),w="s51"+[d.toString(),f.toString(),m.toString(),r.toString(),b].join("_");aa.$l(w)||(a=Qb(b),f=[{type:"1f",name:"u9",value:f},{type:"1f",name:"u33",value:r}],g&&f.push({type:"1f",name:"u10",value:d}),d=[(g?n:m).toFixed(1),a],g&&d.push(l.toFixed(1)),
aa.Sm(g?"s47":"s46",w,d),aa.j(w,f.concat([{type:"1i",name:"u7",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u8",value:3}])));return{oc:!1,Hd:function(){return n},A:function(){q.remove()},Ca:function(){aa.set(w);q.h(3);Y.l(!1,!1)}}}},ee={instance:function(a){var b=a.Xi?a.Xi:3,d=a.Ai?a.Ai:64,f=a.bj?a.bj:64,m=a.Ga?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var r=ca.instance(a),n=ca.instance(a),g=ca.instance(a),l=ca.instance(a),q=ca.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),
w=1/d;return{process:function(H){aa.set("s43");l.u();Y.l(m,!1);aa.set("s44");for(var t=0;t<b;++t)r.u(),aa.O("u15",w,0),Y.l(m,!1),g.u(),l.h(0),Y.l(m,!1),n.u(),r.h(0),aa.O("u15",0,w),Y.l(m,!1),l.u(),g.h(0),Y.l(m,!1),t!==b-1&&n.h(0);aa.set("s45");q.u();H.h(0);n.h(1);l.h(2);Y.l(m,!1);q.h(0)},Ic:function(){return q}}}},fe={instance:function(a){function b(l,q){return ca.instance({isFloat:l,width:d.Y,isPot:!1,isFlipY:!1,isLinear:q})}var d=Object.assign({ob:.1,Xa:9,Y:128,gain:1,Ga:!1,isLinear:!0},a),f=b(!1,
!1),m=[b(!1,d.isLinear),b(!1,d.isLinear),b(!1,d.isLinear)],r=[b(!1,d.isLinear),b(!1,d.isLinear),b(!1,d.isLinear)],n=b(!0,d.isLinear),g=[f,r[0],r[1]];a={u1:0};aa.xc([{id:"s53",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(b);}",o:a,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Xa-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6)),o:a,i:["u1","u34"],precision:"lowp"},{id:"s55",name:"_",g:"uniform sampler2D u35,u36,u37,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u35,vv0).rgb;float c=texture2D(u36,vv0).r,d=texture2D(u37,vv0).r,i=texture2D(u38,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.ob.toFixed(4)).replace("2.2222",
d.gain.toFixed(4)),o:{u35:0,u36:1,u37:2,u38:3},i:["u35","u36","u37","u38"],precision:"highp"}]);return{process:function(){aa.set("s53");f.J();Y.l(d.Ga,!1);aa.set("s54");for(var l=0;3>l;++l)aa.O("u34",1,0),m[l].u(),g[l].h(0),Y.l(!1,!1),aa.O("u34",0,1),r[l].u(),m[l].h(0),Y.l(!1,!1);aa.set("s55");n.u();f.h(0);r[0].h(1);r[1].h(2);r[2].h(3);Y.l(!1,!1);n.h(0)},Ic:function(){return n}}}},ge={instance:function(a){function b(g){return ca.instance({isFloat:g,width:d.Y,isPot:!1,isFlipY:!1})}var d=Object.assign({ob:.1,
Xa:9,Y:128,gain:1,Ga:!1},a),f=b(!1),m=b(!1),r=b(!1),n=b(!0);a={u1:0};aa.xc([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",o:a,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.Xa-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6)),o:a,i:["u1","u34"],precision:"lowp"},{id:"s58",name:"_",g:"uniform sampler2D u0,u39;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u39,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.ob.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),o:{u0:0,u39:1},i:["u0",
"u39"],precision:"highp"}]);return{process:function(){aa.set("s56");f.J();Y.l(d.Ga,!1);aa.set("s57");aa.O("u34",1,0);m.u();f.h(0);Y.l(!1,!1);aa.O("u34",0,1);r.u();m.h(0);Y.l(!1,!1);aa.set("s58");n.u();f.h(0);r.h(1);Y.l(!1,!1);n.h(0)},Ic:function(){return n}}}},he={instance:function(a){function b(l){return ca.instance({isFloat:l,width:d.Y,isPot:!1,isFlipY:!1})}var d=Object.assign({ob:.1,Xa:9,Y:128,gain:1,pg:0,Mc:!1,Ga:!1},a),f=b(!1),m=null,r=null,n=null;d.Mc&&(m=b(!1),r=b(!1),n=b(!0));a={u1:0};var g=
[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",d.pg.toFixed(4)),o:a,i:["u1"],precision:"lowp"}];d.Mc&&g.push({id:"s60",name:"_",g:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",
Math.round((d.Xa-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6)),o:a,i:["u1","u34"],precision:"lowp"},{id:"s61",name:"_",g:"uniform sampler2D u0,u39;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u39,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",d.ob.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),o:{u0:0,u39:1},i:["u0","u39"],precision:"highp"});aa.xc(g);return{process:function(){aa.set("s59");
f.J();Y.l(d.Ga,!1);d.Mc?(aa.set("s60"),aa.O("u34",1,0),m.u(),f.h(0),Y.l(!1,!1),aa.O("u34",0,1),r.u(),m.h(0),Y.l(!1,!1),aa.set("s61"),n.u(),f.h(0),r.h(1),Y.l(!1,!1),n.h(0)):f.h(0)},qm:function(){return 2-d.pg},Ic:function(){return d.Mc?n:f}}}},Ob=function(){function a(h,E,L,B,D,e,p){if(!A)if(p===e.length)D();else{switch(e[p]){case "A":L();break;case "D":h();break;case "S":E().then(function(z,P){k.Zj();a(h,E,L,P?null:B,D,e,++p)}).catch(function(z){console.log("An error occurred in the WebAR loop: ",
z);D()});return;case "R":B&&B()}a(h,E,L,B,D,e,++p)}}var b={n:5,ig:1,Sf:0,dm:[25,39],Jh:45,Bd:[2,200],k:.7,kp:200,Mn:.05},d=-1,f=null,m=-1,r=-1,n=0,g=-1,l=-1,q=0,w=null,H=0,t=b.Bd[1],x=Math.log(2),A=!0,k={X:function(){switch(d){case -1:return-1;case 0:return l+f.Sf;case 1:return q}},fi:function(h){switch(d){case -1:return 1;case 0:return Math.pow(Math.min(Math.max(g,0),f.n-1)/(f.n-1),h||1);case 1:return(q-f.Sf)/(f.n-1)}},m:function(h){f=Object.assign({},b,h);g=l=f.ig;d=0;w=f.dm.slice(0);k.reset();
k.Zl().then(function(E){E>=f.Jh||(E/=f.Jh,w[0]*=E,w[1]*=E)})},Zj:function(h){h=("undefined"===typeof h?Date.now():h)||0;var E=Math.min(Math.max(h-H,f.Bd[0]),f.Bd[1]);t=E;H=h;var L=-1===m?0:f.k;m=Math.min(Math.max(1E3/E,5),120)*(1-L)+m*L;h-r>f.kp&&5<++n&&(E=f.k,g=g*(1-E)+(m<w[0]?l-1:m>w[1]?l+1:l)*E,Math.abs(g-l)>1-f.Mn&&(E=Math.min(Math.max(Math.round(g),0),f.n-1),E!==l&&(g=l=E,m=.5*(w[1]-w[0]))),r=h)},xg:function(h,E,L,B,D,e){A=!1;a(h,E,L,B,D,e,0)},stop:function(){A=!0},Fo:function(h){q=h;d=1},jp:function(){d=
0;k.reset()},reset:function(){t=b.Bd[1];r=m=-1;n=0},lr:function(h,E,L){L=Math.exp(-x*t/L);return(1-L)*h+L*E},pq:function(){return t},Zl:function(){return new Promise(function(h){function E(p){p=p||Date.now();var z=Math.max(0,p-B);B=p;0!==D++&&0<z&&(L=Math.min(L,z),++e);10>=D?window.requestAnimationFrame(E):h(Math.round(1E3/L))}var L=Infinity,B=0,D=0,e=0;setTimeout(E,1)})}};return k}(),pd=function(){function a(H,t){var x=H[0]-.5;H=H[1]-.5;var A=t[0]-.5;t=t[1]-.5;return x*x+H*H-(A*A+t*t)}var b={Yi:4,
fe:[1.5,1.5,2],ua:[.1,.1,.1],tj:1,Y:-1,cb:-1,cp:2,Jn:1,yg:!0,dn:!1,Xl:.8},d=null,f=[],m=[],r=[],n=[0],g=[.5,.5,1],l=null,q=0,w=[0,0,0];return{m:function(H){d=Object.assign({},b,H);f.splice(0);m.splice(0);r.splice(0);q=0;H=d.fe[0]*d.ua[0];var t=d.fe[1]*d.ua[1],x=1/(1+d.fe[2]*d.ua[2]),A=Math.min(d.Y,d.cb),k=d.Y/d.cb,h=d.tj*A,E=h/d.Y;h/=d.cb;var L=.5*A/d.Y;A=.5*A/d.cb;var B=.5*d.Xl;B*=B;for(var D=0;D<d.Yi;++D){var e=[];m.push(e);var p=Math.pow(x,D),z=E*p,P=h*p;p=z*d.Jn;r.push(p);var G=z*H,U=P*t;z/=2;
P/=2;for(var N=1+(1-z-z)/G,u=1+(1-P-P)/U,y=0;y<u;++y)for(var I=P+y*U,O=I-.5,T=0;T<N;++T){var ba=z+T*G,fa=ba-.5;if(!(fa*fa+O*O>B)){if(d.dn){var pa=Math.abs(O)+.5*p*k;if(Math.abs(fa)+.5*p>L||pa>A)continue}ba=[ba,I,p];f.push(ba);e.push(ba)}}d.yg&&e.sort(a);l=f}d.yg&&f.sort(a)},get:function(H){var t=l.length;if(0===t)return g;for(;H>=n.length;)n.push(0);n[H]>=t&&(n[H]=0);var x=l[Math.floor(n[H])%t];n[H]=(n[H]+1/d.cp)%t;if(0===q)return x;w[0]=x[0];w[1]=x[1];w[2]=q;return w},Qq:function(H){H>=n.length||
(n[H]=Math.floor(Math.random()*l.length))},cr:function(H){q=H;if(0===q)l=f;else{for(var t=r.length,x=t-1,A=0;A<t;++A)if(r[A]<=H){x=A;break}l=m[x]}},reset:function(){for(var H=f.length/n.length,t=0;t<n.length;++t)n[t]=Math.floor(t*H);q=0;l=f}}}(),Eb=function(){function a(){d(k+x.cg);h.port.postMessage("DONE")}function b(){D.ld=0===x.Ea?L(d):L(f)}function d(G){B.$b&&null!==A&&(G-=k,G=Math.min(Math.max(G,x.Rh[0]),x.Rh[1]),k+=G,r(),e.isEnabled&&e.Nc&&B.Ra&&k-e.Pf>x.oh&&(q(),e.Pf=k),A(k))}function f(G){B.$b&&
(D.timeout=setTimeout(d.bind(null,G),x.Ea))}function m(){A=null;B.$b=!1;r()}function r(){D.ld&&(window.cancelAnimationFrame(D.ld),D.ld=null);D.timeout&&(window.clearTimeout(D.timeout),D.timeout=null)}function n(G){G&&!B.Ra?(B.Ra=!0,E&&Ob.jp(),h.port.postMessage("STOP"),Ka.$j(!0),b()):!G&&B.Ra&&(B.Ra=!1,E&&Ob.Fo(1),Ka.$j(!1),h.port.postMessage("START"))}function g(G){G.target.hidden?z():p()}function l(G,U,N){U=G.createShader(U);G.shaderSource(U,N);G.compileShader(U);return U}function q(){e.Nc=!1;var G=
e.ab,U=e.Ld,N=e.Md,u=e.Fa;G.uniform1f(e.ti,Math.random());e.ac?U.beginQueryEXT(u,N):G.beginQuery(u,N);G.drawElements(G.POINTS,1,G.UNSIGNED_SHORT,0);e.ac?U.endQueryEXT(u):G.endQuery(u);Ka.flush();H().then(function(y){0===y||isNaN(y)?(e.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",y)):(y=x.wk*x.nh*1E3/y,e.Ee=(e.Ee+1)%x.vc,e.Qf[e.Ee]=y,++e.Ni>x.vc&&(e.Td.set(e.Qf),e.Td.sort(function(I,O){return I-O}),y=e.Td[Math.floor(x.vc/2)],
e.Ed=Math.max(e.Ed,y),x.mh(y/e.Ed)),e.Nc=!0)}).catch(function(){e.Nc=!0})}function w(G){var U=e.ab,N=e.Ld,u=e.Md;u=e.ac?N.jq(u,N.QUERY_RESULT_AVAILABLE_EXT):U.getQueryParameter(u,U.QUERY_RESULT_AVAILABLE);U=U.getParameter(N.GPU_DISJOINT_EXT);u?G(!U):setTimeout(w.bind(null,G),.1)}function H(){return new Promise(function(G,U){w(function(N){if(N){N=e.ab;var u=e.Ld,y=e.Md;N=e.ac?u.getQueryObjectEXT(y,u.QUERY_RESULT_EXT):N.getQueryParameter(y,N.QUERY_RESULT);G(N)}else U()})})}var t={Ei:!0,Rh:[1,200],cg:20,
Ea:0,nh:50,wk:240,oh:3E3,vc:3,mh:null},x=null,A=null,k=0,h=null,E=!1,L=null,B={Qa:!1,Ra:!0,Of:!1,Mf:!1,Lf:!1,$b:!1},D={ld:null,timeout:null},e={isEnabled:!1,Nc:!1,ab:null,Ld:null,Md:null,Fa:null,ti:null,ac:!0,Pf:0,Ni:0,Qf:null,Td:null,Ee:0,Ed:0},p=n.bind(null,!0),z=n.bind(null,!1),P={m:function(G){x=Object.assign(t,G);Object.assign(B,{Ra:!0,Qa:!0,$b:!1});L=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==x.mh){G=document.createElement("canvas");G.setAttribute("width","1");
G.setAttribute("height","1");var U={antialias:!1};G=G.getContext("webgl2",U)||G.getContext("webgl",U);if(U=G.getExtension("EXT_disjoint_timer_query")||G.getExtension("EXT_disjoint_timer_query_webgl2")){e.ab=G;e.Ld=U;e.isEnabled=!0;e.ac=U.beginQueryEXT?!0:!1;var N=l(G,G.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),u=l(G,G.FRAGMENT_SHADER,"precision lowp float;uniform float u40;void main(){vec4 a=u40*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
x.nh.toString())),y=G.createProgram();G.attachShader(y,N);G.attachShader(y,u);G.linkProgram(y);N=G.getAttribLocation(y,"a0");e.ti=G.getUniformLocation(y,"u40");G.useProgram(y);G.enableVertexAttribArray(N);y=G.createBuffer();G.bindBuffer(G.ARRAY_BUFFER,y);G.bufferData(G.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),G.STATIC_DRAW);G.vertexAttribPointer(N,4,G.FLOAT,!1,16,0);y=G.createBuffer();G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,y);G.bufferData(G.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),G.STATIC_DRAW);
G.disable(G.DEPTH_TEST);G.disable(G.DITHER);G.disable(G.STENCIL_TEST);G.viewport(0,0,1,1);y=e.ac?U.createQueryEXT():G.createQuery();e.Md=y;e.Fa=U.TIME_ELAPSED_EXT||G.TIME_ELAPSED;e.Pf=-x.oh;e.Qf=new Float32Array(x.vc);e.Td=new Float32Array(x.vc);e.Ed=0;e.Ee=0;e.Ni=0;e.Nc=!0}}if(x.Ei){G=!1;try{if("undefined"===typeof SharedWorker){var I=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
x.cg.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),O=new Worker(I);O.addEventListener("message",a);h={kj:O,port:O};B.Of=!0}else{var T=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
x.cg.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ba=new SharedWorker(T);ba.port.start();ba.port.addEventListener("message",a);h={kj:ba,port:ba.port};B.Mf=!0}G=!0}catch(fa){}G&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",g):(window.addEventListener("blur",z),window.addEventListener("focus",p)),window.addEventListener("pagehide",
z),window.addEventListener("pageshow",p),B.Lf=!0)}E="undefined"!==typeof Ob},A:function(){m();B.Lf&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",g):(window.removeEventListener("blur",z),window.removeEventListener("focus",p)),window.removeEventListener("pagehide",z),window.removeEventListener("pageshow",p),B.Lf=!1);B.Mf?(h.port.close(),B.Mf=!1):B.Of&&(h.kj.terminate(),B.Of=!1);Object.assign(B,{Ra:!0,Qa:!1,$b:!1});A=null},Lq:function(){return B.Ra},update:function(G){Object.assign(x,
G)},xg:function(G){B.Qa||P.m({});r();B.$b=!0;A=G;B.Ra&&b()},stop:m};return P}(),Oc={vf:function(){return Date.now()},mq:function(){return performance.now()}},Sd=function(){var a={Zm:!0,isLinear:!0,dg:[4,11]};return{hq:function(b,d,f){return d.isDetected?Math.floor(d.s*b):(b=Math.floor(Math.log2(b/4)),b=Math.min(Math.max(b,4),9),Math.max(f,Math.pow(2,b)))},instance:function(b){var d=Object.assign({},a,b),f=[],m=null,r=-1,n=null,g=!1;for(b=d.dg[0];b<=d.dg[1];++b)f[b]=null;return{J:function(l,q){q!==
r&&(m&&m.remove(),m=ca.instance({isLinear:d.isLinear,isPot:!0,width:q}));if(g=d.Zm&&q<.5*l){l=Math.floor(Math.log2(l));var w=d.dg;w=l=Math.min(Math.max(l,w[0]),w[1]);if(!f[w]){var H=ca.instance({isPot:!0,isMipmap:!0,Gi:!0,width:Math.pow(2,w)});f[w]={V:H,Wi:-1}}l=f[l];n=l.V;l.Wi!==q&&(w=Math.log2(q),n.h(0),n.Ij(w),ca.ba(0),l.Wi=q)}else n=m;r=q;n.J()},h:function(l){n.h(l);g&&n.Hc()},za:function(l){n.za(l)},remove:function(){m&&m.remove();f.forEach(function(l){l&&l.V.remove()})}}}}}(),Fb=function(){function a(R){switch(p){case e.movePinch:var ka=
-R.deltaY;0===z&&k("pinch",-1,.001*ka,null)}R.deltaY;R.preventDefault()}function b(R){if(-1!==z)switch(p){case e.swipe:if(1!==z)break;l();w(R,G);var ka=G[0]-P[0];m(ka);R=ka/(20*L.offsetWidth/100);k("swipeMove",Math.min(Math.max(R,-1),1),R,null);break;case e.movePinch:if(2===z||3===z){w(R,G);ka=G[0]-P[0];var xa=G[1]-P[1];2===z?(M+=Math.sqrt(ka*ka+xa*xa),10>M?(P[0]=G[0],P[1]=G[1]):(ra||(ra=!0,k("moveStart",null,null,null)),da[0]=ka,da[1]=xa,N[0]=ka-U[0],N[1]=xa-U[1],k("move",da,N,null),U[0]=da[0],U[1]=
da[1])):3===z&&(R=q(R)/ta,k("pinch",R,R-qa,null),qa=R)}}}function d(R){if(-1!==z)switch(p){case e.swipe:if(1!==z)break;l();w(R,G);R=G[0]-P[0];var ka=0>R;(R=20<100*Math.abs(R)/L.offsetWidth)&&ka?k("swipeLeft",u,null,null):R&&!ka&&k("swipeRight",u,null,null);var xa=function(){setTimeout(function(){g();z=0;k("swipeEnd",null,null,null)},202)};R?(R=function(){var bb=(ka?-1:1)*L.width,$a=(ka?1:-1)*bb/L.width;u.style.transitionDuration=(400).toString()+"ms";u.style.left=(ba[0]+bb).toString()+"px";u.style.top=
ba[1].toString()+"px";u.style.transform="rotate( "+$a.toString()+"rad )";xa()},T?R():fa=R):(u.style.transitionDuration=(200).toString()+"ms",u.style.opacity="0",u.style.left=ba[0].toString()+"px",u.style.top=ba[1].toString()+"px",u.style.transform="",xa());z=-1;break;case e.movePinch:if(2===z||3===z)z===z.move?k("moveEnd",null,null,null):3===z&&k("pinchEnd",null,null,null),z=0}}function f(R){R.preventDefault();if(-1!==z)switch(p){case e.swipe:if(0!==z)break;l();z=1;pa=setTimeout(function(){g();pa=
null;1===z&&(z=0,k("swipeEnd",null,null,null))},1E3);r();k("swipeStart",null,null,null);k("swipeGetCanvas",u,I,y);w(R,P);break;case e.movePinch:0!==z?2!==z||ra||void 0===R.changedTouches&&void 0===R.touches||(ta=q(R),20<ta&&(z=3,qa=1,k("pinchStart",null,null,null))):3!==z&&(ra=!1,w(R,P),U[0]=0,U[1]=0,z=2,M=0)}}function m(R){var ka=0>R;u.style.left=ba[0]+R+"px";u.style.transformOrigin=ka?F:V;u.style.transform="rotate( "+((ka?1:-1)*R/L.width).toString()+"rad )"}function r(){T=!1;var R=L.getBoundingClientRect();
ba[0]=R.left;ba[1]=R.top;u.width=Math.round(L.width/4);u.height=Math.round(L.height/4);y.width=u.width;y.height=u.height;u.style.width=L.offsetWidth+"px";u.style.height=L.offsetHeight+"px";u.style.left=ba[0]+"px";u.style.top=ba[1]+"px";setTimeout(n,0)}function n(){I.drawImage(L,0,0,u.width,u.height);O.drawImage(u,0,0);T=!0;document.body.appendChild(u);fa&&(fa(),fa=!1)}function g(){u.style.transitionDuration="0ms";u.style.opacity="1";u.style.transform="";T&&(document.body.removeChild(u),T=!1)}function l(){pa&&
(window.clearTimeout(pa),pa=null)}function q(R){H(R,Qa,0);H(R,Ia,1);return Math.sqrt(Qa[0]*Qa[0]+Ia[0]*Ia[0])}function w(R,ka){void 0!==R.changedTouches||void 0!==R.touches?H(R,ka,0):(ka[0]=R.pageX,ka[1]=R.pageY)}function H(R,ka,xa){R.touches.length>xa?(ka[0]=R.touches[xa].pageX,ka[1]=R.touches[xa].pageY):(ka[0]=R.changedTouches[xa].pageX,ka[1]=R.changedTouches[xa].pageY)}function t(){D.forEach(function(R){L.removeEventListener(R.type,R.wb,!1)});return D.splice(0,D.length)}function x(R){R.forEach(function(ka){A(ka.type,
ka.wb)})}function A(R,ka){L.removeEventListener(R,ka,!1);u.removeEventListener(R,ka,!1);L.addEventListener(R,ka,!1);u.addEventListener(R,ka,!1);0===D.filter(function(xa){return xa.type===R&&xa.wb===ka}).length&&D.push({type:R,wb:ka})}function k(R,ka,xa,bb){B[R].forEach(function($a){$a.wb(ka,xa,bb)})}function h(R){return R[0]+"% "+(100-R[1]).toString()+"%"}var E=!1,L=null,B={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],
moveStart:[],moveEnd:[]},D=[],e={idle:0,swipe:1,movePinch:2},p=e.idle,z=0,P=[0,0],G=[0,0],U=[0,0],N=[0,0],u=document.createElement("canvas"),y=document.createElement("canvas"),I=u.getContext("2d"),O=y.getContext("2d");u.style.position="fixed";u.style.zIndex="800";u.style.cursor="move";u.style.pointerEvents="none";u.className="swipeImage";u.setAttribute("draggable",!1);var T=!1,ba=[0,0],fa=null,pa=null,V=h([50,100]),F=h([50,0]),v=null,M=0,da=[0,0],ta=0,ra=!1,qa=1,Qa=[0,0],Ia=[0,0],la={init:function(R){if(E)la.switch_canvas(R.ta);
else return L=R.ta,A("mousedown",f),A("mouseup",d),A("mouseout",d),A("mousemove",b),A("mousemove",b),A("wheel",a),A("touchstart",f),A("touchend",d),A("touchmove",b),E=!0,la},switch_canvas:function(R){if(!E)la.init({ta:R});else if(L!==R){var ka=t();L=R;x(ka);for(var xa in B)for(R=B[xa],ka=R.length-1;0<=ka;--ka)R[ka].co&&R.splice(ka,1)}},get_mode:function(){for(var R in e)if(e[R]===p)return R;return!1},switch_mode:function(R){E&&"undefined"!==typeof e[R]&&(R=e[R],p!==R&&(l(),p=R,z=0))},add_listener:function(R,
ka,xa){B[R].push({wb:ka,co:"undefined"===typeof xa?!1:xa});return la},remove_listener:function(R){B[R].splice(0,B[R].length);return la},animate_swipe:function(R,ka){v&&(clearInterval(v),v=null);r();var xa=L.width/(ka/1E3)*("left"===R?-1:1),bb=0,$a,Ra=Date.now();v=setInterval(function(){v&&($a=Date.now(),bb+=($a-Ra)/1E3*xa,m(bb),Ra=$a,Math.abs(bb)>.75*L.width&&v&&(clearInterval(v),v=null,g()))},16)}};return la}();window.CanvasListeners=Fb;var ha={VERSION:"4.9.7",ready:!1,isBusy:!1},cb={idealWidth:800,
idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:60,FOVforced:0,Le:80,Ke:5E3},J=Object.assign({},{Oc:!0,be:"models3D",ae:"materials",hp:"tweakers",neuralNetworkPath:"built/jeefitNNC_66_0.json",neuralNetworkVersion:"66_0",ea:"",xa:"",fd:"",Ea:0,Hk:20,width:1024,height:1024,Hi:!0,Ln:[2,3.5],rj:300,gd:[1,6],scanOverlapFactors:[1.4,1.4,3],scanNScaleLevels:2,scanScale0Factor:.5,ua:[.2,.2,.3],rc:[[.8,.5],[.8,.5],[1,1]],ep:30,El:1,Vn:[.35,.7],Un:1,
fp:[.01,.035],no:[.003,.007],Sg:[0,.6],bm:.2,Ua:[1/.698111,1/1.047166,1/.122169],Yj:[-.1,0,0],ie:[0,-62,8],Qn:1.03,Ja:[0,-60,0],gg:48,gp:.2,hg:20,Fc:.4,rf:73,Oe:[.033,1],Fk:[4,1],kl:[0,.5],po:.05,mo:1,io:[1,4.5],vp:20,gq:!1,Jc:145,Gf:-18,Ef:20,Ff:3,Sc:[-110,0],mc:1,Nj:.4,Oj:3,te:[0,0,0],nc:[1.1,1],ud:0,ef:.95,df:90,cf:50,md:25,Qb:.1,Cf:!0,Yd:!0,Yf:"images/masks/target.jpg",Zf:!1,Xd:[1/255,175/255,236/255,0],Zd:-.001,Xf:3.14,Se:0,Re:"images/masks/burka.png",Pe:Math.PI-Math.PI/4,bf:Math.PI/4,wg:[.3,
.2,.1],bc:!0,Pi:[700,90],rn:[.2,.04],wp:"images/backgrounds/viewer3D.png",jh:[0,0,0],ih:[0,15,60],Ie:.3,Ep:50,Ap:zd?Ab:!1,Bp:zd?Ab:!1,Dp:1E3,Gp:1E3,Cp:40,zp:[0,0,-400],Si:.1,vn:.5,Ti:[.5,1.5],$d:30,un:!0});W.Hh=!0;W.Ih=!0;W.Gh=!1;W.Ta=!0;var db={ke:3.5,Hb:"images/debug/picsou.png",Yc:45,Vf:.785,Wf:.3925,Vd:5,Ud:2,Uf:0,Tf:0,xp:"images/backgrounds/bg1.jpg",yp:"images/backgrounds/bg1_light.jpg",nk:1,pk:2};J.fx=[4,50];J.Sc=[-110,0];J.Nj=.2;J.Oj=3;J.te=[0,-2,20];J.nc=[.85,1];W.Wc=2.1289;W.qg=1;db.ke=2.5858;
db.Vf=.4388;db.Wf=.118;db.Hb="images/debug/hdri2.png";db.Yc=180;db.zg=.8065;db.Vd=5.3887;db.Ud=.5351;db.Uf=-.3019;db.Tf=0;db.nk=3.5288;db.pk=6.2168;var rd={element:null,Th:null,Sd:!1,Eh:null,V:null,Yg:null,deviceId:-1,sf:-1,Ad:0,ij:null,He:-1},Fa=Object.assign({},rd),Sb=null,Fc=[],Hc=[],Sc=null,Xc=null,Tc=null,ab=null,Ad=J.Ln,Bd=window.devicePixelRatio||1;var Ec={am:Math.max(Ad[0]/Bd,1),pf:Math.min(Bd,Ad[1])};var hb=null;ha.onLoad=function(a){ha.ready?a():Fc.push(a)};ha.onHalfLoad=function(a){ha.load_model?
a():Hc.push(a)};ha.onWebcamAsk=function(a){Sc=a};ha.onContextLost=function(a){Xc=a};ha.onWebcamGet=function(a){Tc=a};ha.get_onHalfLoadCallstack=function(){return Hc};ha.set_size=function(a,b,d){d=d?Ec.pf:1;J.width=a*d;J.height=b*d};ha.get_videoDevices=function(a){md(a)};ha.set_videoDevice=function(a){Fa.deviceId=a};ha.set_videoSizes=function(a,b,d,f,m,r){cb.idealWidth=a;cb.idealHeight=b;cb.minWidth=d;cb.maxWidth=f;cb.minHeight=m;cb.maxHeight=r};ha.set_loading=function(a,b,d){a&&(J.Zf=!0,J.Yf=a);"number"===
typeof b&&(a=new gc(b),J.Xd=[a.r,a.$,a.b,0]);"number"===typeof d&&(J.Zd=d)};ha.set_settings=function(a,b,d){a&&Object.assign(J,a);b&&Object.assign(cb,b);d&&Object.assign(db,d)};ha.get_size=function(){return{width:J.width,height:J.height}};ha.get_cv=function(){return ob.xb()};ha.set_NNCPath=function(a){J.fd=a};ha.set_materialsPath=function(a){J.ae=a};ha.set_modelsPath=function(a){J.be=a};ha.destroy=function(){return hb?hb.A():Promise.resolve()};ha.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,
screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(db.Vd=a.lightDirFactor);0<=a.lightAmbFactor&&(db.Ud=a.lightAmbFactor);0<=a.screenLuminosity&&(db.ke=a.screenLuminosity);0<=a.screenWidthAngle&&(db.Yc=a.screenWidthAngle);a.screenTextureURL&&(db.Hb=a.screenTextureURL);ha.ready&&(hb.Uj(),za.Na.wh(Fa.V))};ha.preFetch=function(a,b){b=b||[];b.push(qd(a));b.forEach(Ud)};ha.check_isMobile=qc;ha.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,
materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null,callbackReady:null},a);J.Oc=b.isRequestCamera;ha.set_size(b.width,b.height,b.isApplyOverSampling);ha.update_lightSettings(a);b.modelsPath&&(J.be=b.modelsPath);b.materialsPath&&(J.ae=b.materialsPath);b.materialTextureBasePath&&(W.Vi=b.materialTextureBasePath);b.NNCPath&&(J.fd=b.NNCPath);J.scanOverlapFactors=
b.scanOverlapFactors||J.scanOverlapFactors;J.scanNScaleLevels=b.scanNScaleLevels||J.scanNScaleLevels;J.scanScale0Factor=b.scanScale0Factor||J.scanScale0Factor;J.Hi=b.isMirror;return new Promise(function(d,f){ha.onHalfLoad(d);ha.init(b.basePath,function(){b.callbackReady&&b.callbackReady()},f,b.cv)})};ha.init=function(a,b,d,f){hb=Qd();Sb=d?function(m,r){d(m,r);Sb=null}:function(){};a&&(J.ea=a);b&&Fc.push(b);hb.Uj();a=hb.wm();return ob.m({af:"jeefitCanvas",ta:f,width:a.width,height:a.height,debug:!1,
kg:function(){Xc&&Xc()},premultipliedAlpha:!0})?J.Oc?sd():Vd():(Sb&&Sb("GL_INCOMPATIBLE","Cannot init Context"),!1)};ha.request_cameraVideoStream=function(){return sd().then(function(){hb.cm(J.width,J.height,0)})};JEELIZVTO=ha;var od=function(){function a(){Ea.ba();c.viewport(0,0,1,1);aa.set("s74");f.h(0);Y.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,r);b(0<r[0])}var b=null,d=!1,f=null,m=!1,r=null,n={m:function(g){if(m)return!1;f=g;aa.xc([{id:"s74",name:"_",g:"uniform sampler2D u42;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u42,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u42"],precision:"lowp"}]);aa.j("s74",[{type:"1i",name:"u42",value:0}]);r=new Uint8Array(4);return m=!0},start:function(g,l){n.stop();b=l;d=window.setInterval(a,g)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return n}(),Yc={};gc.prototype={constructor:gc,r:1,$:1,b:1,set:function(a){a instanceof gc?this.N(a):"number"===typeof a?ud(this,a):"string"===typeof a&&Wd(this,a);return this},so:function(){function a(b,d,f){0>f&&(f+=1);1<f&&--f;return f<1/6?b+6*(d-b)*f:.5>f?d:f<2/3?b+6*(d-b)*(2/
3-f):b}return function(b,d,f){b=Yc.Math.iq(b,1);d=Yc.Math.We(d,0,1);f=Yc.Math.We(f,0,1);0===d?this.r=this.$=this.b=f:(d=.5>=f?f*(1+d):f+d-f*d,f=2*f-d,this.r=a(f,d,b+1/3),this.$=a(f,d,b),this.b=a(f,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.$,this.b)},N:function(a){this.r=a.r;this.$=a.$;this.b=a.b;return this},add:function(a){this.r+=a.r;this.$+=a.$;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.$*=a.$;this.b*=a.b;return this},Ha:function(a){this.r*=
a;this.$*=a;this.b*=a;return this},vb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.$=a[b+1];this.b=a[b+2];return this}};var Xd={};Ic.prototype={constructor:Ic,get x(){return this.F},set x(a){this.F=a},get y(){return this.G},set y(a){this.G=a},get z(){return this.H},set z(a){this.H=a},get w(){return this.T},set w(a){this.T=a},set:function(a,b,d,f){this.F=a;this.G=b;this.H=d;this.T=f;return this},clone:function(){return new this.constructor(this.F,this.G,this.H,this.T)},N:function(a){this.F=a.x;
this.G=a.y;this.H=a.z;this.T=a.w;return this},inverse:function(){this.F*=-1;this.G*=-1;this.H*=-1;this.normalize();return this},wd:function(a){return this.F*a.F+this.G*a.G+this.H*a.H+this.T*a.T},Rf:function(){return this.F*this.F+this.G*this.G+this.H*this.H+this.T*this.T},length:function(){return Math.sqrt(this.F*this.F+this.G*this.G+this.H*this.H+this.T*this.T)},normalize:function(){var a=this.length();0===a?(this.H=this.G=this.F=0,this.T=1):(a=1/a,this.F*=a,this.G*=a,this.H*=a,this.T*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),vd(this,a,b)):vd(this,this,a)},vb:function(a,b){void 0===b&&(b=0);this.F=a[b];this.G=a[b+1];this.H=a[b+2];this.T=a[b+3];return this}};hc.prototype={constructor:hc,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},wj:function(a){this.x=a;
return this},xj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},N:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.jd(a,b);this.x+=a.x;this.y+=a.y;return this},jd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.kb(a,b);this.x-=a.x;this.y-=a.y;return this},kb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ha:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},hf:function(a){return this.Ha(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},We:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},wd:function(a){return this.x*a.x+this.y*a.y},Rf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.hf(this.length())},
vb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Ya.prototype={constructor:Ya,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},wj:function(a){this.x=a;return this},xj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},N:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.jd(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},jd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.kb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},kb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ha:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},hf:function(a){return this.Ha(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},We:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},wd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Rf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.hf(this.length())},vb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};ic.tk="XYZ";ic.prototype={constructor:ic,get x(){return this.F},set x(a){this.F=a},get y(){return this.G},set y(a){this.G=a},get z(){return this.H},set z(a){this.H=a},get order(){return this.Wa},set order(a){this.Wa=a},set:function(a,b,d,f){this.F=
a;this.G=b;this.H=d;this.Wa=f||this.Wa;return this},clone:function(){return new this.constructor(this.F,this.G,this.H,this.Wa)},N:function(a){this.F=a.F;this.G=a.G;this.H=a.H;this.Wa=a.Wa;return this},vb:function(a){this.F=a[0];this.G=a[1];this.H=a[2];void 0!==a[3]&&(this.Wa=a[3]);return this}};Uc.prototype={constructor:Uc,set:function(a,b){this.min.N(a);this.max.N(b);return this},clone:function(){return(new this.constructor).N(this)},N:function(a){this.min.N(a.min);this.max.N(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Ya).kb(this.max,this.min)},getParameter:function(a,b){return(b||new Ya).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};jc.prototype={constructor:jc,set:function(a,b,d,f,m,r,n,g,l,q,w,H,t,x,A,k){var h=this.elements;h[0]=a;h[4]=b;
h[8]=d;h[12]=f;h[1]=m;h[5]=r;h[9]=n;h[13]=g;h[2]=l;h[6]=q;h[10]=w;h[14]=H;h[3]=t;h[7]=x;h[11]=A;h[15]=k;return this},clone:function(){return(new jc).vb(this.elements)},N:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),xd(this,a,b)):xd(this,this,a)},Ha:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,f=a.y;a=a.z;b[0]*=d;b[4]*=f;b[8]*=a;b[1]*=d;b[5]*=f;b[9]*=a;b[2]*=d;b[6]*=f;b[10]*=a;b[3]*=d;b[7]*=f;b[11]*=a;return this},vb:function(a){this.elements.set(a);return this}};Vc.prototype={constructor:Vc,
clone:function(){return(new this.constructor).N(this)},N:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Ia.N(a.Ia);this.color.N(a.color);this.cc=a.cc;for(var b=0,d=a.Ge.length;b<d;b++)this.Ge[b]=a.Ge[b].clone();b=0;for(d=a.gh.length;b<d;b++)this.gh[b]=a.gh[b].clone();return this}};var C=function(){function a(e,p,z){p=e.createShader(p);e.shaderSource(p,z);e.compileShader(p);return e.getShaderParameter(p,e.COMPILE_STATUS)?p:!1}function b(e,p){ja.oa()&&(p.g=p.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
p.Bf=a(e,e.VERTEX_SHADER,p.v,p.name+" VERTEX");p.Af=a(e,e.FRAGMENT_SHADER,p.g,p.name+" FRAGMENT");var z=e.createProgram();e.attachShader(z,p.Bf);e.attachShader(z,p.Af);e.linkProgram(z);return z}function d(e){e.v="#version 300 es\n"+e.v.replace(/varying/g,"out");e.g="#version 300 es\n"+e.g.replace(/varying/g,"in");e.v=e.v.replace(/texture2D\(/g,"texture(");e.g=e.g.replace(/texture2D\(/g,"texture(");e.fa||(e.g=e.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),e.g=e.g.replace(RegExp("gl_FragColor",
"g"),"FragColor"));var p=0,z=[];e.v=e.v.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(P,G,U){var N="";U.split(",").forEach(function(u){u=u.trim();N+="layout(location = "+p+") in "+G+" "+u+";\n";z.push(u);++p});return N});e.Bk=z}function f(e){return["float","sampler2D","int"].map(function(p){return"precision "+e+" "+p+";\n"}).join("")}function m(e,p){if(p.zi)return!1;var z=ja.oa();W.Cq||z||e.enableVertexAttribArray(0);void 0===p.fa&&(p.fa=!1);p.fa&&(p.hd=z?3:2);p.id=L++;void 0===
p.hd&&(p.hd=2);void 0===p.precision&&(p.precision=B.high);p.fa&&(p.g=(ja.oa()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+p.g);void 0===p.v&&(p.v="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var P=f(p.precision);
p.g=P+p.g;p.v=P+p.v;z&&3<=p.hd&&d(p);p.Ka&&p.Ka.forEach(function(G){p.v=p.v.replace(G.search,G.replace);p.g=p.g.replace(G.search,G.replace)});p.ra=b(e,p);p.B={};p.i.forEach(function(G){p.B[G]=e.getUniformLocation(p.ra,G)});p.attributes={};p.ya=[];p.fh=0;void 0===p.K&&(p.K=["a0"]);void 0===p.S&&(p.S=[2]);p.K.forEach(function(G,U){var N=z&&3<=p.hd?p.Bk.indexOf(G):e.getAttribLocation(p.ra,G);p.attributes[G]=N;p.ya.push(N);p.fh+=4*p.S[U]});p.set=function(){h!==p.id&&(-1!==h&&E.M(),h=p.id,E=p,e.useProgram(p.ra),
p.ya.forEach(function(G){0!==G&&e.enableVertexAttribArray(G)}))};p.M=function(){h=-1;p.ya.forEach(function(G){0!==G&&e.disableVertexAttribArray(G)})};p.zi=!0}function r(e,p){m(e,p);p.set();h=-1;return p}function n(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:B.high}}function g(){D.j("s107",[{type:"1i",name:"u1",value:0}]);D.j("s108",[{type:"1i",name:"u161",value:0}]);D.j("s109",[{type:"1i",name:"u81",value:0}])}function l(){var e=
"u42 u152 u153 u154 u155 u43 u86".split(" ").concat(x,A);k.s110={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",v:"attribute vec3 a0;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u158,u159,u154,u155,u71;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,p);vec2 f=u93*e;vec3 c=u93*o;vec2 t=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,q).rgb+vec3(u87,0.,0.),u90,c);float u=mix(texture2D(u42,r).r,0.,u93);a.z+=u;mat3 v=s(a);vec3 w=mix(u152,u91,c);float x=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u89,1.,u93);vec2 j=u88/t;vec3 k=a0;float A=max(0.,-a0.z-u154)*u155;k.x+=A*sign(a0.x)*(1.-u93);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u158,u159,a0.z);}",
i:["u158","u159"].concat(e),K:["a0"],precision:B.high};k.s111={name:"_",g:"uniform sampler2D u1;uniform vec3 u156,u77;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 f=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,f,u77.x);float c=a.a,g=dot(a.rgb,vec3(.333)),d=1.-u77.y*g;c*=d;float h=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(h),b,vec3(d));vec3 i=u77.z*vec3(.25);b=max(b,i);vec4 j=vec4(b,c);gl_FragColor=j;}",v:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u154,u155,u71;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,n);vec2 f=u93*e;vec3 c=u93*m;vec2 r=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,o).rgb+vec3(u87,0.,0.),u90,c);float s=mix(texture2D(u42,p).r,0.,u93);a.z+=s;mat3 t=q(a);vec3 u=mix(u152,u91,c);float v=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u89,1.,u93);vec2 j=u88/r;vec3 k=a0;float y=max(0.,-a0.z-u154)*u155;k.x+=y*sign(a0.x)*(1.-u93);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u156"].concat(H,e),K:["a0","a1"],S:[3,2],precision:B.low};k.s112={name:"_",g:"uniform vec3 u156;void main(){gl_FragColor=vec4(u156,1.);}",v:"attribute vec3 a0;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u154,u155,u71;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,m);vec2 f=u93*e;vec3 c=u93*l;vec2 q=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,n).rgb+vec3(u87,0.,0.),u90,c);float r=mix(texture2D(u42,o).r,0.,u93);a.z+=r;mat3 s=p(a);vec3 t=mix(u152,u91,c);float u=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u89,1.,u93);vec2 j=u88/q;vec3 k=a0;float x=max(0.,-a0.z-u154)*u155;k.x+=x*sign(a0.x)*(1.-u93);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(A,1.));}",
i:["u156"].concat(e),S:[3],precision:B.low};k.s113={name:"_",g:"uniform vec4 u14;varying vec3 vv0;varying float vv1;void main(){float a=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",v:"attribute vec3 a0,a2;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u154,u155,u71;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,p);vec2 f=u93*e;vec3 c=u93*o;vec2 t=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,q).rgb+vec3(u87,0.,0.),u90,c);float u=mix(texture2D(u42,r).r,0.,u93);a.z+=u;mat3 h=s(a);vec3 v=mix(u152,u91,c);float w=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u89,1.,u93);vec2 k=u88/t;vec3 l=a0;float z=max(0.,-a0.z-u154)*u155;l.x+=z*sign(a0.x)*(1.-u93);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u14","u86"].concat(e),K:["a0","a2"],precision:B.high};k.s114={name:"_",g:"uniform sampler2D u161;uniform vec4 u14;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u161,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv3);gl_FragColor=vec4(a,m);}",v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u154,u155,u71;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,r);vec2 f=u93*e;vec3 c=u93*q;vec2 v=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,s).rgb+vec3(u87,0.,0.),u90,c);float w=mix(texture2D(u42,t).r,0.,u93);a.z+=w;mat3 h=u(a);vec3 x=mix(u152,u91,c);float y=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u89,1.,u93);vec2 k=u88/v;vec3 l=a0;float B=max(0.,-a0.z-u154)*u155;l.x+=B*sign(a0.x)*(1.-u93);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u14","u86","u161"].concat(e),K:["a3","a0","a2","a1"],S:[4,3,3,2],precision:B.high};k.s115={name:"_",g:"uniform vec4 u120;uniform float u157;void main(){float b=u157;vec4 a=u120;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",v:"attribute vec3 a0;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u154,u155,u71;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,m);vec2 f=u93*e;vec3 c=u93*l;vec2 q=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,n).rgb+vec3(u87,0.,0.),u90,c);float r=mix(texture2D(u42,o).r,0.,u93);a.z+=r;mat3 s=p(a);vec3 t=mix(u152,u91,c);float u=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u89,1.,u93);vec2 j=u88/q;vec3 k=a0;float x=max(0.,-a0.z-u154)*u155;k.x+=x*sign(a0.x)*(1.-u93);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(A,1.));}",
i:["u120","u157"].concat(e),precision:B.low};k.s116={name:"_",g:"uniform sampler2D u81;uniform vec4 u120,u82;uniform float u157;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u157;vec4 a=u120,d=texture2D(u81,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u82*e),c=mix(c,l,u82.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
v:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u154,u155,u71;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,n);vec2 f=u93*e;vec3 c=u93*m;vec2 r=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,o).rgb+vec3(u87,0.,0.),u90,c);float s=mix(texture2D(u42,p).r,0.,u93);a.z+=s;mat3 t=q(a);vec3 u=mix(u152,u91,c);float v=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u89,1.,u93);vec2 j=u88/r;vec3 k=a0;float y=max(0.,-a0.z-u154)*u155;k.x+=y*sign(a0.x)*(1.-u93);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u120","u157"].concat(t,e),K:["a0","a1"],S:[3,2],precision:B.low};e=["u145","u133","u146"];k.s117={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",v:"attribute vec3 a0;uniform mat4 u145,u133,u146;varying vec3 vv0;varying float vv1;void main(){vec4 a=u146*vec4(a0,1.);gl_Position=u145*u133*a,vv0=a.xyz,vv1=1.;}",i:e,precision:B.high};k.s118={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",v:"attribute vec3 a0,a2;uniform mat4 u145,u133,u146;varying vec3 vv0;varying float vv1;void main(){vec4 a=u146*vec4(a2,0.);gl_Position=u145*u133*u146*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:e,K:["a0","a2"],precision:B.high};k.s108={name:"_",g:"uniform sampler2D u161;uniform vec3 u162;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u162),c=normalize(vv2),b=texture2D(u161,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u146*vec4(a2,0.),a=u146*vec4(a0,1.);gl_Position=u145*u133*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u161","u162"].concat(e),K:["a0","a2","a1","a3"],precision:B.high};k.s107={name:"_",g:"uniform sampler2D u1;uniform vec3 u156,u77;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 f=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,f,u77.x);float c=a.a,g=dot(a.rgb,vec3(.333)),d=1.-u77.y*g;c*=d;float h=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(h),b,vec3(d));vec3 i=u77.z*vec3(.25);b=max(b,i);vec4 j=vec4(b,c);gl_FragColor=j;}",v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u145*u133*u146*vec4(a0,1.)+f,vv0=a1;}",
i:["u156"].concat(H,e),K:["a0","a1"],Ka:[{search:"0.0005",replace:Ka.ka()?"0.0005":"0.0"}],precision:B.low};k.s119={name:"_",g:"uniform vec4 u120;uniform float u157;void main(){float b=u157;vec4 a=u120;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",v:"attribute vec3 a0;uniform mat4 u145,u133,u146;void main(){gl_Position=u145*u133*u146*vec4(a0,1.);}",i:["u120"].concat(e),precision:B.high};k.s109={name:"_",g:"uniform sampler2D u81;uniform vec4 u120,u82;uniform float u157;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u157;vec4 a=u120,d=texture2D(u81,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u82*e),c=mix(c,l,u82.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec2 vv0;void main(){gl_Position=u145*u133*u146*vec4(a0,1.),vv0=a1;}",i:["u120"].concat(t,e),K:["a0","a1"],S:[3,2],precision:B.high}}function q(){for(var e in k)m(c,k[e])}var w=!1,H=["u1","u77"],t=["u81","u82"],x="u83 u84 u85 u86 u87 u88 u89".split(" "),A="u90 u91 u92 u93 u94 u95".split(" "),k={},h=-1,E=null,L=0,B={high:"highp",Oq:"mediump",low:"lowp"},D={pa:function(e,p){k[e]=p;w&&m(c,k[e])},Uq:function(e,p){k[e]=p;p.zi=!1;
m(c,k[e])},Db:function(){return w},m:function(){k.s0=n();k.s75={name:"_",g:"uniform sampler2D u1;uniform vec2 u96;uniform float u97;varying vec2 vv0;void main(){vec4 a=texture2D(u1,u96*vv0);gl_FragColor=vec4(pow(a.rgb,u97*vec3(1.)),a.a);}",i:["u1","u97","u96"],precision:B.high};k.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:B.low};k.s76={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",
i:["u1"],precision:B.low};k.s77={name:"_",g:"uniform sampler2D u1,u13;uniform float u14;varying vec2 vv0;const vec3 f=vec3(1.);void main(){gl_FragColor=vec4(mix(texture2D(u13,vv0).rgb,texture2D(u1,vv0).rgb,u14*f),1.);}",i:["u1","u13","u14"],precision:B.high};k.s78={name:"_",g:"uniform sampler2D u1,u13;uniform float u14;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u13,vv0),texture2D(u1,vv0),u14*f);}",i:["u1","u13","u14"],precision:B.high};k.s12={name:"_",g:"uniform sampler2D u1,u98;uniform vec2 u99;uniform float u100;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 b=texture2D(u98,vv0*u99),c=texture2D(u1,vv0*u99);float a=smoothstep(u100,0.,vv0.y);a+=smoothstep(1.-u100,1.,vv0.y),gl_FragColor=mix(c,b,a*f);}",
i:["u1","u99","u98","u100"],precision:B.high};k.s80={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:B.low};k.s81={name:"_",g:"uniform sampler2D u1,u101;uniform vec2 u15;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u15*f).rgb+texture2D(u1,a+u15*g).rgb+texture2D(u1,a+u15*h).rgb+texture2D(u1,a+u15*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u15"],precision:B.low};k.s82={name:"_",g:"uniform sampler2D u1,u101,u42;uniform vec2 u15,u102;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u15*f).rgb+texture2D(u1,a+u15*g).rgb+texture2D(u1,a+u15*h).rgb+texture2D(u1,a+u15*i).rgb;float c=texture2D(u42,vec2(.5,.5)).a,d=u102.x+pow(c,2.)*(u102.y-u102.x);vec3 j=mix(b/5.,texture2D(u101,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u101","u15","u42","u102"],precision:B.low};k.s83={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u15).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u15).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u15).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u15).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u15;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u15"],precision:B.low};k.s84={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u15*f)+texture2D(u1,a+u15*g)+texture2D(u1,a+u15*h)+texture2D(u1,a+u15*i);gl_FragColor=b/5.;}",i:["u1","u15"],precision:B.low};k.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:B.high};k.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:B.high};k.s85={name:"_",g:"uniform sampler2D u1;uniform vec2 u96;uniform float u97;varying vec2 vv0;const vec3 j=vec3(0.),f=vec3(1.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0*u96).rgb,b=pow(a,u97*f);gl_FragColor=g(b);}",
i:["u1","u97","u96"],precision:B.high};k.s86={name:"_",g:"uniform sampler2D u103,u104;uniform float u105,u106;varying vec2 vv0;void main(){vec3 a=texture2D(u104,vv0).rgb,b=texture2D(u103,vv0).rgb;gl_FragColor=vec4(b*u106+u105*a,1.);}",i:["u103","u104","u105","u106"],precision:B.high};k.s87={name:"_",g:"uniform sampler2D u107,u108;uniform float u97;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u108,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u107,g).rgb,u97*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u107","u108","u97"],precision:B.low,Ka:[{search:"8888",replace:W.Vm[ja.X()]}]};k.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u15).a+.110236*texture2D(u1,vv0-2.*u15).a+.220472*texture2D(u1,vv0-u15).a+.275591*a.a+.220472*texture2D(u1,vv0+u15).a+.110236*texture2D(u1,vv0+2.*u15).a+.031496*texture2D(u1,vv0+3.*u15).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u15"],precision:B.low};k.s89={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:B.low};k.s90={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u15)+.110236*texture2D(u1,vv0-2.*u15)+.220472*texture2D(u1,vv0-u15)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u15)+.110236*texture2D(u1,vv0+2.*u15)+.031496*texture2D(u1,vv0+3.*u15);gl_FragColor=a;}",i:["u1","u15"],precision:B.low};k.s91={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u15)+texture2D(u1,vv0-2.*u15)+texture2D(u1,vv0-u15)+texture2D(u1,vv0)+texture2D(u1,vv0+u15)+texture2D(u1,vv0+2.*u15)+texture2D(u1,vv0+3.*u15);gl_FragColor=a/7.;}",
i:["u1","u15"],precision:B.low};k.s92={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:B.high};k.s93={name:"_",g:"uniform sampler2D u1,u98;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u98,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u98"],precision:B.high};k.s94={name:"_",g:"uniform sampler2D u1,u98;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u98,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u98"],precision:B.high};k.s95=
{name:"_",g:"uniform sampler2D u1,u109,u2,u110;uniform vec4 u111;uniform vec2 u112;uniform float u113,u114,u115,u116;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u109,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u110,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u112*.5+h).r,l=atan(a.x,a.y),m=-(mod(u113,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u114,b),c=.5+u116*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u111*k;gl_FragColor=mix(d,o,j*u115);}",
i:"u1 u2 u110 u109 u111 u113 u114 u115 u112 u116".split(" "),precision:B.low};var e="u117 u118 u119 u120 u107 u121 u3 u122 u109 u123 u124 u125 u126 u127 u15".split(" ");W.ga_&&(k.s96={name:"_",g:"uniform sampler2D u117,u118,u119,u120,u107,u121,u128,u109;uniform vec3 u122,u125;uniform vec2 u15;uniform float u3,u129,u124,u126,u123;varying vec2 vv0;const float i=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/i,1.-c/i);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/i,j=h/i,k=pow(2.,b)/u123;c=(1.-k)*c;return f+vec2(c,j)*d;}void main(){vec4 c=texture2D(u117,vv0);vec3 j=texture2D(u109,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(j,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u122;vec4 b=texture2D(u120,vv0),k=texture2D(u118,vv0);vec3 d=k.rgb;float m=k.a;vec4 n=texture2D(u119,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),f=floor(p/16.),E=(p-16.*f)/16.;f/=16.;float F=b.a;vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u121,G)),r=normalize(B),g=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u124-u126,u124+u126,I);g=mix(l(texture2D(u107,H)),u125,J);float a=o+(E-o)*pow(1.-dot(d,-r),f*16.);a=clamp(a,0.,1.),m*=n.a;float t=1.-u129*texture2D(u128,vv0).r;g*=pow(t,2.),q*=t;vec3 h=C*mix(q,g,a),M=mix(j,h,z*(m*(1.-a)+a));float K=dot(h,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(h,L);}",
i:e.concat(["u128","u129"]),precision:B.high});k.s97={name:"_",g:"uniform sampler2D u117,u118,u119,u120,u107,u121,u109;uniform vec3 u122,u125;uniform vec2 u15;uniform float u3,u124,u126,u127,u130,u131,u123,u132;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),l=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 q(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 b,float c){float a=pow(2.,c),e=u123/8.;a=min(a,e);vec2 f=vec2(1.,.5)/a,h=vec2(-.5/u123,1.-1./a-.5/u123);float i=atan(b.x,b.z),j=acos(-b.y);vec2 k=vec2(.5+.5*i/g,j/g);return h+k*f;}float m(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float n(vec2 a){float b=texture2D(u117,a).a;return step(.01,b);}vec3 o(vec2 a){return texture2D(u109,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u117,vv0);if(h.a<.01)gl_FragColor=vec4(o(vv0),0.);float i=h.a;vec3 L=h.rgb,M=L+u122;vec4 c=texture2D(u120,vv0),r=texture2D(u118,vv0);vec3 a=r.rgb;float s=r.a;vec4 j=texture2D(u119,vv0);vec3 e=j.rgb;if(i>1.){gl_FragColor=vec4(mix(o(vv0),e,j.a),1.);return;}e=pow(e,u130*l);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),k=floor(u/16.),P=(u-16.*k)/16.;k/=16.;vec2 v=vv0+vec2(-1.,0.)*u15,w=vv0+vec2(1.,0.)*u15,x=vv0+vec2(0.,1.)*u15,y=vv0+vec2(0.,-1.)*u15;vec3 Q=texture2D(u118,v).rgb,R=texture2D(u118,w).rgb,S=texture2D(u118,x).rgb,T=texture2D(u118,y).rgb;float U=m(a,Q)*n(v),V=m(a,R)*n(w),W=m(a,S)*n(x),X=m(a,T)*n(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=q(texture2D(u121,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u124-u126,u124+u126,fa);vec3 ha=q(texture2D(u107,ea));A=mix(ha,u125,ga_*u127);float b=t+(P-t)*pow(1.+dot(a,z),k*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u15.y/u15.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03,s*=j.a;vec3 ka=e*mix(ca,A,b);float p=i*(s*(1.-b)+b);vec3 f=mix(o(C),pow(ka,l/u130),p);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*l,f,mix(1.,u131,p)*l);float ma=mix(la,p,u132);gl_FragColor=vec4(f,ma);}",
i:e.concat(["u132","u130","u131"]),precision:B.high};W.ga_&&(k.s98={name:"_",g:"uniform sampler2D u117,u118;uniform mat4 u133;uniform vec2 u134,u15,u135;uniform float u136,u137,u138,u139,u140,u141,u142,u143,u129;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u135;vec4 pos=texture2D(u117,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u136),s=sin(u136);vec3 no0=texture2D(u118,uvt).rgb;float zv=(u133*vec4(co0,1.)).z;vec3 co;vec2 scale=u134/abs(zv),uv,duv=u15*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u117,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u142,u143,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u117,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u142,u143,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u15*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u117,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u142,u143,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u117,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u142,u143,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u139,u140,1.),ao=dzFactor*clamp(u138*omegaMin*u141,0.,u129);gl_FragColor=vec4(ao,ao,ao,u137);}",
i:"u117 u118 u138 u137 u136 u15 u144 u139 u140 u141 u142 u143 u133 u134 u129".split(" "),Ka:[{search:"8888.8",replace:W.Vk[ja.X()].toFixed(1)}],precision:B.low},k.s99={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u15*f)+texture2D(u1,a+u15*g)+texture2D(u1,a+u15*h)+texture2D(u1,a+u15*i);b+=texture2D(u1,a+u15*j)+texture2D(u1,a+u15*k)+texture2D(u1,a+u15*l)+texture2D(u1,a+u15*m),gl_FragColor=b/9.;}",
i:["u1","u15"],precision:B.low});k.s100={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",v:"attribute vec3 a0;uniform mat4 u145,u133,u146;varying vec3 vv0;void main(){vec4 a=u145*u133*u146*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u145","u133","u146"],precision:B.low};k.s101={name:"_",g:"uniform sampler2D u147,u121,u108;uniform mat4 u145,u148;uniform vec2 u149;uniform float u150;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u149*(z-f),0.),B=vec3(u148*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u108,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u145*u,i=h.xyz/h.w;if(texture2D(u147,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u148*vec4(g,0.)),t+=texture2D(u121,y(s));}gl_FragColor=vec4(u150*t.rgb/n,1.);}",
i:"u147 u121 u108 u145 u148 u149 u150".split(" "),Ka:[{search:"8888.8",replace:W.Yo[ja.X()].toFixed(1)},{search:"9999.9",replace:W.Zo[ja.X()].toFixed(1)}],precision:B.low};k.s102={name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u15)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u15);gl_FragColor=a;}",i:["u1","u15"],precision:B.low};k.s103={name:"_",g:"uniform sampler2D u1,u151;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u145,u133;varying vec2 vv0;void main(){vec4 a=u145*u133*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u145","u133","u1"],K:["a0","a1"],precision:B.low};if(ja.da()){e="u42 u152 u153 u154 u155 u43 u120 u156 u157 u14 u158 u159 u86".split(" ").concat(x,A);ja.Li()||(k.s104={name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:B.low,fa:!0});k.s105={name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],fa:!0};k.s106NNGLcolor={name:"_",g:"uniform vec4 u120,u14;uniform vec3 u156;uniform float u157;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv3),c=u157;vec4 a=u120;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u156,1.),gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u158,u159,u154,u155,u71;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,s);vec2 f=u93*e;vec3 c=u93*r;vec2 w=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,t).rgb+vec3(u87,0.,0.),u90,c);float x=mix(texture2D(u42,u).r,0.,u93);a.z+=x;mat3 h=v(a);vec3 y=mix(u152,u91,c);float z=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u89,1.,u93);vec2 k=u88/w;vec3 l=a0;float C=max(0.,-a0.z-u154)*u155;l.x+=C*sign(a0.x)*(1.-u93);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u158,u159,a0.z),vv0=m,vv3=a0.y;}",
i:e,K:["a0","a2"],S:[3,3],fa:!0};k.s106NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u120,u14;uniform vec3 u156,u77;uniform float u157;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float k=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv4),l=u157;vec4 c=u120;float m=floor(15.99*l),n=floor(15.99*c.b);c.b=(m+16.*n)/255.;vec4 a=texture2D(u1,vv2);vec3 o=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,o,u77.x);float d=a.a,p=dot(a.rgb,vec3(.333)),e=1.-u77.y*p;d*=e;float q=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(q),b,vec3(e));vec3 r=u77.z*vec3(.25);b=max(b,r);vec4 s=vec4(b,d);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),k),gl_FragData[2]=s,gl_FragData[3]=c;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u158,u159,u154,u155,u71;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,t);vec2 f=u93*e;vec3 c=u93*s;vec2 x=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,u).rgb+vec3(u87,0.,0.),u90,c);float y=mix(texture2D(u42,v).r,0.,u93);a.z+=y;mat3 h=w(a);vec3 z=mix(u152,u91,c);float A=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u89,1.,u93);vec2 k=u88/x;vec3 l=a0;float D=max(0.,-a0.z-u154)*u155;l.x+=D*sign(a0.x)*(1.-u93);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u158,u159,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:e.concat(H),K:["a0","a2","a1"],S:[3,3,2],fa:!0};k.s106NNGLtextureNormalMap={name:"_",g:"uniform sampler2D u1,u161;uniform vec4 u120,u14;uniform vec3 u156,u77;uniform float u157;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 o=vec3(1.);void main(){float p=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv5);vec3 B=vec3(0.,0.,-1.),g=normalize(vv2),c=texture2D(u161,vv3).xyz;c=normalize(c*255./127.-1.007874*o);vec3 h=vv0.xyz,q=cross(g,h)*vv0.w;mat3 r=mat3(h,q,g);vec3 s=r*c;float t=u157;vec4 d=u120;float u=floor(15.99*t),v=floor(15.99*d.b);d.b=(u+16.*v)/255.;vec4 a=texture2D(u1,vv3);vec3 w=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,w,u77.x);float i=a.a,x=dot(a.rgb,vec3(.333)),j=1.-u77.y*x;i*=j;float y=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(y),b,vec3(j));vec3 z=u77.z*vec3(.25);b=max(b,z);vec4 A=vec4(b,i);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(s,p),gl_FragData[2]=A,gl_FragData[3]=d;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u158,u159,u154,u155,u71;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,u);vec2 f=u93*e;vec3 c=u93*t;vec2 y=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,v).rgb+vec3(u87,0.,0.),u90,c);float z=mix(texture2D(u42,w).r,0.,u93);a.z+=z;mat3 h=x(a);vec3 A=mix(u152,u91,c);float B=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u89,1.,u93);vec2 k=u88/y;vec3 l=a0;float E=max(0.,-a0.z-u154)*u155;l.x+=E*sign(a0.x)*(1.-u93);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u158,u159,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:e.concat(H,["u161"]),K:["a3","a0","a2","a1"],S:[4,3,3,2],fa:!0};k.s106NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u81;uniform vec4 u120,u14,u82;uniform vec3 u156,u77;uniform float u157;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float p=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv4),e=u157;vec4 c=u120,f=texture2D(u81,vv2);vec2 d=j(f.b,4.);float q=1.-d.x,r=d.y;d=j(f.a,1.);float s=d.x,g=d.y;vec4 t=vec4(f.rg,r,s);float u=q;c=mix(c,t,u82*g),e=mix(e,u,u82.b*g);float v=floor(15.99*e),w=floor(15.99*c.b);c.b=(v+16.*w)/255.;vec4 a=texture2D(u1,vv2);vec3 x=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,x,u77.x);float h=a.a,y=dot(a.rgb,vec3(.333)),k=1.-u77.y*y;h*=k;float z=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(z),b,vec3(k));vec3 A=u77.z*vec3(.25);b=max(b,A);vec4 B=vec4(b,h);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),p),gl_FragData[2]=B,gl_FragData[3]=c;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u158,u159,u154,u155,u71;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,t);vec2 f=u93*e;vec3 c=u93*s;vec2 x=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,u).rgb+vec3(u87,0.,0.),u90,c);float y=mix(texture2D(u42,v).r,0.,u93);a.z+=y;mat3 h=w(a);vec3 z=mix(u152,u91,c);float A=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u89,1.,u93);vec2 k=u88/x;vec3 l=a0;float D=max(0.,-a0.z-u154)*u155;l.x+=D*sign(a0.x)*(1.-u93);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u158,u159,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:e.concat(H,t),K:["a0","a2","a1"],S:[3,3,2],fa:!0};k.s106NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u161,u81;uniform vec4 u120,u14,u82;uniform vec3 u156,u77;uniform float u157;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 t=vec3(1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float u=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv5);vec3 K=vec3(0.,0.,-1.),h=normalize(vv2),e=texture2D(u161,vv3).xyz;e=normalize(e*255./127.-1.007874*t);vec3 l=vv0.xyz,v=cross(h,l)*vv0.w;mat3 w=mat3(l,v,h);vec3 x=w*e;float f=u157;vec4 c=u120,g=texture2D(u81,vv3);vec2 d=k(g.b,4.);float y=1.-d.x,z=d.y;d=k(g.a,1.);float A=d.x,m=d.y;vec4 B=vec4(g.rg,z,A);float C=y;c=mix(c,B,u82*m),f=mix(f,C,u82.b*m);float D=floor(15.99*f),E=floor(15.99*c.b);c.b=(D+16.*E)/255.;vec4 a=texture2D(u1,vv3);vec3 F=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,F,u77.x);float n=a.a,G=dot(a.rgb,vec3(.333)),o=1.-u77.y*G;n*=o;float H=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(H),b,vec3(o));vec3 I=u77.z*vec3(.25);b=max(b,I);vec4 J=vec4(b,n);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(x,u),gl_FragData[2]=J,gl_FragData[3]=c;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u160;uniform float u153,u158,u159,u154,u155,u71;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,u);vec2 f=u93*e;vec3 c=u93*t;vec2 y=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,v).rgb+vec3(u87,0.,0.),u90,c);float z=mix(texture2D(u42,w).r,0.,u93);a.z+=z;mat3 h=x(a);vec3 A=mix(u152,u91,c);float B=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u89,1.,u93);vec2 k=u88/y;vec3 l=a0;float E=max(0.,-a0.z-u154)*u155;l.x+=E*sign(a0.x)*(1.-u93);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u158,u159,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:e.concat(H,["u161"],t),K:["a3","a0","a2","a1"],S:[4,3,3,2],fa:!0};e="u145 u133 u146 u120 u156 u157 u14".split(" ");k.s106color={name:"_",g:"uniform vec4 u120,u14;uniform vec3 u156;uniform float u157;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv3),c=u157;vec4 a=u120;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u156,1.),gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;uniform mat4 u145,u133,u146;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u146*vec4(a0,1.),b=u146*vec4(a2,0.);gl_Position=u145*u133*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:e,K:["a0","a2"],fa:!0};k.s106={name:"_",g:"uniform sampler2D u1;uniform vec4 u120,u14;uniform vec3 u156,u77;uniform float u157;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float k=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv4),l=u157;vec4 c=u120;float m=floor(15.99*l),n=floor(15.99*c.b);c.b=(m+16.*n)/255.;vec4 a=texture2D(u1,vv2);vec3 o=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,o,u77.x);float d=a.a,p=dot(a.rgb,vec3(.333)),e=1.-u77.y*p;d*=e;float q=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(q),b,vec3(e));vec3 r=u77.z*vec3(.25);b=max(b,r);vec4 s=vec4(b,d);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),k),gl_FragData[2]=s,gl_FragData[3]=c;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u146*vec4(a0,1.),b=u146*vec4(a2,0.);gl_Position=u145*u133*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:e.concat(H),K:["a0","a2","a1"],fa:!0};var p=["u161","u162"];k.s106NormalMap={name:"_",g:"uniform sampler2D u1,u161;uniform vec4 u120,u14;uniform vec3 u162,u156,u77;uniform float u157;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 o=vec3(1.);void main(){float p=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv5);vec3 B=vec3(0.,0.,-1.),g=normalize(vv2),c=texture2D(u161,vv3).xyz;c=normalize(c*255./127.-1.007874*o);vec3 h=vv0.xyz,q=cross(g,h)*vv0.w;mat3 r=mat3(h,q,g);vec3 s=r*c;float t=u157;vec4 d=u120;float u=floor(15.99*t),v=floor(15.99*d.b);d.b=(u+16.*v)/255.;vec4 a=texture2D(u1,vv3);vec3 w=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,w,u77.x);float i=a.a,x=dot(a.rgb,vec3(.333)),j=1.-u77.y*x;i*=j;float y=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(y),b,vec3(j));vec3 z=u77.z*vec3(.25);b=max(b,z);vec4 A=vec4(b,i);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(s,p),gl_FragData[2]=A,gl_FragData[3]=d;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u146*vec4(a0,1.),b=u146*vec4(a2,0.);gl_Position=u145*u133*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:e.concat(H,p),K:["a0","a2","a1","a3"],fa:!0};k.s106ParamsMap={name:"_",g:"uniform sampler2D u1,u81;uniform vec4 u120,u14,u82;uniform vec3 u156,u77;uniform float u157;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float p=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv4),e=u157;vec4 c=u120,f=texture2D(u81,vv2);vec2 d=j(f.b,4.);float q=1.-d.x,r=d.y;d=j(f.a,1.);float s=d.x,g=d.y;vec4 t=vec4(f.rg,r,s);float u=q;c=mix(c,t,u82*g),e=mix(e,u,u82.b*g);float v=floor(15.99*e),w=floor(15.99*c.b);c.b=(v+16.*w)/255.;vec4 a=texture2D(u1,vv2);vec3 x=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,x,u77.x);float h=a.a,y=dot(a.rgb,vec3(.333)),k=1.-u77.y*y;h*=k;float z=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(z),b,vec3(k));vec3 A=u77.z*vec3(.25);b=max(b,A);vec4 B=vec4(b,h);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),p),gl_FragData[2]=B,gl_FragData[3]=c;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u146*vec4(a0,1.),b=u146*vec4(a2,0.);gl_Position=u145*u133*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:e.concat(H,t),K:["a0","a2","a1"],fa:!0};k.s106NormalParamsMap={name:"_",g:"uniform sampler2D u1,u161,u81;uniform vec4 u120,u14,u82;uniform vec3 u162,u156,u77;uniform float u157;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 t=vec3(1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float u=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv5);vec3 K=vec3(0.,0.,-1.),h=normalize(vv2),e=texture2D(u161,vv3).xyz;e=normalize(e*255./127.-1.007874*t);vec3 l=vv0.xyz,v=cross(h,l)*vv0.w;mat3 w=mat3(l,v,h);vec3 x=w*e;float f=u157;vec4 c=u120,g=texture2D(u81,vv3);vec2 d=k(g.b,4.);float y=1.-d.x,z=d.y;d=k(g.a,1.);float A=d.x,m=d.y;vec4 B=vec4(g.rg,z,A);float C=y;c=mix(c,B,u82*m),f=mix(f,C,u82.b*m);float D=floor(15.99*f),E=floor(15.99*c.b);c.b=(D+16.*E)/255.;vec4 a=texture2D(u1,vv3);vec3 F=mix(u156,a.rgb,a.a),b=mix(a.rgb*u156,F,u77.x);float n=a.a,G=dot(a.rgb,vec3(.333)),o=1.-u77.y*G;n*=o;float H=min(a.b,min(a.r,a.g));b=mix(b-.5*vec3(H),b,vec3(o));vec3 I=u77.z*vec3(.25);b=max(b,I);vec4 J=vec4(b,n);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(x,u),gl_FragData[2]=J,gl_FragData[3]=c;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u145,u133,u146;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u146*vec4(a0,1.),b=u146*vec4(a2,0.);gl_Position=u145*u133*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:e.concat(H,p,t),K:["a0","a2","a1","a3"],fa:!0}}else l();q();e=[{type:"1i",name:"u1",value:0}];D.j("s0",e);D.j("s75",e);D.j("s1",e);D.j("s77",[{type:"1i",name:"u13",value:1}].concat(e));D.j("s78",[{type:"1i",
name:"u13",value:1}].concat(e));D.j("s12",[{type:"1i",name:"u98",value:1}].concat(e));D.j("s80",e);D.j("s81",e);D.j("s82",[{type:"1i",name:"u101",value:1},{type:"1i",name:"u42",value:2}].concat(e));D.j("s83",e);D.j("s84",e);D.j("s13",e);D.j("s85",e);D.j("s86",[{type:"1i",name:"u103",value:0},{type:"1i",name:"u104",value:1}]);D.j("s87",[{type:"1i",name:"u107",value:0},{type:"1i",name:"u108",value:1}]);D.j("s88",e);D.j("s89",e);D.j("s90",e);D.j("s91",e);D.j("s92",e);D.j("s93",[{type:"1i",name:"u98",
value:1}].concat(e));D.j("s94",[{type:"1i",name:"u98",value:1}].concat(e));W.ga_&&(D.j("s98",[{type:"1i",name:"u117",value:0},{type:"1i",name:"u118",value:1},{type:"1f",name:"u139",value:W.Jk},{type:"1f",name:"u140",value:W.Kk},{type:"1f",name:"u141",value:W.Wk},{type:"1f",name:"u142",value:W.Nk},{type:"1f",name:"u143",value:W.Ok},{type:"1f",name:"u138",value:1},{type:"1f",name:"u129",value:1}]),D.j("s99",e));p=[{type:"1i",name:"u117",value:0},{type:"1i",name:"u118",value:1},{type:"1i",name:"u119",
value:2},{type:"1i",name:"u107",value:3},{type:"1i",name:"u121",value:4},{type:"1i",name:"u120",value:6},{type:"1i",name:"u109",value:7},{type:"1f",name:"u127",value:0},{type:"1f",name:"u124",value:0},{type:"1f",name:"u126",value:0}];W.ga_&&D.j("s96",p.concat([{type:"1f",name:"u129",value:W.Mk[ja.X()]},{type:"1i",name:"u128",value:5}]));D.j("s97",p.concat([{type:"1f",name:"u130",value:W.Wc},{type:"1f",name:"u131",value:W.qg},{type:"1f",name:"u132",value:0}]));D.j("s101",[{type:"1i",name:"u147",value:0},
{type:"1i",name:"u121",value:1},{type:"1i",name:"u108",value:2},{type:"1f",name:"u150",value:W.Xo}]);D.j("s102",e);D.j("s103",e);D.j("s95",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u110",value:2},{type:"1i",name:"u109",value:3},{type:"1f",name:"u115",value:1},{type:"2f",name:"u112",value:[0,0]}].concat(e));ja.da()?(D.j("s106",e),D.j("s106NormalMap",[{type:"1i",name:"u161",value:1}].concat(e)),D.j("s106ParamsMap",[{type:"1i",name:"u81",value:1}].concat(e)),D.j("s106NormalParamsMap",[{type:"1i",
name:"u161",value:1},{type:"1i",name:"u81",value:2}].concat(e))):g();w=!0},Ko:function(){l();q();g()},Gd:function(){return E.id},Id:function(){return x},Jd:function(){return A},set:function(e){Db.Lj(D);k[e].set()},Ib:function(e){return r(e,n())},oe:function(e){return r(e,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:B.high})},No:function(e){return r(e,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:B.high,fa:!0})},M:function(){-1!==h&&E.M()},re:function(){var e=0;E.ya.forEach(function(p,z){z=E.S[z];c.vertexAttribPointer(p,z,c.FLOAT,!1,E.fh,e);e+=4*z})},jc:function(){D.kc(c)},kc:function(e){e.vertexAttribPointer(E.ya[0],2,e.FLOAT,!1,8,0)},Yq:function(){c.vertexAttribPointer(E.attributes.a0,3,c.FLOAT,!1,12,0)},Va:function(){c.vertexAttribPointer(E.attributes.a0,3,c.FLOAT,!1,32,0)},gb:function(){c.vertexAttribPointer(E.attributes.a0,3,c.FLOAT,!1,24,0)},Dj:function(){c.vertexAttribPointer(E.attributes.a2,
3,c.FLOAT,!1,32,12)},Ej:function(){c.vertexAttribPointer(E.attributes.a2,3,c.FLOAT,!1,24,12)},Zc:function(){c.vertexAttribPointer(E.attributes.a1,2,c.FLOAT,!1,32,24)},Zq:function(){c.vertexAttribPointer(E.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(E.attributes.a1,2,c.FLOAT,!1,20,12)},yo:function(){c.vertexAttribPointer(E.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(E.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(E.attributes.a1,2,c.FLOAT,!1,32,24)},zo:function(){c.vertexAttribPointer(E.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(E.attributes.a2,3,c.FLOAT,!1,32,12)},Ao:function(){c.vertexAttribPointer(E.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(E.attributes.a2,3,c.FLOAT,!1,24,12)},le:function(){c.vertexAttribPointer(E.attributes.a3,4,c.FLOAT,!1,16,0)},pe:function(e,p){c.uniform1i(E.B[e],p)},D:function(e,p){c.uniform1f(E.B[e],p)},O:function(e,p,z){c.uniform2f(E.B[e],p,z)},Ig:function(e,p){c.uniform2fv(E.B[e],p)},qe:function(e,p,z,P){c.uniform3f(E.B[e],p,z,P)},Jg:function(e,
p){c.uniform3fv(E.B[e],p)},Da:function(e,p){c.uniform4fv(E.B[e],p)},Ro:function(e,p){c.uniformMatrix2fv(E.B[e],!1,p)},So:function(e,p){c.uniformMatrix3fv(E.B[e],!1,p)},$c:function(e,p){c.uniformMatrix4fv(E.B[e],!1,p)},j:function(e,p){D.set(e);p.forEach(function(z){switch(z.type){case "4f":c.uniform4fv(E.B[z.name],z.value);break;case "3f":c.uniform3fv(E.B[z.name],z.value);break;case "2f":c.uniform2fv(E.B[z.name],z.value);break;case "1f":c.uniform1f(E.B[z.name],z.value);break;case "1i":c.uniform1i(E.B[z.name],
z.value);break;case "mat2":c.uniformMatrix2fv(E.B[z.name],!1,z.value);break;case "mat4":c.uniformMatrix4fv(E.B[z.name],!1,z.value)}})},I:function(){for(var e in k){var p=k[e];c.detachShader(p.ra,p.Bf);c.detachShader(p.ra,p.Af);c.deleteShader(p.Bf);c.deleteShader(p.Af);c.deleteProgram(p.ra)}},A:function(){c.disableVertexAttribArray(0);D.M();D.I();L=0;w=!1;E=null;h=-1}};return D}(),Za=function(){var a={},b=[],d=!1,f=0,m=0,r=-1,n=-1,g=1,l=null,q=!1,w=null,H=!1,t=!1,x=!1,A=!1,k=!1,h=!1,E=-1,L=-1,B=!1,
D=!1,e=null,p=null,z=-1,P=-1,G=null,U=-1,N,u=null,y=null,I=null,O=null,T=null,ba=null,fa=null,pa=[{type:"1f",name:"u93",value:0},{type:"1f",name:"u158",value:0},{type:"1f",name:"u159",value:0},{type:"1f",name:"u88",value:1},{type:"1f",name:"u84",value:0},{type:"1f",name:"u85",value:0},{type:"1f",name:"u95",value:1}],V={m:function(F,v){a.Lg=F;ja.ah();Zc.mf();$b.mf(F.Ie);r=F.rf;n=F.Fp;g=F.He;E=F.gg;L=F.hg;var M=[{type:"1f",name:"u88",value:r},{type:"1f",name:"u84",value:E},{type:"1f",name:"u85",value:L},
{type:"1f",name:"u89",value:F.qo},{type:"mat4",name:"u83",value:F.Tn},{type:"2f",name:"u43",value:F.qk}];F.Zg=M;var da=[{type:"3f",name:"u90",value:[0,0,0]},{type:"3f",name:"u91",value:F.jh},{type:"3f",name:"u92",value:F.ih},{type:"1f",name:"u93",value:0},{type:"1f",name:"u94",value:F.Ie},{type:"1f",name:"u95",value:1}];F.ek=da;V.Rm(F,v);d||void 0!==F.Ja||(F.Ja=[0,0,120]);D=B=J.Cf;if(!d&&B){v=1*ja.zb();var ta=1*ja.yb(),ra={isLinear:!0,isPot:!1,width:v,height:ta};e=ca.instance(ra);p=ca.instance(ra);
z=1/v;P=1/ta}M=[{type:"1i",name:"u42",value:1},{type:"3f",name:"u86",value:F.Ja},{type:"1f",name:"u154",value:F.md},{type:"1f",name:"u155",value:F.Qb}].concat(M,da);l=F.Sc;da=[{type:"1f",name:"u158",value:l[0]},{type:"1f",name:"u159",value:l[1]}];ja.da()?(v=[{type:"1i",name:"u1",value:0}],ta=[{type:"1i",name:"u161",value:2}],C.j("s106NNGLcolor",M.concat(da)),C.j("s106NNGLtexture",[].concat(v,M,da)),C.j("s106NNGLtextureNormalMap",[].concat(v,ta,M,da)),C.j("s106NNGLtextureParamsMap",[{type:"1i",name:"u81",
value:2}].concat(v,M,da)),C.j("s106NNGLtextureNormalParamsMap",[{type:"1i",name:"u81",value:3}].concat(v,ta,M,da))):(C.j("s110",M.concat(da)),C.j("s111",[{type:"1i",name:"u1",value:0}].concat(M)),C.j("s112",M),C.j("s113",M),C.j("s114",M.concat([{type:"1i",name:"u161",value:0}])),C.j("s115",M),C.j("s116",M.concat([{type:"1i",name:"u81",value:0}])));C.j("s82",[{type:"2f",name:"u102",value:F.Sg}]);C.j(W.ga_?"s96":"s97",[{type:"1f",name:"u124",value:F.Pe},{type:"3f",name:"u125",value:F.wg},{type:"1f",
name:"u126",value:F.bf},{type:"1f",name:"u127",value:1},{type:"3f",name:"u122",value:F.Ak}]);if(N=F.Yd)G=F.tn,U=F.Zd,C.j("s95",[{type:"4f",name:"u111",value:F.Xd},{type:"1f",name:"u114",value:F.Xf},{type:"2f",name:"u112",value:F.sn},{type:"1f",name:"u116",value:Math.sign(U)}]);b.forEach(function(qa){qa.yj(F)});d=!0},hc:function(F){t&&za.ja.hc(F);A&&za.va.hc(F)},Rm:function(F,v){void 0!==za.ja&&F.mc&&ja.da()&&(za.ja.m(F),H=!0,v.push(function(M){za.ja.hc(M);t=!x}));void 0!==za.va&&F.ud&&(za.va.m(F),
v.push(function(M){za.va.hc(M);A=!0}));void 0!==za.uc&&F.Se&&(za.uc.m(F),h=k=!0);void 0!==za.rb&&(za.rb.m(F),w=za.rb.Tm({width:F.Jc,height:2*F.Jc,depth:1.5*F.Jc,Wl:-F.Gf,Za:F.Ef,Al:F.Ff}),q=!0)},Po:function(F,v,M,da){F&&(fa=F,H&&za.ja.ic(F),A&&za.va.ic(F),k&&za.uc.ic(F),b.forEach(function(ta){ta.ic(F)}));M&&(O=M);da&&(T=da)},Jb:function(F){ja.da()?(C.j("s106NNGLcolor",F),C.j("s106NNGLtexture",F),C.j("s106NNGLtextureNormalMap",F),C.j("s106NNGLtextureParamsMap",F),C.j("s106NNGLtextureNormalParamsMap",
F)):(C.j("s110",F),C.j("s111",F),C.j("s112",F),C.j("s113",F),C.j("s114",F),C.j("s115",F),C.j("s116",F))},ib:function(F,v,M){var da=[F[0]+v[0],F[1]+v[1],F[2]+v[2]];da=[da[0]+M[0],da[1]+M[1],da[2]+M[2]];a.ie=da;a.Cn=v;a.sp=M;V.Jb([{type:"3f",name:"u152",value:da}]);ja.da()&&(H&&za.ja.ib(F,v,M),A&&za.va.ib(da));q&&za.rb.ib(F,M)},jb:function(F,v,M){var da=F*v*M;a.Dn=v;a.tp=M;a.Lm=F;V.Jb([{type:"1f",name:"u153",value:da}]);ja.da()&&(H&&za.ja.jb(F*v,M),A&&za.va.jb(da));q&&za.rb.jb(F,M)},sj:function(){V.ib(a.ie,
a.Cn,a.sp);V.jb(a.Lm,a.Dn,a.tp);V.Jj(a.rx);V.m(a.Lg);V.Fj(a.dl,a.Qb)},Jj:function(F){a.rx=F;V.Jb([{type:"1f",name:"u87",value:F}]);ja.da()&&(H&&za.ja.Gg(F),A&&za.va.Gg(F))},Fj:function(F,v){a.dl=F;a.Qb=v;V.Jb([{type:"1f",name:"u154",value:F},{type:"1f",name:"u155",value:v}])},Ho:function(F){l=F;0===f&&V.Jb([{type:"1f",name:"u158",value:l[0]},{type:"1f",name:"u159",value:l[1]}])},hb:function(F){function v(){q&&za.rb.toggle(!1);N&&C.j("s95",[{type:"1f",name:"u115",value:0}])}0>=F?(m=0,0!==f&&(f=0,$b.ko(),
q&&za.rb.toggle(!0),N&&C.j("s95",[{type:"1f",name:"u115",value:1}]))):1<=F?(m=1,1!==f&&(f=1,$b.Rj(!0)),v()):(m=F,2!==f&&($b.Rj(!1),f=2,v()));C.j("s97",[{type:"1f",name:"u127",value:1-F}]);var M=1-F;pa[0].value=m;pa[1].value=l[0]*M+-300*F;pa[2].value=l[1]*M+-300*F;pa[3].value=r*M+F*n;pa[4].value=E*M;pa[5].value=L*M;pa[6].value=M+F*g;t&&za.ja.Hg(m,pa);A&&za.va.Hg(m,pa);V.Jb(pa)},Tl:function(F){fa.h(1);F.forEach(function(v){v.Ol()});q&&w.W()},mn:function(){return 1===f},Qe:function(F){fa.za(F)},Dk:function(F){b.push(F)},
Qg:function(F){x=!F;t=F&&H},Pg:function(F){h=F&&k},Cg:function(F){A&&ja.da()&&za.va.To(F)},Kb:function(F){ja.da()&&(H&&za.ja.Kb(F),A&&za.va.Kb(F))},Ql:function(F,v){if(!D)return!1;e.J();F.h(0);C.set("s88");C.O("u15",0,P);Y.l(!1,!1);p.u();e.h(0);C.O("u15",z,0);Y.l(!1,!1);C.set("s89");v.J();p.h(0);Y.l(!1,!1);return!0},Qj:function(F){D=F&&B},resize:function(F,v,M){F*=M;v*=M;B&&(e.resize(F,v),p.resize(F,v),z=1/F,P=1/v)},Ag:function(F,v){var M=F.P(),da=F.aa(),ta={width:M,height:da,isPot:!1};H&&(I&&I.remove(),
I=ca.instance(ta));u&&u.remove();u=Ea.instance({width:M,height:da});k||A?(za.uc.Bg(M,da),y&&y.remove(),y=ca.instance(ta)):y=F;H&&za.ja.Bg(M,da);v&&(ba&&ba.remove(),ba=ca.instance(ta))},Ml:function(F){var v=null;switch(f){case 0:v=F;break;case 2:u.bind(!1,!0);ba.u();C.set("s77");C.D("u14",m);F.h(1);T.h(0);Y.l(!0,!0);v=ba;break;case 1:v=T}if(!t||1===f||!ja.da())return v;v.za(0);h&&za.uc.W(v,y);u.bind(!1,!h);A&&(h?v.h(0):(y.u(),C.set("s1"),Y.l(!0,!0)),za.va.W());y.h(0);O.za(2);za.ja.W();I.u();C.set("s1");
h||A?y.h(0):v.h(0);Y.l(!0,!W.ga_);za.ja.add();return I},Ek:function(F,v){if(!t)return F;O.za(2);za.ja.W();Ea.ca();C.set("s76");v.J();za.ja.Em().h(0);Y.l(!0,!0);C.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);F.h(0);Y.l(!1,!1);c.disable(c.BLEND);return v},Rl:function(F,v){if(!N)return!1;C.set("s95");C.D("u113",F*U);G.h(1);Za.Qe(2);y?y.h(3):v.h(3);return!0},A:function(){d=!1;m=f=0;n=r=-1;g=1;l=null;L=E=-1;q=!1;w=null;h=k=A=x=t=H=!1;za.ja.A();za.Na.A()}};return V}(),Ba=function(){function a(){g.forEach(function(v){v.Ul(y)})}
function b(){g.forEach(function(v){v.yd(y)})}function d(){g.forEach(function(v){v.Sl(y)})}function f(){g.forEach(function(v){v.zd(y)})}function m(){y?Za.Tl(g):g.forEach(function(v){v.Pl()})}function r(){U&&clearTimeout(U);U=setTimeout(function(){e=!1;U=null},16)}function n(v){v()}var g=[],l=[],q={ha:!1,position:!1,Gb:!1},w=[],H=[],t=null,x=0,A=null,k=null,h=null,E=null,L=!1,B=!1,D=!1,e=!1,p=!1,z=!1,P=null,G=null,U=null,N=null,u=!1,y=!1,I=!1,O=!1,T=!0,ba=!1,fa=!1,pa=null,V=null,F={m:function(){c.enable(c.DEPTH_TEST);
c.depthFunc(c.LEQUAL);c.clearDepth(1);W.yl?(c.enable(c.CULL_FACE),c.frontFace("CCW"===W.zl?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);F.Fh();var v={isPot:!1,isLinear:!1,width:ja.zb(),height:ja.yb(),L:4,isFloat:!1};A=ca.instance(v);v=Object.assign({},v,{isLinear:!0,width:ja.P(),height:ja.aa()});k=ca.instance(v);h=ca.instance(v);W.Ta&&(v=Object.assign({},v,{isLinear:!1}),E=ca.instance(v));z=Ka.ka();W.Ta||(t=tc.instance({Pb:W.Pb,zc:W.zc,Ac:W.Ac,yc:W.yc}));L=!0},Fh:function(){ja.da()?q=xc.instance({}):
(q.ha=Kb.instance({lc:W.Ta?!1:"s107",isFloat:!1,Yb:!0,clearColor:[0,0,0,0],L:4}),q.position=Kb.instance({lc:W.Ta?!1:"s117",isFloat:!0,Yb:!0,clearColor:[0,0,0,0],L:4}),q.Gb=Kb.instance({lc:!1,isFloat:!0,Yb:!0,clearColor:[0,0,0,0],L:4}),q.Tc=Kb.instance({lc:!1,isFloat:!1,Yb:!0,clearColor:[0,0,0,0],L:4}))},tm:function(){return t},sa:function(v){t=v},rr:function(){},Kb:function(v){Za.Kb(v)},yj:function(v){Za.m(v,w);ja.da()||(q.ha.Kj(!1),q.position.Kj("s110"));y=O=!0},Wq:function(){Za.sj()},Lp:function(v){Za.Dk(v)},
vo:function(v,M,da){Za.ib(v,M,da)},wo:function(v,M,da){Za.jb(v,M,da)},to:function(v,M){Za.Fj(v,M)},uo:function(v){Za.Ho(v)},xo:function(v){Za.Jj(v)},hb:function(v){Za.hb(v)},zj:function(v,M,da,ta){Za.Po(v,M,da,ta);M&&F.Ag(M,ta?!0:!1);I=!0},Qg:function(v){Za.Qg(v)},Cg:function(v){Za.Cg(v)},Pg:function(v){Za.Pg(v)},Qj:function(v){Za.Qj(v)},Mp:function(v){u&&(fa=!0,pa&&pa.remove(),pa=ca.instance({width:N.P(),height:N.aa(),isPot:!1}),V=v)},Ag:function(v,M){N="string"===typeof v?ca.instance({url:v,isFloat:!1}):
v;y&&Za.Ag(N,M);u=!0},Ck:function(v){g.push(v);0!==w.length&&(w.forEach(function(M){M(v)}),w.splice(0,w.length))},eo:function(v){v=g.indexOf(v);-1!==v&&g.splice(v,1)},Np:function(v){l.push(v)},Tq:function(v){v=l.indexOf(v);-1!==v&&l.splice(v,1)},ve:function(v){y&&(B=v)},animate:function(v){!W.Ta||y&&I?B&&(e||x>W.En&&p?(P&&clearTimeout(P),++x,window.cancelAnimationFrame(F.animate),P=setTimeout(function(){window.requestAnimationFrame(F.animate)},16)):(F.nj(v),++x,y||B&&window.requestAnimationFrame(F.animate))):
setTimeout(F.animate,100)},Pp:function(v){H.push(v)},nj:function(v){if((!W.Ta||y&&I)&&L){H.forEach(n);ja.da()?q.set()||ja.oa()?(y||Pc.ho(),m(),q.M(),z&&c.depthMask(!1)):(ja.ip(),F.Fh(),Kb.kd(),C.Ko(),W.Ta&&Za.sj(),c.flush(),window.requestAnimationFrame(F.animate)):(y&&Za.Qe(1),q.ha.set(!0,!0,!0),b(),q.ha.M(),z&&c.depthMask(!1),q.Tc.set(!1,!z,!1),d(),q.Tc.M(),q.position.set(!0,!z,!1),yb.W(),a(),q.position.M(),q.Gb.set(!1,!z,!1),f(),q.Gb.M());c.disable(c.DEPTH_TEST);z||c.depthMask(!1);W.ga_&&Lb.W();
var M=F.ci();if(null!==M){M.h(7);C.set(W.ga_?"s96":"s97");C.O("u15",1/ja.zb(),1/ja.yb());Kb.el();A.J();ba?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),C.D("u132",1)):c.disable(c.BLEND);y||yb.lf();q.position.h(0);q.Gb.h(1);q.ha.h(2);t.nd(3);q.Tc.h(6);t.od(4);t.Kh();W.ga_&&Lb.h(5);Y.l(!0,!0);ba&&C.D("u132",0);Ea.ca();if(ba){c.disable(c.BLEND);var da=Za.Ek(A,k);C.set("s84");h.J();da.h(0);Y.l(!1,!1);k.u();h.h(0);Y.l(!1,!1);k.h(0)}else Za.Ql(A,
k)||(C.set("s1"),k.J(),A.h(0),Y.l(!1,!1)),T?(C.set("s83"),h.J(),k.h(0),Y.l(!1,!1),k.u(),h.h(0),O&&y?(C.set("s82"),E.h(1),Za.Qe(2),Y.l(!1,!1),C.set("s1"),E.J(),k.h(0),Y.l(!1,!1)):(C.set("s81"),Y.l(!1,!1),k.h(0))):k.h(0);Ea.ba();c.viewport(0,0,ja.P(),ja.aa());!ba&&y&&Za.Rl(v,M)||C.set("s1");Y.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},ci:function(){if(!u||ba)return ca.ri();if(!y)return N;if(fa&&!Za.mn()){C.set(V);Ea.ca();pa.ad();pa.u();N.h(0);var v=pa;Y.l(!0,!0)}else v=N;return Za.Ml(v)},
mr:function(){W.Dl||B||(B=!0,F.animate(Date.now()),D||Kc.bp(),D||$b.mb(!1),G&&clearTimeout(G),W.ga_&&Lb.me(),G=setTimeout(F.wa,W.al),D||ja.Nm(),D=!0)},nr:function(){B&&(p=B=!1,cancelAnimationFrame(F.animate))},wa:function(){p||!D||e||W.Hh||(p=e=!0,G&&clearTimeout(G),U&&clearTimeout(U),yb.uf().pj(),G=setTimeout(function(){ja.dh(W.Kn);W.ga_&&Lb.fk();x=0;r()},24))},wake:function(){p&&D&&!e&&(e=!0,p=!1,x=0,yb.uf().pj(),G&&clearTimeout(G),U&&clearTimeout(U),G=setTimeout(function(){ja.dh(1);W.ga_&&Lb.me();
r()},16))},yq:function(){},eq:function(){},ue:function(v){O=v},qr:function(v){T=v},Sj:function(v){ba=v},vr:function(){C.j("s97",[{type:"1f",name:"u130",value:W.Wc},{type:"1f",name:"u131",value:W.qg}])},resize:function(v,M,da){A.resize(v*da,M*da);k.resize(v,M);h.resize(v,M);W.Ta&&E.resize(v,M);Za.resize(v,M,da);v=[{type:"2f",name:"u15",value:[1/v,1/M]}];C.j("s83",v);C.j("s81",v);C.j("s84",v)},I:function(){P&&clearTimeout(P);G&&clearTimeout(G);U&&clearTimeout(U);g.concat(l).forEach(function(v){v.I()});
g.splice(0,g.length);l.splice(0,l.length);q.ha.remove();q.Gb.remove();q.Tc.remove();q.position.remove();A.remove();k.remove();h.remove();E&&E.remove();e=!0},A:function(){F.I();z=p=e=D=B=y=I=e=!1}};return F}(),za={},ja=function(){function a(){Kb.resize(d*l,f*l);A.da()&&xc.resize(d*l,f*l);Ba.resize(d,f,l);W.ga_&&Lb.resize(d*l,f*l,l);A.ah()}var b=null,d=0,f=0,m=-1,r=!1,n={xe:!1,Tg:!1,ck:!1,Mg:!1,drawBuffers:!1,en:!1,Ii:!1,gn:!1,Nf:!1,eb:!1},g=Object.assign({},n),l=1,q=!1,w=!1,H=!1,t=!1,x=!1,A={m:function(k){void 0!==
k.onload&&k.onload&&(w=k.onload);void 0===k.expand&&(k.expand=!1);void 0===k.Od&&(k.Od=!1);void 0===k.ta&&(k.ta=!1);void 0===k.Vb&&(k.Vb=!1);void 0===k.alpha&&(k.alpha=!1);void 0===k.preserveDrawingBuffer&&(k.preserveDrawingBuffer=!1);k.Od&&(r=!0);k.ta?b=k.ta:b=document.getElementById(k.sl);k.expand&&A.expand();try{c=k.Vb?k.Vb.fm():b.getContext("webgl",{antialias:!1,alpha:k.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:k.preserveDrawingBuffer});window.ia||(window.ia=c);t=k.Vb?
k.Vb.oa():!1;H=!t;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&A.vd("too few texture image units");if(!Ka.m())return A.vd("invalid config");W.pp&&(g.Tg=c.getExtension("EXT_texture_filter_anisotropic"),g.Tg&&(g.Ii=!0));W.qp&&(g.xe=c.getExtension("WEBGL_compressed_texture_s3tc"),g.xe&&void 0!==g.xe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&g.xe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(g.en=!0));H&&(g.ck=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),
g.ck&&(g.gn=!0));!t&&W.rp&&(g.Mg=c.getExtension("EXT_sRGB"),g.Mg&&(g.Nf=!0));H?(g.drawBuffers=c.getExtension("WEBGL_draw_buffers"),g.drawBuffers&&!W.Gh&&(g.eb=!0)):g.eb=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(g.eb){var h=A.Fl();g.eb=g.eb&&h}}catch(E){return A.vd(E)}if(null===c||!c)return A.vd("NO_GL");k.expand&&window.addEventListener("resize",A.expand,!1);b.addEventListener("contextmenu",function(E){E.preventDefault();return!1},!1);d=b.width;f=b.height;A.Jf();return!0},Jf:function(){m=r?3:2;Ka.ka()||
(m=Math.min(m,1));Ka.ol()||(m=Math.min(m,0));Zc.m();Kb.m();for(var k in za)za[k].Xc();C.m();yb.m();$b.m();Ba.m();Kc.m();W.ga_&&Lb.m();A.ah();A.Hl();q=!0;w&&w();return!0},Hl:function(){if(g.eb){var k=xc.instance({width:256,height:1});k.bind();c.viewport(0,0,256,1);C.set("s105");C.Da("color",[1,0,0,1]);Y.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Ea.ba();C.set("s1");k.Gb.h(0);Y.l(!1,!1);k=new Uint8Array(1024);c.readPixels(0,0,256,1,c.RGBA,c.UNSIGNED_BYTE,k);x=1>=
k[1020]}},Fl:function(){var k=xc.instance({width:1,height:1});if(!k.set())return k.remove(),!1;C.No(c);Y.Ub(c);c.bindFramebuffer(c.FRAMEBUFFER,null);C.Ib(c);k.ha.za(0);Y.Ub(c);var h=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h);k.remove();return 3<Math.abs(h[0]-127)?!1:!0},oa:function(){return t},P:function(){return d},aa:function(){return f},zb:function(){return l*A.P()},yb:function(){return l*A.aa()},gm:function(){return d/f},X:function(){return m},Gq:function(){return 3===m},
Db:function(){return q},Li:function(){return x},da:function(){return g.eb},ip:function(){g.eb=!1},Jq:function(){return!1},ql:function(){return 0<A.X()},Vp:function(){return A.da()&&0<A.X()},tf:function(k){var h=c,E="";t||(h=g.drawBuffers,E="_WEBGL");return[h["COLOR_ATTACHMENT0"+E],h["COLOR_ATTACHMENT1"+E],h["COLOR_ATTACHMENT2"+E],h["COLOR_ATTACHMENT3"+E]].splice(0,k)},Fd:function(k){return A.tf(4)[k]},Im:function(){return t?c.SRGB?c.SRGB:c.RGBA:g.Nf?g.Mg.SRGB_ALPHA_EXT:c.RGBA},hn:function(){return g.Ii},
lm:function(){return g.Tg},wn:function(k){A.oa()?c.drawBuffers(A.tf(k)):g.drawBuffers.drawBuffersWEBGL(A.tf(k))},expand:function(){Ba.wake();A.resize(window.innerWidth,window.innerHeight);Ba.wa()},resize:function(k,h){!b||k===d&&h===f||(d=k,f=h,b.width=d,b.height=f,q&&(yb.resize(),a()))},ah:function(){var k=[{type:"2f",name:"u15",value:[1/ja.zb(),1/ja.yb()]}];C.j("s83",k);C.j("s81",k)},dh:function(k){l=k;a()},Oa:function(k,h){b.addEventListener(k,h,!1)},vd:function(){m=-1;return!1},Ah:function(){return 0<=
m},Mq:function(){},Xq:function(){},kr:function(){var k=document.getElementById("loading");k&&(k.style.display="block")},Nm:function(){var k=document.getElementById("loading");k&&(k.style.display="none")},I:function(){A.Ah()&&(ca.dk(),Ba.I(),Y.I(),Kb.I(),W.ga_&&Lb.I(),tc.I(),Kc.I(),C.I(),ca.I(),c.flush(),c=null)},A:function(){Ba.A();Za.A();C.A();xc.A();Kb.A();Object.assign(g,n);q=H=!1}};return A}(),yb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(f){void 0===f.qj&&(f.qj=!0);
void 0===f.Le&&(f.Le=.1);void 0===f.Ke&&(f.Ke=100);void 0===f.direction&&(f.direction=[0,0,-1]);void 0===f.bi&&(f.bi=45);var m=new jc,r=new Ya(50,-50,-400),n=null;m.setPosition(r);var g=new Int8Array(20),l=new Int8Array(20),q=0,w=0,H=0,t=0,x={W:function(){l[C.Gd()]||(C.$c("u133",m.elements),l[C.Gd()]=1);g[C.Gd()]||(C.$c("u145",n),g[C.Gd()]=1)},kf:function(){w||(C.$c("u133",m.elements),w=1);q||(C.O("u134",n[0],n[5]),q=1)},lf:function(){H||(C.qe("u122",r.x,r.y,r.z),H=1)},Rb:function(){t||(C.qe("u162",
r.x,r.y,r.z),t=1)},Ch:function(){var A=f.Le,k=f.Ke,h=Math.tan(.5*f.bi*Math.PI/180);n=[1/h,0,0,0,0,ja.gm()/h,0,0,0,0,-(k+A)/(k-A),-1,0,0,-2*k*A/(k-A),0];for(A=0;20>A;++A)g[A]=0;q=0},Io:function(A,k){r.wj(k[0]).xj(k[1]).z=k[2];m.elements.set(A);for(A=0;20>A;++A)l[A]=0;t=H=w=0},pj:function(){for(var A=t=H=0;20>A;++A)l[A]=0}};x.Ch();a=x;b=!0;f.qj&&d.push(x);return x},W:function(){b&&a.W()},kf:function(){b&&a.kf()},lf:function(){b&&a.lf()},Rb:function(){b&&a.Rb()},resize:function(){d.forEach(function(f){f.Ch()})},
uf:function(){return a}}}(),Kb=function(){var a=[],b=null;return{m:function(){b=Ea.instance({width:ja.zb(),height:ja.yb(),Kc:!ja.da()})},instance:function(d){void 0===d.width&&(d.width=ja.zb());void 0===d.height&&(d.height=ja.yb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Yb&&(d.Yb=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.L&&(d.L=4);var f=ca.instance({isFloat:d.isFloat&&Ka.ka(),U:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,L:d.L}),m=void 0!==d.lc&&d.lc?
!0:!1,r=d.lc,n={set:function(g,l,q){q&&b.bind(!1,q);f.u();g&&(c.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),b.Xe());l&&b.Bh();m&&C.set(r)},Kj:function(g){m=(r=g)?!0:!1},M:function(){f.ze()},h:function(g){f.h(g)},resize:function(g,l){f.resize(g,l)},debug:function(){f.debug()},remove:function(){f.remove()}};d.Yb&&a.push(n);return n},resize:function(d,f){b.resize(d,f);a.forEach(function(m){m.resize(d,f)})},el:function(){b.uh()},kd:function(){b.kd()},ad:function(){b.ad()},
Yp:function(){b.Bh()},Xp:function(){b.Xe()},Wp:function(){b.clear()},I:function(){b.remove()},A:function(){b.remove();a.forEach(function(d){d.remove()});a.splice(0)}}}(),xc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=ja.zb());void 0===b.height&&(b.height=ja.yb());var d=c.createFramebuffer(),f=b.width,m=b.height,r=!0;b={isFloat:Ka.ka(),U:!0,width:f,height:m,isPot:!1,isLinear:!1,L:4};var n=ca.instance(b),g=ca.instance(b),l=ca.instance(b),q=ca.instance(b),w=Ea.mm(),H=Ea.hi();
c.bindFramebuffer(w,d);var t=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,t);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,m);c.framebufferRenderbuffer(w,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,t);c.clearDepth(1);c.framebufferTexture2D(w,ja.Fd(0),c.TEXTURE_2D,n.get(),0);c.framebufferTexture2D(w,ja.Fd(1),c.TEXTURE_2D,g.get(),0);c.framebufferTexture2D(w,ja.Fd(2),c.TEXTURE_2D,q.get(),0);c.framebufferTexture2D(w,ja.Fd(3),c.TEXTURE_2D,l.get(),0);ja.wn(4);c.bindFramebuffer(w,null);Ea.reset();
var x={position:n,Gb:g,Tc:l,ha:q,bind:function(){c.bindFramebuffer(w,d);Ea.reset()},set:function(){r&&c.checkFramebufferStatus(H);c.bindFramebuffer(w,d);Ea.reset();if(r){if(c.checkFramebufferStatus(H)!==c.FRAMEBUFFER_COMPLETE)return!1;r=!1}c.viewport(0,0,f,m);c.clearColor(0,0,0,0);C.Db()&&!ja.Li()&&(C.set("s104"),Y.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},M:function(){},resize:function(A,k){f=A;m=k;n.resize(A,k);g.resize(A,k);q.resize(A,k);l.resize(A,k);c.bindRenderbuffer(c.RENDERBUFFER,
t);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,m);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){n.remove();g.remove();q.remove();l.remove();c.deleteRenderbuffer(t);c.deleteFramebuffer(d);var A=a.indexOf(x);-1!==A&&a.splice(A,1)}};a.push(x);return x},resize:function(b,d){a.forEach(function(f){f.resize(b,d)})},A:function(){a.forEach(function(b){b.remove()});a.splice(0)}}}(),tc=function(){var a=[],b=W.sh;return{instance:function(d){function f(){l?m():(q=ne.instance({V:t.tb,
cn:b}),g=W.bl[ja.X()],t.Cb=ca.instance({isFloat:Ka.ka(),U:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:g,height:g/2,L:3}),t.Pd=ca.instance({isFloat:Ka.ka(),U:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:g,height:g/2,L:3}),t.Wd=ca.instance({isFloat:Ka.ka(),U:!0,isPot:!0,width:1,height:g/2,L:3}),t.Qd=ca.instance({isFloat:Ka.ka()&&!b,U:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:g,height:g/2,L:b?4:3}),l=!0,m(),H.forEach(function(x){x()}),H.splice(0,H.length))}function m(){if(l){Ea.ca();q.Bo(t.tb);
q.bo();t.Cb.J();C.set("s87");t.tb.h(0);C.D("u97",W.Wc);ca.jl(1);Y.l(!0,!0);for(var x=W.Um[ja.X()],A=0;A<x;++A)t.Pd.u(),C.set("s90"),C.O("u15",1/g,0),t.Cb.h(0),Y.l(!1,!1),t.Cb.u(),C.O("u15",0,2/g),t.Pd.h(0),Y.l(!1,!1);t.Wd.J();C.set("s92");t.Cb.h(0);Y.l(!1,!1);C.set(b?"s94":"s93");t.Qd.J();t.Cb.h(0);t.Wd.h(1);Y.l(!1,!1);ca.ba(0);ca.ba(1)}}var r=Object.assign({Pb:null,zc:null,yc:0,Ac:0},d),n=0,g=0,l=!1,q=null,w=0,H=[],t={Dd:null,qa:null,tb:null,Cb:null,Pd:null,Qd:null,Wd:null};d={m:function(){function x(){2===
++A&&(t.tb=ca.instance({isFloat:Ka.ka(),U:!0,isPot:!1,isLinear:!0,width:n,height:n/2,L:3}),Ea.ca(),t.tb.J(),C.set("s86"),C.D("u105",r.Ac),C.D("u106",r.yc),t.Dd.h(0),t.qa.h(1),Y.l(!0,!0),f())}var A=0;n=W.cl[ja.X()];w=Math.log2(n)-1;r.Pb&&(t.Dd=ca.instance({isPot:!1,url:r.Pb,C:x,L:3,isFlipY:!1}),t.qa=ca.instance({isPot:!1,url:r.zc,C:x,L:3,isFlipY:!1}))},Dg:function(x){t.tb=x;f()},nd:function(x){l&&(q.h(x),C.D("u123",q.P()))},od:function(x){l&&t.Qd.h(x)},Kh:function(){C.D("u3",w)},di:function(){return w},
P:function(){return n},Cc:function(x){l?x():H.push(x)},I:function(){t.Dd&&t.Dd.remove();t.qa&&t.qa.remove();t.Cb.remove();t.Wd.remove();t.Pd.remove();q.remove();t.Qd.remove();t.tb.remove()}};a.push(d);d.m();return d},I:function(){a.forEach(function(d){d.I()})}}}(),Td={instance:function(a){var b=a.qn,d=a.on,f=0,m=b.P();a=W.sh;var r=ca.instance({isFloat:Ka.ka()&&!a,U:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:m,L:a?4:3,isFlipY:!1}),n=ca.instance({isFloat:Ka.ka()&&!a,U:!a,isPot:!1,isLinear:!0,Bq:!0,isMipmap:!1,
width:m,height:m/2,L:a?4:3}),g=Ea.instance({width:m,height:m}),l=a?"s78":"s77";return{Oo:function(q){f=q;C.set(l);c.viewport(0,0,m,m);g.u();r.u();C.D("u14",f);b.nd(1);d.nd(0);Y.l(!0,!0);c.viewport(0,0,m,m/2);n.u();b.od(1);d.od(0);Y.l(!1,!1);c.flush()},nd:function(q){r.h(q)},od:function(q){n.h(q)},Kh:function(){C.D("u3",b.di()*(1-f)+d.di()*f)}}}},$b=function(){function a(N){var u=(e-W.Ve)/(W.xh-W.Ve);u=1-Math.pow(1-u,W.Jp);e+=N*(1+u*W.Kp);e=Math.min(Math.max(e,W.Ve),W.xh);U.mb()}function b(N){-1!==
g&&(E=h=0,n(),a(W.Hp*N.deltaY/window.innerHeight),N.preventDefault())}function d(){B+=h;D+=E;D=Math.min(Math.max(D,W.On),W.Nn);U.mb()}function f(N){if(0===g||-1===g)return!1;var u=void 0!==N.touches&&N.touches.length;N.preventDefault();if(2===g){var y=yd(N.touches[0].pageX,N.touches[0].pageY,N.touches[1].pageX,N.touches[1].pageY);a(-(A-y)*W.Pn);A=y}else y=u?N.touches[0].clientX:N.clientX,N=u?N.touches[0].clientY:N.clientY,h=2*(y-t)*Math.PI/ja.P(),E=2*(N-x)*Math.PI/ja.aa(),4===g?(G[0]+=h*W.cj,G[1]-=
E*W.cj,G[0]=Math.min(Math.max(G[0],-W.fj),W.fj),G[1]=Math.min(Math.max(G[1],-W.gj),W.gj),U.mb()):d(),t=y,x=N}function m(){0!==g&&-1!==g&&(0===h&&0===E||1!==g||!z?Ba.wa():(n(),k=Date.now(),p=setInterval(U.nn,L)),g=0)}function r(N){if(2!==g&&-1!==g){E=h=0;n();Ba.wake();var u=void 0!==N.changedTouches&&N.touches.length;N.preventDefault();u&&2===N.touches.length?(g=2,A=yd(N.touches[0].pageX,N.touches[0].pageY,N.touches[1].pageX,N.touches[1].pageY)):(g=u||2!==N.button?1:4,t=u?N.touches[0].clientX:N.clientX,
x=u?N.touches[0].clientY:N.clientY);return!1}}function n(){p&&(clearInterval(p),p=!1)}var g=0,l=!1,q=!1,w=!1,H=1,t=0,x=0,A=0,k=0,h=0,E=0,L=16,B=W.Xj,D=W.ej,e=W.Ue,p=!1,z=0,P=new Float32Array([0,0,0,0,0]),G=[W.ml,W.nl],U={m:function(){z=W.Gk[ja.X()];L=W.Ad[ja.X()];ja.Oa("mousedown",r);ja.Oa("mouseup",m);ja.Oa("mouseout",m);ja.Oa("mousemove",f);ja.Oa("mousemove",f);ja.Oa("wheel",b);ja.Oa("touchstart",r);ja.Oa("touchend",m);ja.Oa("touchmove",f)},mb:function(N){l?(q[0]=-D,q[1]=B,w[1].value=H/W.Ue*e,Za.Jb(w)):
(P[0]=B,P[1]=D,P[2]=e,P[3]=G[0],P[4]=G[1],Kc.ro(P,N))},nn:function(){if(1E-4>h&&1E-4>E||-1===g)n(),E=h=0,0===g&&Ba.wa();var N=Date.now(),u=N-k;k=N;N=Math.pow(z,u/L);h*=N;E*=N;d()},mf:function(N){l||(l=!0,g=-1,q=[0,0,0],w=[{name:"u90",type:"3f",value:q},{name:"u94",type:"1f",value:1}],H=N)},Rj:function(N){-1===g&&N&&(g=0);N||(g=-1)},ko:function(){E=h=0;B=W.Xj;D=W.ej;e=W.Ue;U.mb()},ar:function(N){e=N},br:function(N){G[0]=N[0];G[1]=N[1];W.yh=N[2]},$q:function(N,u){B=N;D=u}};return U}(),Pc=function(){var a=
{s106:!1,s106color:!1,s106NormalMap:!1,s106ParamsMap:!1,s106NormalParamsMap:!1};return{instance:function(b){function d(v){if(!F)return Promise.reject("REMOVED");x.rd&&x.rd(v);N=v.partsNames||[];U.splice(0);U.push({n:0,offset:0});z.min.set(Infinity,Infinity,Infinity);z.max.set(-Infinity,-Infinity,-Infinity);var M=v.uvs;M&&(M=M.filter(function(Ra){return Ra}));fa=M&&0<M.length&&0<M[0].length?!0:!1;var da=v.normals&&v.normals.length?!0:!1;"undefined"!==typeof ec&&"string"===typeof v.faces&&(v.faces=
ec(v.faces));"undefined"!==typeof Rb&&("string"===typeof v.vertices&&(v.vertices=Rb(v.vertices)),da&&"string"===typeof v.normals&&(v.normals=Rb(v.normals)),M&&M.length&&M.forEach(function(Ra,Ha){"string"===typeof Ra&&(M[Ha]=Rb(Ra))}));var ta=v.metadata.faces,ra=1+(fa?1:0);ta=(v.faces.length-ta)/(v.metadata.faces*ra);6!==ta&&8!==ta||fa||(++ra,ta/=2);if(4===ta){ta=6*ra+2;for(var qa=4*ra+1,Qa=Array(v.metadata.faces*ta),Ia=0;Ia<v.metadata.faces;++Ia)for(var la=0;la<ra;++la)Qa[Ia*ta+4*la]=v.faces[Ia*qa+
5*la],Qa[Ia*ta+4*la+1]=v.faces[Ia*qa+5*la+1],Qa[Ia*ta+4*la+2]=v.faces[Ia*qa+5*la+2],0===la&&(Qa[Ia*ta+3]=v.faces[Ia*qa+4]),Qa[Ia*ta+4*la+3*ra+1]=v.faces[Ia*qa+5*la],Qa[Ia*ta+4*la+3*ra+2]=v.faces[Ia*qa+5*la+2],Qa[Ia*ta+4*la+3*ra+3]=v.faces[Ia*qa+5*la+3],0===la&&(Qa[Ia*ta+3*ra+4]=v.faces[Ia*qa+4]);v.faces=Qa;v.metadata.faces*=2}ta=v.metadata.vertices;A=Array(ta);for(qa=0;qa<ta;++qa)A[qa]=new Ya(v.vertices[3*qa],v.vertices[3*qa+1],v.vertices[3*qa+2]),Yd(z,A[qa]);ta=v.metadata.faces;k=Array(ta);ra=3*
ra+1;for(qa=0;qa<ta;++qa)k[qa]=new Vc(v.faces[ra*qa],v.faces[ra*qa+1],v.faces[ra*qa+2]),k[qa].cc=v.faces[ra*qa+3];if(da)for(da=v.metadata.normals,h=Array(da),ra=0;ra<da;++ra)h[ra]=new Ya(v.normals[3*ra],v.normals[3*ra+1],v.normals[3*ra+2]);else ae(A,k),h=be(A,k);y=3<A.length;F&&(F.visible=y);if(fa){da=Array(A.length);ra=["a","b","c"];for(ta=0;ta<v.metadata.faces;++ta)for(qa=0;3>qa;++qa)if(Qa=v.faces[7*ta+qa],Ia=v.faces[7*ta+1+qa+3],"undefined"===typeof da[Qa])da[Qa]=[[Qa,Ia]];else if(da[Qa][0][1]!==
Ia){la=-1;for(var R=1;R<da[Qa].length;++R)if(da[Qa][R][1]===Ia){la=da[Qa][R][0];break}R=-1;-1===la?(R=A.length,A.push(A[Qa].clone()),h.push(h[Qa].clone()),da[Qa].push([R,Ia]),da[R]=[[R,Ia]]):R=la;v.faces[7*ta+qa]=R;k[ta][ra[qa]]=R}E=Array(A.length);for(v=0;v<A.length;++v)ra="undefined"===typeof da[v]?v:da[v][0][1],E[v]=new hc(M[0][2*ra],M[0][2*ra+1])}var ka=Jc(z);x.qh&&(A.forEach(function(Ra){Ra.x-=ka.x;Ra.z-=ka.z;Ra.y-=z.min.y}),z.min.x-=ka.x,z.max.x-=ka.x,z.min.z-=ka.z,z.max.z-=ka.z,z.max.y-=z.min.y,
z.min.y=0);if(x.rh){var xa=W.$k/Math.max(z.max.x-z.min.x,z.max.y-z.min.y,z.max.z-z.min.z);A.forEach(function(Ra){Ra.Ha(xa)});z.min.Ha(xa);z.max.Ha(xa)}v=fa?8:6;da=new Float32Array(A.length*v);for(ra=0;ra<A.length;++ra)da[v*ra]=A[ra].x,da[v*ra+1]=A[ra].y,da[v*ra+2]=A[ra].z,da[v*ra+3]=h[ra].x,da[v*ra+4]=h[ra].y,da[v*ra+5]=h[ra].z,fa&&(da[v*ra+6]=E[ra].x,da[v*ra+7]=E[ra].y);k.sort(function(Ra,Ha){return Ra.cc-Ha.cc});var bb=new (65536>3*k.length?Uint16Array:Uint32Array)(3*k.length),$a=0;k.forEach(function(Ra,
Ha){Ra.cc===$a?U[$a].n+=3:(U.push({n:3,offset:3*Ha}),++$a);bb[3*Ha]=Ra.a;bb[3*Ha+1]=Ra.b;bb[3*Ha+2]=Ra.c});L&&L.remove();L=Y.instance({la:da,indices:bb});e=D=!1;ba&&F.Dh();I=!0;F.jf();return Promise.resolve()}function f(v){L.Pa(v.n,v.offset)}function m(v,M){T[M]&&(C.set(T[M].Cm()),L.bind(!1),fa?(C.Va(),C.Dj()):(C.gb(),C.Ej()),T[M].Pc()&&(C.Zc(),D.Bc(!1),C.le(),yb.Rb()),T[M].Kl(),T[M].zd(),L.Pa(v.n,v.offset))}function r(v,M){T[M]&&(C.set(T[M].Dm()),L.bind(!1),fa?(C.Va(),C.Dj()):(C.gb(),C.Ej()),T[M].Pc()&&
(C.Zc(),D.Bc(!1),C.le(),yb.Rb()),F.Gc(),T[M].zd(),L.Pa(v.n,v.offset))}function n(v,M){pa&&T[M]&&(T[M].Ll(),L.Pa(v.n,v.offset))}function g(v,M){pa&&T[M]&&(T[M].Nl(fa),L.Pa(v.n,v.offset))}function l(v,M){T[M]&&(C.set(T[M].ym()),T[M].Ph(),L.Pa(v.n,v.offset))}function q(v,M){T[M]&&(C.set(T[M].zm()),F.Gc(),T[M].Ph(),L.Pa(v.n,v.offset))}function w(v,M){T[M]&&(C.set(T[M].Am()),T[M].Pc()&&(D.Bc(!1),C.le(),yb.Rb()),L.bind(!1),T[M].Mh(fa),L.Pa(v.n,v.offset))}function H(v,M){if(T[M]){var da=T[M].Bm();C.set(da);
T[M].Pc()&&(D.Bc(!1),C.le(),yb.Rb(),L.bind(!1));a[da]||(F.Gc(),L.bind(!1),a[da]=!0);T[M].Mh(fa);L.Pa(v.n,v.offset)}}function t(v,M){return new Promise(function(da,ta){v?(v.C=function(ra){ra?(T[M]&&T[M].I(),T[M]=ra,ba=ba||ra.Pc(),da()):ta()},Zc.instance(v)):ta()})}if(!ja.Ah())return!1;var x=Object.assign({qh:!1,rh:!1,dc:null,url:"",C:null,rd:null,Te:null},b),A=null,k=null,h=null,E=null,L=null,B=null,D=null,e=!1,p=new jc,z=new Uc,P=[],G=null,U=[{n:0,offset:0}],N=[],u=[],y=!1,I=!1,O=[],T=[],ba=!1,fa=
!1,pa=!1,V=!1,F={visible:y,xl:function(){return U.length},zf:function(){return N},Dh:function(){!e&&fa&&(k=k.filter(function(v){return null!==v}),B=ce(A,h,E,k),D=Y.instance({la:B,indices:!1}),E=h=k=A=B=null,e=!0)},Gc:function(){yb.W();F.Oh()},Oh:function(){C.$c("u146",p.elements)},fq:function(){y&&(F.Oh(),L.bind(!1),fa?C.Va():C.gb(),L.W())},Ul:function(v){y&&(v||F.Gc(),L.bind(!1),fa?C.Va():C.gb(),L.W())},Vl:function(){y&&(L.bind(!1),fa?C.Va():C.gb(),U.forEach(n))},Lh:function(){y&&(L.bind(!1),fa?
C.Va():C.gb(),u.forEach(f))},Sl:function(v){pa&&y&&(L.bind(!1),fa?C.Va():C.gb(),v?U.forEach(l):U.forEach(q))},yd:function(v){y&&(v||F.Gc(),L.bind(!1),v||(C.Va(),C.Zc()),pa&&U.forEach(g))},zd:function(v){pa&&y&&(v?U.forEach(m):U.forEach(r))},Pl:function(){pa&&y&&U.forEach(H)},Ol:function(){pa&&y&&U.forEach(w)},oi:function(){return G},mi:function(){return O},gk:function(v,M,da){v=T[v];if(!v)return!1;v.update(M,da);F.ik();return!0},li:function(){return new Promise(function(v){F.Cc(function(){v(T.map(function(M){return M.Hm()}))})})},
Eg:function(v,M){O=v;pa=!1;V=!0;T.forEach(function(da){da.I()});T=Array(v.length);ba=!1;v=v.map(function(da,ta){return"string"===typeof da?$d(-1===da.indexOf(".json")?da+".json":da).then(function(ra){ra.name=da;return t(ra,ta,da)}):t(da,ta,!1)});Promise.all(v).then(function(){F&&(pa=!0,V=!1,F.Cc(function(){ba&&F.Dh();F.ik();Ba.Kb(F);Ba.ve(!0);M&&M(F)},4),F.jf())})},ik:function(){u.splice(0);U.forEach(function(v,M){T[M]&&T[M].ln()&&u.push(v)})},Cc:function(v,M){I&&pa&&!V?v(F):P.push({wb:v,order:M?
M:0})},jf:function(){I&&pa&&!V&&(P.sort(function(v,M){return 0>v.order-M.order?1:-1}),P.forEach(function(v){v.wb(F)}),P.splice(0))},remove:function(){F.I();F=null},I:function(){y=I=!1;L&&L.remove();T.forEach(function(v){v.I()});e&&D.remove();U.splice(0)},Fm:function(){return z.size().x},Gm:function(){return z.size().y},wq:function(){return z.size().z},im:function(){return Jc(z).x},jm:function(){return Jc(z).y},lq:function(){return Jc(z).z},sq:function(){return z.min.y},replace:function(v,M,da){if(v===
G)return M&&F&&(F.jf(),M(F)),!1;G=v;Ba.ve(!1);Wc(v,function(ta){d(ta).then(function(){M&&M(F)}).catch(function(ra){da&&da(ra)})},da);return!0}};x.dc&&F.Eg(x.dc,x.Te);G=x.url;Wc(x.url,function(v){d(v).then(function(){x.C&&x.C(F)})});return F},ho:function(){a.s106=!1;a.s106color=!1;a.s106NormalMap=!1;a.s106ParamsMap=!1;a.s106NormalParamsMap=!1}}}(),Kc=function(){var a=null,b=!1,d=!1,f=null,m=new Float32Array(16),r=new Float32Array(3),n={data:0},g={m:function(){W.Sb?a=new Worker("js/worker.php"):a={postMessage:function(l){n.data=
l;$c.In(n)},terminate:function(){}};a.onmessage=function(l){switch(l.data[0]){case 3:for(var q=0;16>q;++q)m[q]=l.data[q+1];for(q=0;3>q;++q)r[q]=l.data[q+17];yb.uf().Io(m,r);break;case 6:g.Co(),b=!0,$b.mb(!1),W.ga_&&(Lb.enable(),Lb.me())}};f=new Float32Array(6);f[0]=2;W.Sb||$c.Eo(a)},bp:function(){W.Ih||(d=!0)},pr:function(){d=!1},ro:function(l,q){if(q||b&&d)f[1]=l[0],f[2]=l[1],f[3]=l[2],f[4]=l[3],f[5]=l[4],a.postMessage(f)},Co:function(){a.postMessage([5,W.yh])},I:function(){W.Sb&&a.terminate()}};
return g}(),$c=function(){var a=0,b=0,d=0,f=[0,0],m=new jc,r=new Ic,n=new Ic,g=new Ya,l=new Ya,q=new ic,w=0,H=new Float32Array(20);H[0]=3;var t=null,x={data:!1},A={m:function(){"undefined"===typeof W&&(self.Sa={Sb:!0});W.Sb&&A.rg([6])},In:function(k){switch(k.data[0]){case 2:A.Fg(k.data);break;case 5:w=k.data[1]}},rg:function(k){W.Sb?postMessage(k):(x.data=k,t.onmessage(x))},Fg:function(k){a=k[1];b=k[2];d=k[3];f[0]=k[4];f[1]=k[5];g.set(f[0],f[1],-d);q.set(b,a,0,"XYZ");if(!1===q instanceof ic)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
k=Math.cos(q.F/2);var h=Math.cos(q.G/2),E=Math.cos(q.H/2),L=Math.sin(q.F/2),B=Math.sin(q.G/2),D=Math.sin(q.H/2),e=q.order;"XYZ"===e?(r.F=L*h*E+k*B*D,r.G=k*B*E-L*h*D,r.H=k*h*D+L*B*E,r.T=k*h*E-L*B*D):"YXZ"===e?(r.F=L*h*E+k*B*D,r.G=k*B*E-L*h*D,r.H=k*h*D-L*B*E,r.T=k*h*E+L*B*D):"ZXY"===e?(r.F=L*h*E-k*B*D,r.G=k*B*E+L*h*D,r.H=k*h*D+L*B*E,r.T=k*h*E-L*B*D):"ZYX"===e?(r.F=L*h*E-k*B*D,r.G=k*B*E+L*h*D,r.H=k*h*D-L*B*E,r.T=k*h*E+L*B*D):"YZX"===e?(r.F=L*h*E+k*B*D,r.G=k*B*E+L*h*D,r.H=k*h*D-L*B*E,r.T=k*h*E-L*B*D):
"XZY"===e&&(r.F=L*h*E-k*B*D,r.G=k*B*E-L*h*D,r.H=k*h*D+L*B*E,r.T=k*h*E+L*B*D);g.y-=w;k=m.elements;D=r.x;var p=r.y,z=r.z;L=r.w;var P=D+D,G=p+p;B=z+z;h=D*P;E=D*G;D*=B;e=p*G;p*=B;z*=B;P*=L;G*=L;L*=B;k[0]=1-(e+z);k[4]=E-L;k[8]=D+G;k[1]=E+L;k[5]=1-(h+z);k[9]=p-P;k[2]=D-G;k[6]=p+P;k[10]=1-(h+e);k[3]=0;k[7]=0;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;m.setPosition(g);n.N(r).inverse();k=l.N(g);p=k.x;P=k.y;z=k.z;h=n.x;E=n.y;L=n.z;B=n.w;D=B*p+E*z-L*P;e=B*P+L*p-h*z;G=B*z+h*P-E*p;p=-h*p-E*P-L*z;k.x=D*B+p*-h+e*-L-
G*-E;k.y=e*B+p*-E+G*-h-D*-L;k.z=G*B+p*-L+D*-E-e*-h;for(k=1;17>k;++k)H[k]=m.elements[k-1];H[17]=l.x;H[18]=l.y;H[19]=l.z;A.rg(H)},Eo:function(k){t=k;A.rg([6])}};return A}();$c.m();var Zc=function(){function a(n){var g=n.split(":").shift();return"data"===g||"blob"===g?n:("undefined"!==typeof J&&J.ea?J:W).ea+W.Vi+n}function b(n,g){return Math.min(g+n+g*n,1)}var d=!1,f=null,m=1,r={diffuseTexture:null,normalTexture:null,paramsTexture:null,isDisableColorTexture:!1,colorTextureUsage:0,metalness:.5,roughness:.5,
fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,whiteToAlpha:0,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],C:null};return{m:function(){f=ca.instance({width:1,height:1,isMipmap:!1,L:4,array:new Uint8Array([255,255,255,255]),Nf:!1})},mf:function(){d=!0;m=2},instance:function(n){function g(){"number"===typeof h.alpha?(A[0]=h.alpha,A[1]=0,A[2]=0,A[3]=0):(A[0]=h.alpha[0],A[1]=h.alpha[1]-h.alpha[0],A[2]=h.alpha[2],A[3]=h.alpha[3]);var y=1<=h.fresnelPow?h.fresnelMin:h.fresnelMax;k[0]=b(A[0],y);k[1]=
b(A[1],y);k[2]=A[2];k[3]=A[3];e={dj:h.fresnelMax,Ri:[h.fresnelMin,h.roughness,h.fresnelPow/15,h.metalness],Ui:h.paramsMapMask};E=[h.diffuseColor[0]/255,h.diffuseColor[1]/255,h.diffuseColor[2]/255]}function l(){return new Promise(function(y){(t=h.normalTexture&&ja.ql()?!0:!1)&&!B.Ia?B.Ia=ca.instance({url:a(h.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,L:3,C:y}):y()})}function q(){return new Promise(function(y){(x=h.diffuseTexture&&""!==h.diffuseTexture?!0:!1)&&!B.ha?(B.ha=
ca.instance({url:a(h.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,L:4,C:y}),L="s111"):(B.ha||(L="s112",B.ha=f),y())})}function w(){return new Promise(function(y){(D=h.paramsTexture?!0:!1)&&!B.fb?h.paramsTexture===h.diffuseTexture?(B.fb=B.ha,y()):B.fb=ca.instance({url:a(h.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,L:4,C:y}):y()})}function H(y,I){g();Promise.all([l(),
q(),w()]).then(function(){t||D||x?t||D?t&&!D?(p="s106NormalMap",z="s106NNGLtextureNormalMap"):!t&&D?(p="s106ParamsMap",z="s106NNGLtextureParamsMap"):(p="s106NormalParamsMap",z="s106NNGLtextureNormalParamsMap"):(p="s106",z="s106NNGLtexture"):(p="s106color",z="s106NNGLcolor");P=t?"s114":"s113";G=t?"s108":"s118";U=D?"s116":"s115";N=D?"s109":"s119";I&&h.C&&setTimeout(h.C.bind(null,y),1)})}var t,x,A=[1,0,0,0],k=[0,0,0,0],h=Object.assign({},r,n),E=null,L=null,B={ha:null,Ia:null,fb:null},D=t=x=!1,e=null,
p=null,z=null,P=null,G=null,U=null,N=null,u={update:function(y,I){void 0===I&&(I=!0);Object.assign(h,y);I?(u.I(),H(u,!1)):g()},Pc:function(){return t},ln:function(){return.99>A[0]},Hm:function(){return h},Dm:function(){return G},Cm:function(){return P},zm:function(){return N},ym:function(){return U},Bm:function(){return p},Am:function(){return z},zd:function(){t&&B.Ia.h(0)},Nl:function(y){d&&C.set(L);y?C.Va():C.gb();x&&C.Zc();u.yd()},yd:function(){x&&(C.qe("u77",h.colorTextureUsage,h.whiteToAlpha,
h.fresnelMin),(h.isDisableColorTexture?f:B.ha).h(0));C.Jg("u156",E)},Ph:function(){D&&(B.fb.h(0),C.Da("u82",e.Ui),C.Zc());C.Da("u120",e.Ri);C.D("u157",e.dj)},Mh:function(y){D&&!t?B.fb.h(m):t&&(x||f.h(0),B.Ia.h(m),D&&B.fb.h(m+1));D&&C.Da("u82",e.Ui);x||t?C.yo():y?C.zo():C.Ao();u.yd();C.Da("u14",A);C.Da("u120",e.Ri);C.D("u157",e.dj)},Kl:function(){C.Da("u14",A)},Ll:function(){C.Da("u14",k)},I:function(){x&&B.ha.remove();t&&B.Ia.remove();D&&h.paramsTexture!==h.diffuseTexture&&B.fb.remove();Object.assign(B,
{ha:null,Ia:null,fb:null})}};H(u,!0);return u}}}(),Lb=function(){var a=0,b=0,d=0,f=0,m=0,r=0,n=W.Yk,g=W.Xk,l=W.Zk,q=0,w=0,H=null,t=null,x=0,A=0,k=0,h=0,E=0,L=null,B=0,D=0,e=0,p=Date.now(),z=null,P=!1,G=!1,U=!1,N=1,u=!1,y={m:function(){a=W.Tk[ja.X()];b=W.Sk[ja.X()];d=W.Rk[ja.X()];D=W.Uk[ja.X()];f=W.Lk[ja.X()];m=W.Pk[ja.X()];k=W.Qk[ja.X()];h=ja.P();E=ja.aa();q=Math.round(h*a);w=Math.round(E*a);t=Ea.instance({width:q,height:w,Kc:!1});H=ca.instance({width:q,height:w,isPot:!1,isLinear:!0});L=ca.instance({width:q,
height:w,isPot:!1,isLinear:!0,L:1});P=!0},resize:function(I,O,T){N=T;h=I;E=O;q=Math.round(I*a);w=Math.round(O*a);t.resize(q,w);G=!0},W:function(){var I=Math.exp(-(Date.now()-p)/D);U?B=e+(1-I)*(1-e):B=e*I;x=b+B*(d-b);A=f+(1-B)*(1-f);r=m+(1-B)*(1-m);ca.ba(5);if(G&&P)ca.ba(6),L.resize(q,w),C.set("s0"),C.pe("u1",6),t.bind(!1,!0),L.u(),t.Xe(),H.h(6),Y.l(!0,!0),H.resize(q,w),H.u(),L.h(6),Y.l(!1,!1),C.pe("u1",0),G=!1;else{c.enable(c.BLEND);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);I=x/k;c.blendColor(I,
I,I,I);c.colorMask(!0,!1,!1,!0);C.set("s98");yb.kf();C.D("u137",x);D&&(C.D("u138",A),C.D("u129",r));var O=N*(n+Math.pow(Math.random(),l)*(g-n));C.O("u15",O/h,O/E);t.uh();t.ad();H.u();O=2*Math.PI*Math.random();for(var T=!0,ba=0;ba<k;++ba)1===ba&&(c.blendFunc(c.SRC_ALPHA,c.ONE),C.D("u137",I)),C.D("u136",O+ba/k*(Math.PI/2)),C.O("u135",(Math.random()-.5)/h,(Math.random()-.5)/E),Y.l(T,T),T=!1;c.disable(c.BLEND);C.set("s99");C.O("u15",1/q,1/w);L.u();H.h(7);Y.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(I){L.h(I)},
enable:function(){u=!0},Rn:function(){if(U||!u)return!1;z&&clearTimeout(z);y.me();z=setTimeout(y.fk,400)},me:function(){z&&(clearTimeout(z),z=!1);!U&&u&&(window.Ba.disable(),U=!0,p=Date.now(),e=B)},fk:function(){U&&u&&(z&&(clearTimeout(z),z=null),window.Ba.enable(),U=!1,p=Date.now(),e=B)},I:function(){H.remove();L.remove();t.remove()}};y.Rn();return y}(),ne={instance:function(a){var b=a.V.P(),d=a.cn?!0:!1,f=d?"s85":"s75",m=a.V,r=a.V.jn()&&Ka.ka(),n=ca.instance({isFloat:r&&!d,isLinear:!0,isMipmap:!1,
isPot:!0,width:b,height:b,L:d?4:3}),g=ca.instance({isFloat:r,isLinear:!0,isPot:!0,width:1,height:b/2,L:3});d=Math.round(Math.log(b)/Math.log(2));for(var l=[],q=0,w=0;w<=d;++w){var H=Math.pow(2,d-w),t=H/2;if(4>t)break;l.push({up:b/H,Y:H,cb:t,Ip:q,V:0===w?a.V:ca.instance({isFloat:r,isPot:!0,isLinear:!0,width:H,height:t})});q+=t;if(0!==q%1)break}n.Bo=function(x){m=x;l[0].V=x};n.bo=function(){g.J();C.set("s92");m.h(0);Y.l(!0,!0);C.set("s12");g.h(1);var x=m;l.forEach(function(A,k){0!==k&&(A.V.J(),x.h(0),
ca.Go(),C.O("u99",1,1),C.D("u100",Math.min(6/A.cb,.5)),Y.l(!1,!1),x=A.V)});C.set(f);C.D("u97",W.Wc);n.u();l.forEach(function(A){c.viewport(0,A.Ip,b,A.cb);C.O("u96",A.up,1);A.V.h(0);ca.Jo();Y.l(!1,!1)})};n.fo=n.remove;n.remove=function(){n.fo();g.remove();l.forEach(function(x){x.V.remove()});l.splice(0)};return n}};za.Na=function(){var a={Yc:45,zg:1,Hb:"../../images/debug/picsou.png",ke:.8,Vf:3.14/6,Wf:.314,Vd:4,Ud:.5,Uf:-.25,pn:1,Y:256,Tf:.15},b={ub:null,Tb:null,screen:null},d=!1,f=!1,m=-1,r=null,
n=null,g=null,l=Math.PI/180,q=[1,1],w=!1,H={m:function(t){m=t.width;t={isFloat:Ka.ka(),U:!0,isPot:!1,isMipmap:!1,width:m,height:m/2,L:3};b.ub&&(b.ub.remove(),b.Tb.remove());b.Tb=ca.instance(Object.assign({isLinear:!1},t));b.ub=Rc.instance(Object.assign({isLinear:!0},t));C.j("s120",[{type:"1i",name:"u164",value:0}]);C.j("s121",[{type:"1i",name:"u101",value:0},{type:"1i",name:"u109",value:1},{type:"1i",name:"u169",value:2}]);H.jk();w=!0},jk:function(){C.j("s121",[{type:"1f",name:"u170",value:a.Vf},
{type:"1f",name:"u171",value:a.Wf},{type:"1f",name:"u172",value:a.Vd},{type:"1f",name:"u173",value:a.Ud},{type:"1f",name:"u174",value:a.Uf}])},Kq:function(){return f},sa:function(t){r=t},Xc:function(){n="uniform sampler2D u164;uniform vec2 u165,u166,u11;uniform int u167;uniform float u168,u150;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5);const float e=1.2;const vec3 g=vec3(1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u11*(c-u165)/u166;float b=1.;if(u167==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u168*g,texture2D(u164,a).rgb*u150,b*g);gl_FragColor=vec4(d,1.);}";
g="uniform sampler2D u101,u109,u169;uniform float u170,u171,u172,u173,u174,u175;varying vec2 vv0;const float f=3.141593;const vec2 h=vec2(.5);const vec3 i=vec3(1.);void main(){float j=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u169,h);float d=a.r,k=u172*a.g,l=u173*(a.b+u174),b=a.a,g=asin(cos(b)*cos(d)),m=atan(cos(b)*sin(d),-sin(b)),n=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(j-m)),o=1.-smoothstep(u170-u171,u170+u171,n);vec3 p=i*(max(l,0.)+max(k,0.)*o),q=texture2D(u101,vv0).rgb,r=texture2D(u109,vv0).rgb;gl_FragColor=vec4(mix(p+r,q,u175),1.);}";
C.pa("s120",{name:"_",g:n,i:"u164 u165 u167 u166 u168 u150 u11".split(" "),precision:"highp"});C.pa("s121",{name:"_",g:g,i:"u169 u170 u171 u172 u173 u174 u109 u101 u175".split(" "),precision:"highp"})},Og:function(t,x,A,k,h,E,L,B){C.O("u165",x,A);C.pe("u167",k?1:0);C.O("u166",h,h/E);C.Ig("u11",L);t.h(0);Y.l(B,B)},pi:function(){return b.ub.ji()},wh:function(t){H.m({width:a.Y});H.kk(t,!1,1);f=!0},vh:function(){d&&b.screen.Jm()===a.Hb||(d=!1,b.screen&&b.screen.remove(),b.screen=ca.instance({url:a.Hb,
isFloat:!1,C:function(){d=!0}}))},Fg:function(t){Object.assign(a,t)},mb:function(t){H.Fg(t);w&&(H.jk(),H.vh())},kk:function(t,x,A){Ea.ca();b.Tb.J();C.set("s120");C.D("u168",a.Tf);C.D("u150",a.pn);H.Og(t,Math.PI,0,!0,90*l,t.P()/t.aa(),q,!0);d&&(t=a.Y,C.D("u150",a.ke),c.viewport(0,0,t/2,t/2),H.Og(b.screen,0,0,!1,2*a.Yc*l,2*a.zg,q,!1),c.viewport(t/2,0,t/2,t/2),H.Og(b.screen,2*Math.PI,0,!1,2*a.Yc*l,2*a.zg,q,!1));x?(C.set("s121"),C.D("u175",1-A),b.ub.Cj(0),b.Tb.h(1),x.h(2),Y.l(!1,!1),r.Dg(b.ub.ji())):
r.Dg(b.Tb)},A:function(){w=!1;Object.assign(b,{ub:null,Tb:null,screen:null});f=d=!1;m=-1;r=null}};return H}();za.rb=function(){var a=!1,b=!0,d=null,f=null,m=1,r=null,n={Xc:function(){ja.da()&&(C.pa("s122",{name:"_",v:"attribute vec3 a0;uniform sampler2D u42;uniform float u153;uniform vec2 u43;uniform vec3 u152;const float l=0.,m=0.,D=1.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 E=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,o);vec2 f=u93*e;vec3 c=u93*n;vec2 s=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,p).rgb+vec3(u87,0.,0.),u90,c);float t=mix(texture2D(u42,q).r,0.,u93);a.z+=t;mat3 u=r(a);vec3 v=mix(u152,u91,c);float w=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u89,1.,u93);vec2 j=u88/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u93);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(C,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u42","u43","u86","u152","u153"].concat(C.Id(),C.Jd()),K:["a0"],S:[3],fa:!0}),a=!0)},m:function(g){a&&C.j("s122",[{type:"1i",name:"u42",value:1},{type:"3f",name:"u86",value:g.Ja},{type:"1f",name:"u153",value:1},{type:"1f",name:"u87",value:0},{type:"1f",name:"u95",value:1}].concat(g.Zg))},jb:function(g,l){f=g;m=l;n.xi()},ib:function(g,l){d=g;r=l;n.xi()},
xi:function(){if(ja.da()&&f&&d){var g=[d[0]*f,d[1]*f,d[2]*f],l=r;g[0]+=l[0];g[1]+=l[1];g[2]+=l[2];C.j("s122",[{type:"1f",name:"u153",value:m},{type:"3f",name:"u152",value:g}]);C.M()}},Tm:function(g){for(var l=g.width/2,q=g.height/2,w=g.depth,H=g.Wl,t=g.height/4,x=g.Al,A=2*x+4,k=[],h=[],E=-l+g.Za,L=-H-g.Za,B=l-g.Za,D=-H-g.Za,e=0;e<A;++e){var p=0,z=0;0===e?(p=-l,z=-H-w):1<=e&&e<=1+x?(z=(e-1)/x*Math.PI/2,p=E-Math.cos(z)*g.Za,z=L+Math.sin(z)*g.Za):e>=2+x&&e<=2+2*x?(z=(e-2-x)/x*Math.PI/2,p=B+Math.sin(z)*
g.Za,z=D+Math.cos(z)*g.Za):e===A-1&&(p=l,z=-H-w);k.push(p,q+t,z,p,-q+t,z);0!==e&&h.push(2*e,2*e-2,2*e-1,2*e,2*e-1,2*e+1)}return n.instance({la:k,indices:h})},toggle:function(g){b=g},instance:function(g){var l=Y.instance({la:g.la,indices:g.indices});return{W:function(){a&&b&&(C.set("s122"),l.bind(!0),l.W())}}}};return n}();za.ja=function(){function a(u){C.j("s125",u);C.j("s126",u)}var b={Df:-87,Mm:[85,95],vi:[90,90],ui:[85,70],sd:24,Zp:12,Bl:2,sg:[-80,40],$i:[0,-10],Fn:40,Hn:20,aj:[70,50],Gn:90,lp:2,
se:[0,-15],Je:1024,qb:512,ce:4,$o:[6,30],Zi:1.2};b.jj=b.sg;var d=!1,f=!1,m=!1,r=null,n=null,g=null,l=null,q=null,w=null,H=!1,t=!1,x=null,A=null,k=null,h=null,E=.5,L=[{type:"1f",name:"u177",value:1}],B=null,D=null,e=0,p=["u42","u43","u153","u152"],z=null,P=null,G=null,U=null,N={Xc:function(){C.pa("s123",{name:"_",v:"attribute vec3 a0;uniform vec3 u152;uniform vec2 u178,u179;uniform float u153,u180,u181,u182;varying float vv0,vv1;void main(){vec3 a=(a0+u152)*u153;float b=atan(a.x,a.z-u180),d=2.*(a.y-u181)/(u182-u181)-1.;vv0=a0.y;float g=1.-u178.x*u178.x/(u178.y*u178.y),c=u178.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u180);vv1=smoothstep(u179.x,u179.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u183;uniform vec4 u14;varying float vv0,vv1;void main(){float a=u14.x+u14.y*smoothstep(-u14.w,-u14.z,vv0),b=min(a,1.)*u183;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u153 u152 u178 u179 u180 u181 u182 u14 u183".split(" "),K:["a0"],S:[3],precision:"highp"});C.pa("s124",{name:"_",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u15),c=texture2D(u1,vv0-2.*u15),d=texture2D(u1,vv0-u15),f=texture2D(u1,vv0+u15),g=texture2D(u1,vv0+2.*u15),h=texture2D(u1,vv0+3.*u15);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u15"],precision:"lowp"});C.pa("s125",{name:"_",v:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u42;uniform vec2 u43;uniform float u153;uniform vec3 u152;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,r);vec2 g=u93*e;vec3 c=u93*q;vec2 v=mix(d.a*u43,e,g),h=(2.*d.gb-e)*(1.-g);h.x*=-1.;vec3 a=mix(texture2D(u42,s).rgb+vec3(u87,0.,0.),u90,c);float w=mix(texture2D(u42,t).r,0.,u93);a.z+=w;mat3 i=u(a);vec3 x=mix(u152,u91,c);float y=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float j=cos(a.z),k=sin(a.z);mat2 z=mat2(j,k,-k,j);b.xy=z*b.xy;float A=mix(u89,1.,u93);vec2 l=u88/v;vec3 m=a0;float B=max(0.,-a0.z-o)*p;m.x+=B*sign(a0.x)*(1.-u93);vec3 C=i*(m+x)*y+b;vec2 D=l*A;vec3 E=vec3(h*D,-l)+C*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=i*a2;vv1=-F.z,vv1*=vv1*1e-5+smoothstep(5.,50.,abs(a0.x));}",
g:"uniform sampler2D u184,u169;uniform vec2 u99,u185;uniform float u186,u177;varying vec2 vv0;varying float vv1;void main(){vec2 b=u185*u186+u99*vv0;vec4 a=u177*texture2D(u184,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u184 u169 u86 u186 u185 u99 u177".split(" ").concat(C.Id(),C.Jd(),p),K:["a0","a2","a1"],S:[3,3,2],precision:"lowp"});C.pa("s126",{name:"_",v:"attribute vec3 a0;uniform sampler2D u42;uniform vec2 u43;uniform float u153;uniform vec3 u152;const float l=0.,m=0.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 D=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,o);vec2 f=u93*e;vec3 c=u93*n;vec2 s=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,p).rgb+vec3(u87,0.,0.),u90,c);float t=mix(texture2D(u42,q).r,0.,u93);a.z+=t;mat3 u=r(a);vec3 v=mix(u152,u91,c);float w=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u89,1.,u93);vec2 j=u88/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u93);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(C,1.)),gl_Position*=vec4(-1.,1.,1.,1.);}",
g:"void main(){gl_FragColor=vec4(0.);}",i:["u86"].concat(C.Id(),C.Jd(),p),K:["a0"],S:[3],precision:"lowp"});d=!0},m:function(u){if(d){if(void 0===u.mc||!u.mc)return!1;if(f)N.Aj(u);else{l=ca.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.Je,height:b.Je/4});var y=b.qb/4,I={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:b.qb,height:y};g=ca.instance(I);w=ca.instance(I);q=ca.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.qb,height:y*b.ce});y=[];I=[];var O=b.$i[0],T=b.$i[1],
ba=b.Fn,fa=b.Hn,pa=-b.aj[0]+O,V=b.aj[1]+T,F=b.Gn;y.push(0,O,T,.5*-fa,pa,V,.5*fa,pa,V,.5*-ba,O-F,T,.5*ba,O-F,T);I.push(0,2,1,0,1,3,1,4,3,1,2,4,0,4,2);G=Y.instance({la:new Float32Array(y),indices:new Uint16Array(I)});y=.5-.5/u.nc[1];I=.5+.5/u.nc[1];O=new Float32Array(16*b.sd);T=new Uint16Array(6*(b.sd-1));for(ba=0;ba<b.sd;++ba){fa=2*ba/(b.sd-1)-1;fa=Math.sign(fa)*Math.pow(Math.abs(fa),b.Bl);F=Math.PI*(fa+1)/2-Math.PI/2;fa=Math.sin(F);var v=Math.cos(F);pa=Math.sin(F*b.Zi);V=Math.cos(F*b.Zi);var M=F/
(Math.PI*u.nc[0])+.5;F=b.ui[0]*fa;var da=b.jj[0],ta=b.ui[1]*v+b.Df,ra=M,qa=y,Qa=b.jj[1];v=b.vi[1]*v+b.Df;var Ia=I,la=16*ba;O[la]=b.vi[0]*fa;O[la+1]=Qa;O[la+2]=v;O[la+3]=pa;O[la+4]=0;O[la+5]=V;O[la+6]=M;O[la+7]=Ia;O[la+8]=F;O[la+9]=da;O[la+10]=ta;O[la+11]=pa;O[la+12]=0;O[la+13]=V;O[la+14]=ra;O[la+15]=qa;0!==ba&&(fa=2*ba,pa=6*(ba-1),T[pa]=fa,T[pa+1]=fa-1,T[pa+2]=fa-2,T[pa+3]=fa,T[pa+4]=fa+1,T[pa+5]=fa-1)}U=Y.instance({la:O,indices:T});N.Aj(u);C.j("s124",[{type:"1i",name:"u1",value:0}]);f=!0}}},Aj:function(u){E=
u.Vo;h=u.te;var y=[{type:"1i",name:"u42",value:1},{type:"3f",name:"u86",value:[u.Ja[0],u.Ja[1]-b.se[0],u.Ja[2]+b.se[1]]}].concat(u.Zg,u.ek);B=[{type:"1i",name:"u184",value:0},{type:"1i",name:"u169",value:2},{type:"1f",name:"u186",value:u.Wo},{type:"2f",name:"u99",value:[1,1/b.ce]},{type:"2f",name:"u185",value:[0,1/b.ce]},{type:"1f",name:"u177",value:1}].concat(y);D=y;C.j("s125",B);C.j("s126",D)},ic:function(u){r=u},hc:function(u){z=u;z.Cc(N.Dc)},Mi:function(){return m&&null!==z&&null!==P},Dc:function(){if(!(m||
t&&H)||null===z||null===P)return!1;e=0;c.viewport(0,0,b.Je,b.Je/4);Ea.ca();l.u();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);C.j("s123",[{type:"1f",name:"u180",value:b.Df},{type:"1f",name:"u181",value:b.sg[0]},{type:"1f",name:"u182",value:b.sg[1]},{type:"3f",name:"u152",value:[x[0]+A[0],x[1]+A[1],x[2]+A[2]]},{type:"1f",name:"u183",value:E},{type:"2f",name:"u178",value:b.Mm},{type:"2f",name:"u179",value:b.$o}]);z.Vl();C.set("s1");var u=b.qb/4;c.viewport(0,0,b.qb,u);g.u();l.h(0);l.Hc();Y.l(!0,
!0);for(var y=0;y<b.ce;++y)C.set("s124"),0!==y&&c.viewport(0,0,b.qb,u),w.u(),g.h(0),C.O("u15",1/b.qb,0),Y.l(!1,!1),g.u(),w.h(0),C.O("u15",0,1/u),Y.l(!1,!1),b.Cl&&c.colorMask(0===y,1===y,2===y,!0),C.set("s1"),q.u(),g.h(0),c.viewport(0,y*u,b.qb,u),Y.l(!1,!1),b.Cl&&c.colorMask(!0,!0,!0,!0);return m=!0},W:function(){N.Mi()&&0===e++%b.lp&&(P.bind(!1,!1),n.J(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),C.set("s126"),r.h(1),G.bind(!0),G.W(),
C.set("s125"),q.h(0),U.bind(!0),U.W(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},Em:function(){return n},add:function(){N.Mi()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),n.h(0),Y.l(!1,!1),c.disable(c.BLEND))},Bg:function(u,y){P&&P.remove();P=Ea.instance({width:u,height:y,Kc:!0});n&&n.remove();n=ca.instance({width:u,height:y,isFloat:!1,isPot:!1});N.Dc()},ib:function(u,y,I){u||(u=x,y=A,I=k);a([{type:"3f",name:"u152",value:[I[0]+h[0],I[1]+h[1]-b.se[0],I[2]+h[2]+b.se[1]]}]);x=u;A=y;k=
I;t=!0;!m&&H&&N.Dc();C.M()},jb:function(u,y){C.j("s123",[{type:"1f",name:"u153",value:u}]);a([{type:"1f",name:"u153",value:y}]);H=!0;!m&&t&&N.Dc();C.M()},Gg:function(u){a([{type:"1f",name:"u87",value:u}]);C.M()},Kb:function(u){u&&(z=u);N.Dc()},Hg:function(u,y){L[0].value=1-u;a(L);a(y)},I:function(){},A:function(){[P,G,U].forEach(function(u){u&&u.remove()});e=0;t=H=!1;U=G=P=h=k=A=x=null;m=f=d=!1;w=q=l=g=n=r=null}};return N}();za.va=function(){var a=!1,b=null,d=0,f=0,m=0,r=[{type:"1f",name:"u177",value:1}],
n=null,g=null,l=null,q={Xc:function(){C.pa("s127",{name:"_",v:"attribute vec3 a0;uniform vec2 u187,u188;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u188)/u187;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u96;uniform float u189,u190,u191;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u189,u190),a=vv0-b,c=u191*a,d=(c-a)*u96;gl_FragColor=vec4(d,0.,1.);}",i:"u187 u188 u189 u190 u191 u96".split(" "),K:["a0"],S:[3],precision:"highp"});C.pa("s128",{name:"_",v:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u42;uniform vec3 u152;uniform vec2 u43,u187,u188;uniform float u153;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u83;uniform vec3 u86,u90,u91,u92;uniform float u84,u85,u93,u94,u87,u88,u89,u95;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u42,q);vec2 f=u93*e;vec3 c=u93*p;vec2 u=mix(d.a*u43,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u42,r).rgb+vec3(u87,0.,0.),u90,c);float v=mix(texture2D(u42,s).r,0.,u93);a.z+=v;mat3 w=t(a);vec3 x=mix(u152,u91,c);float y=mix(u153,u94,u93);vec3 b=mix(u86,u92,c);b.x+=u84*sin(a.y),b.y+=u85*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u89,1.,u93);vec2 j=u88/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u93);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u83*(vec4(u95*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u188)/u187,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u192,u193;uniform float u177;varying vec2 vv0,vv1;void main(){vec2 a=u177*texture2D(u192,vv0).rg;gl_FragColor=texture2D(u193,a+vv1);}",i:"u177 u42 u192 u193 u187 u188 u43 u86 u153 u152".split(" ").concat(C.Id(),C.Jd()),K:["a0"],S:[3],precision:"lowp"});a=!0},m:function(w){if(a){if(void 0===w.mc||!w.ud)return!1;g=ca.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,L:4});l=Ea.instance({width:256,height:128});C.j("s128",[{type:"1i",name:"u42",value:1},{type:"1i",
name:"u192",value:2},{type:"1i",name:"u193",value:0},{type:"3f",name:"u86",value:w.Ja},{type:"1f",name:"u177",value:1}].concat(w.ek,w.Zg));f=w.df;m=w.cf;d=w.ef}},ic:function(w){b=w},hc:function(w){n=w;n.Cc(q.$e)},$e:function(){c.viewport(0,0,256,128);l.u();g.u();var w=n.Fm(),H=n.Gm(),t=[{type:"2f",name:"u187",value:[w,H]},{type:"2f",name:"u188",value:[n.im(),n.jm()]}];C.j("s127",t.concat([{type:"1f",name:"u189",value:f},{type:"1f",name:"u190",value:m},{type:"1f",name:"u191",value:d},{type:"2f",name:"u96",
value:[1/w,-1/H]}]));n.Lh();C.j("s128",t)},W:function(){C.set("s128");b.h(1);g.h(2);n.Lh()},ib:function(w){C.j("s128",[{type:"3f",name:"u152",value:w}]);C.M()},jb:function(w){C.j("s128",[{type:"1f",name:"u153",value:w}]);C.M()},Gg:function(w){C.j("s128",[{type:"1f",name:"u87",value:w}]);C.M()},To:function(w){d=w;q.$e();C.M();Ba.animate(Date.now())},Kb:function(w){w&&(n=w);q.$e()},Hg:function(w,H){r.u177=1-w;C.j("s128",r);C.j("s128",H)},I:function(){}};return q}();za.uc=function(){var a=[0,-.5],b=
!1,d=!1,f=null,m=null,r=null,n=null,g=null,l=-1,q=-1;return{Xc:function(){C.pa("s129",{name:"_",v:"attribute vec2 a0;uniform sampler2D u42;uniform vec2 u43,u12;uniform float u11;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u42,vec2(.25,.5));vec2 b=a.a*u43,c=2.*a.gb-f,d=u12+a0*u11;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u194;varying vec2 vv0;void main(){gl_FragColor=texture2D(u194,vv0);}",i:["u42","u194","u43","u12","u11"],precision:"lowp"});
C.pa("s130",{name:"_",g:"uniform sampler2D u2,u195,u196;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u196,vv0).rgb,c=texture2D(u195,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u196","u195"],precision:"lowp"});b=!0},m:function(w){b&&(g=ca.instance({isFloat:!1,isPot:!0,url:w.Re,C:function(){d=!0}}),C.j("s129",[{type:"1i",name:"u42",value:1},{type:"1i",name:"u194",value:0},{type:"2f",name:"u43",value:w.qk},{type:"2f",name:"u12",value:a},
{type:"1f",name:"u11",value:3.8}]),C.j("s130",[{type:"1i",name:"u195",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u196",value:2}]))},ic:function(w){m=w},Bg:function(w,H){var t={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:w,height:H,L:4};l=2/w;q=2/H;r=ca.instance(t);n=ca.instance(t);f=Ea.instance({width:w,height:H})},W:function(w,H){if(d){f.bind(!1,!0);C.set("s91");for(var t=0;2>t;++t){C.O("u15",l,0);r.u();0!==t&&n.h(0);var x=0===t&&!W.ga_;Y.l(x,x);C.O("u15",0,q);n.u();r.h(0);Y.l(!1,
!1)}C.set("s129");m.h(1);g.h(0);r.u();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);Y.l(!1,!1);C.set("s130");H.u();n.h(0);r.h(1);w.h(2);Y.l(!1,!1)}},I:function(){}}}();var nd=function(){var a={instance:function(b){var d=b.fg,f=b.ag,m=b.td,r=b.background?b.background:ca.ri(),n=b.qa,g={scale:1,offsetX:0,offsetY:0},l=null;b.$f&&(g.scale=b.$f.scale,g.offsetY=b.$f.offsetY);return{ki:function(){return n},ci:function(){return r},set:function(){l=hb.um();hb.Hj(g);hb.Be();hb.Ce();Ba.zj(m,r,!1,!1)},M:function(){hb.Hj(l)},
fc:function(){return{modelURL:d,materialsURLs:f,background:r.fc(!1),td:m.fc(!1),qa:n.fc(!0)}},xm:function(){return m.fc(!1)},Op:function(q){r.h(q)},I:function(){m.remove();n.remove();b.background&&r.remove()}}},dd:function(b,d,f){function m(){if(3===++l&&d){var q=a.instance({fg:b.modelURL,ag:b.materialsURLs,background:r,td:n,qa:g});d(q)}}var r=null,n=null,g=null,l=0;ca.dd(b.background,function(q){!q&&f?f():(r=q,m())});ca.dd(b.dataState,function(q){!q&&f?f():(n=q,m())});ca.dd(b.light,function(q){!q&&
f?f():(g=q,m())})}};return a}();return Nb||JEELIZVTO}(),Ed=function(){function Q(sa,Da){var La=Object.prototype.toString.call(sa),sb=0,Oa=sa.length;if("[object Array]"===La||"[object NodeList]"===La||"[object HTMLCollection]"===La||"[object Object]"===La||"undefined"!==typeof jQuery&&sa instanceof jQuery||"undefined"!==typeof Elements&&sa instanceof Elements)for(;sb<Oa;sb++)Da(sa[sb]);else Da(sa)}var X=function(sa,Da){function La(){var Oa=[];this.add=function(Qb){Oa.push(Qb)};var mb,Ab;this.call=
function(){mb=0;for(Ab=Oa.length;mb<Ab;mb++)Oa[mb].call()};this.remove=function(Qb){var Hb=[];mb=0;for(Ab=Oa.length;mb<Ab;mb++)Oa[mb]!==Qb&&Hb.push(Oa[mb]);Oa=Hb};this.length=function(){return Oa.length}}function sb(Oa,mb){if(Oa)if(Oa.resizedAttached)Oa.resizedAttached.add(mb);else{Oa.resizedAttached=new La;Oa.resizedAttached.add(mb);Oa.resizeSensor=document.createElement("div");Oa.resizeSensor.className="resize-sensor";Oa.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";
Oa.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
Oa.appendChild(Oa.resizeSensor);Oa.resizeSensor.offsetParent!==Oa&&(Oa.style.position="relative");var Ab=Oa.resizeSensor.childNodes[0],Qb=Ab.childNodes[0],Hb=Oa.resizeSensor.childNodes[1],oc,dc,Ub,pc,ec=Oa.offsetWidth,Rb=Oa.offsetHeight,Cc=function(){Qb.style.width="100000px";Qb.style.height="100000px";Ab.scrollLeft=1E5;Ab.scrollTop=1E5;Hb.scrollLeft=1E5;Hb.scrollTop=1E5};Cc();var Vb=function(){dc=0;oc&&(ec=Ub,Rb=pc,Oa.resizedAttached&&Oa.resizedAttached.call())};mb=function(){Ub=Oa.offsetWidth;pc=
Oa.offsetHeight;(oc=Ub!=ec||pc!=Rb)&&!dc&&(dc=window.requestAnimationFrame(Vb));Cc()};var qc=function(rc,Dc,sc){rc.attachEvent?rc.attachEvent("on"+Dc,sc):rc.addEventListener(Dc,sc)};qc(Ab,"scroll",mb);qc(Hb,"scroll",mb)}}Q(sa,function(Oa){sb(Oa,Da)});this.detach=function(Oa){X.detach(sa,Oa)}};X.detach=function(sa,Da){Q(sa,function(La){if(La){if(La.resizedAttached&&"function"==typeof Da&&(La.resizedAttached.remove(Da),La.resizedAttached.length()))return;La.resizeSensor&&(La.contains(La.resizeSensor)&&
La.removeChild(La.resizeSensor),delete La.resizeSensor,delete La.resizedAttached)}})};return X}(),Mb={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/",autoVTOURL:"https://autovtoapi.jeeliz.com/",assetsPath:"jeefit/"},qb={notLoaded:-1,initializing:0,realtime:2,loadingModel:3,paused:4},Cd={isRT:!0,sku:void 0,materialsReplacements:"",mode:qb.notLoaded},Ua=Object.assign({},Cd),gb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1,oFactor:-1},Dd=
{cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},kc=null,Ac=null,Lc=!0,Ca=Object.assign({},Dd),oe={ADJUST_START:null,ADJUST_END:null,LOADING_START:null,LOADING_END:null},fd=null,cc={enabled:!1,callback:null,interval:1E3},Mc={error:null},yc=null,mc=null,nc=Mb.appstaticURL+Mb.assetsPath,Va=Nb,vb={start:function(Q){var X=Object.assign({settings:null,NNCPath:null,assetsPath:Mb.appstaticURL+Mb.assetsPath,catalog:null,faceDetectionCallback:null,faceDetectionInterval:1E3,
placeHolder:null,canvas:null,onError:null,callbackReady:null,onWebcamGet:null,callbacks:{},searchImageMask:null,searchImageColor:null,searchImageRotationSpeed:null,isShadow:!0,isRequestCamera:!0,sku:null,modelStandalone:null},Q);console.log("INFO in JeelizVTOWidget.js: start()");return new Promise(function(sa,Da){if(Ua.mode!==qb.notLoaded)vb.resume().catch(function(sb){}).finally(sa);else{ma();if(X.settings)for(var La in X.settings)Mb[La]=X.settings[La];X.NNCPath&&Va.set_NNCPath(X.NNCPath);X.faceDetectionCallback&&
(cc.enabled=!0,cc.callback=X.faceDetectionCallback,cc.interval=X.faceDetectionInterval);fd=Object.assign({},oe,X.callbacks);Ca.container=X.placeHolder||document.getElementById("JeelizVTOWidget");if(!Ca.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");Ca.cv=X.canvas||document.getElementById("JeelizVTOWidgetCanvas");Ca.cv||(Ca.cv=document.createElement("canvas"),Ca.container.appendChild(Ca.cv));Ca.cv.style.position="absolute";Ca.loading=document.getElementById("JeelizVTOWidgetLoading");
Mc.error=X.onError;mc=X.callbackReady;lc();La=jb(Ca.container);if(!La.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!La.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");bc(!0);Lc&&Bc();(X.searchImageMask||X.searchImageColor||X.searchImageRotationSpeed)&&Va.set_loading(X.searchImageMask,X.searchImageColor,X.searchImageRotationSpeed);Ua.mode=qb.initializing;nc=X.assetsPath;yc=X.catalog;if(X.onWebcamGet)Va.onWebcamGet(X.onWebcamGet);Va.init2({basePath:nc,cv:Ca.cv,width:gb.cvWidth,height:gb.cvHeight,
isRequestCamera:X.isRequestCamera,callbackReady:ea}).catch(function(sb){Ua.isRT=!1;ub(sb||"NO_ERROR_LABEL");Da()});Va.onHalfLoad(function(){!1===X.isShadow&&Va.switch_shadow(!1);X.sku?vb.load_glassesDB(X.sku,sa,X.materialsReplacements):X.modelStandalone?vb.load_modelStandalone(X.modelStandalone,sa):sa()})}})},destroy:function(){return Va.destroy().then(function(){Object.assign(Ua,Cd);mc=yc=null;Object.assign(Ca,Dd)})},preFetch:function(Q,X){Jd(Q).then(function(sa){sa&&!sa.includes("://")&&(sa=nc+
"models3D/"+sa);var Da=X?X.slice(0):[];sa&&Da.push(sa);Va.preFetch(nc,Da)})},pause:function(Q){if(!Ua.isRT||!Va.ready)return Promise.reject();Ua.mode=qb.paused;Nc();var X=Va.switch_sleep(!0,Q);return Q?X:Promise.resolve(X)},resume:function(Q){if(!Ua.isRT||!Va.ready)return Promise.reject();Ua.mode=qb.realtime;Lc&&Bc();var X=Va.switch_sleep(!1,Q);return Q?X:Promise.resolve(X)},set_videoRotation:function(Q){Ua.isRT&&Va.set_videoRotation(Q)},set_videoSizes:function(Q,X,sa,Da,La,sb){Ua.isRT&&Va.set_videoSizes(Q,
X,sa,Da,La,sb)},resize:function(){kc&&clearTimeout(kc);kc=setTimeout(function(){kc&&clearTimeout(kc);kc=null;bc(!0)},420)},set_scale:function(Q){Va.set_scale(Q)},reset_resizeSensor:Bc,toggle_resizeSensor:function(Q){Lc!==Q&&((Lc=Q)?Bc():Nc())},capture_image:function(Q,X,sa){Va&&Va.ready?Va.capture_image(Q,X,sa,!1):X(!1)},toggle_loading:function(Q){Q?(oa(Ca.loading),zc("LOADING_START")):(Ja(Ca.loading),zc("LOADING_END"))},load_modelStandalone:function(Q,X){if(Ua.mode===qb.notLoaded)throw Error("You should call JEELIZVTOWIDGET.start() first");
if(!Ua.isRT)throw Error("Loading standalone models is only available in RT mode");Ua.mode===qb.paused&&vb.resume().catch(function(La){});Ua.mode=qb.loadingModel;vb.toggle_loading(!0);var sa=function(){vb.toggle_loading(!1);X&&X()},Da="undef";"string"===typeof Q?(Da=Q,Sa(Q,Da).then(sa).catch(eb)):(Da="RANDOM_SKU_"+Date.now().toString(),bd(Da,Q,sa));Ua.sku=Da;Ua.materialsReplacements=""},load_glassesDB:function(Q,X,sa){if(Ua.mode===qb.notLoaded)throw Error("You should call JEELIZVTOWIDGET.start() first");
if(Ua.isRT){vb.toggle_loading(!0);var Da=sa?JSON.stringify(sa):"";Q===Ua.sku&&Da===Ua.materialsReplacements?(vb.toggle_loading(!1),X&&X()):(Ua.sku=Q,Ua.materialsReplacements=Da,Ua.mode=qb.loadingModel,Ua.mode===qb.paused&&vb.resume().catch(function(La){}),Q?yc&&yc[Q]?ed(Q,yc[Q],X,sa):na(Mb.glassesDBURL+Q).then(function(La){if(La.error)return eb();ed(Q,La.intrinsic,X,sa)}).catch(eb):(Ua.mode=qb.realtime,vb.toggle_loading(!1),Va.start_rendering(),X&&X()))}},enter_adjustMode:zb,exit_adjustMode:Gb,set_LUT:function(Q){return Va&&
Va.ready?Va.set_LUT(Q||null):Promise.reject("NOT_READY")},tweak_autoVTOModel:ad};return vb}();
JEELIZVTOWIDGET={VERSION:JEELIZVTO.VERSION,capture_image:JeelizVTOWidget.capture_image,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,load:JeelizVTOWidget.load_glassesDB,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,pause:JeelizVTOWidget.pause,preFetch:JeelizVTOWidget.preFetch,request_cameraVideoStream:JEELIZVTO.request_cameraVideoStream,reset_resizeSensor:JeelizVTOWidget.reset_resizeSensor,toggle_resizeSensor:JeelizVTOWidget.toggle_resizeSensor,
resize:JeelizVTOWidget.resize,resume:JeelizVTOWidget.resume,set_LUT:JeelizVTOWidget.set_LUT,set_scale:JeelizVTOWidget.set_scale,set_videoRotation:JeelizVTOWidget.set_videoRotation,set_videoSizes:JeelizVTOWidget.set_videoSizes,start:JeelizVTOWidget.start,tweak_autoVTOModel:JeelizVTOWidget.tweak_autoVTOModel};

export {JEELIZVTO, JEELIZVTOWIDGET};
/* eslint-enable */
