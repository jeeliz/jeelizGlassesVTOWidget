 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(ra,wa){return Object.prototype.hasOwnProperty.call(ra,wa)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ra,wa,Ha){if(ra==Array.prototype||ra==Object.prototype)return ra;ra[wa]=Ha.value;return ra};
$jscomp.getGlobal=function(ra){ra=["object"==typeof globalThis&&globalThis,ra,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var wa=0;wa<ra.length;++wa){var Ha=ra[wa];if(Ha&&Ha.Math==Math)return Ha}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(ra,wa){var Ha=$jscomp.propertyToPolyfillSymbol[wa];if(null==Ha)return ra[wa];Ha=ra[Ha];return void 0!==Ha?Ha:ra[wa]};$jscomp.polyfill=function(ra,wa,Ha,Sa){wa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(ra,wa,Ha,Sa):$jscomp.polyfillUnisolated(ra,wa,Ha,Sa))};
$jscomp.polyfillUnisolated=function(ra,wa,Ha,Sa){Ha=$jscomp.global;ra=ra.split(".");for(Sa=0;Sa<ra.length-1;Sa++){var Aa=ra[Sa];if(!(Aa in Ha))return;Ha=Ha[Aa]}ra=ra[ra.length-1];Sa=Ha[ra];wa=wa(Sa);wa!=Sa&&null!=wa&&$jscomp.defineProperty(Ha,ra,{configurable:!0,writable:!0,value:wa})};
$jscomp.polyfillIsolated=function(ra,wa,Ha,Sa){var Aa=ra.split(".");ra=1===Aa.length;Sa=Aa[0];Sa=!ra&&Sa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Bb=0;Bb<Aa.length-1;Bb++){var qa=Aa[Bb];if(!(qa in Sa))return;Sa=Sa[qa]}Aa=Aa[Aa.length-1];Ha=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Ha?Sa[Aa]:null;wa=wa(Ha);null!=wa&&(ra?$jscomp.defineProperty($jscomp.polyfills,Aa,{configurable:!0,writable:!0,value:wa}):wa!==Ha&&($jscomp.propertyToPolyfillSymbol[Aa]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(Aa):
$jscomp.POLYFILL_PREFIX+Aa,Aa=$jscomp.propertyToPolyfillSymbol[Aa],$jscomp.defineProperty(Sa,Aa,{configurable:!0,writable:!0,value:wa})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(ra,wa){for(var Ha=1;Ha<arguments.length;Ha++){var Sa=arguments[Ha];if(Sa)for(var Aa in Sa)$jscomp.owns(Sa,Aa)&&(ra[Aa]=Sa[Aa])}return ra};$jscomp.polyfill("Object.assign",function(ra){return ra||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(ra){var wa=0;return function(){return wa<ra.length?{done:!1,value:ra[wa++]}:{done:!0}}};$jscomp.arrayIterator=function(ra){return{next:$jscomp.arrayIteratorImpl(ra)}};$jscomp.makeIterator=function(ra){var wa="undefined"!=typeof Symbol&&Symbol.iterator&&ra[Symbol.iterator];return wa?wa.call(ra):$jscomp.arrayIterator(ra)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(ra){function wa(){this.batch_=null}function Ha(qa){return qa instanceof Aa?qa:new Aa(function(Ja,Qa){Ja(qa)})}if(ra&&!$jscomp.FORCE_POLYFILL_PROMISE)return ra;wa.prototype.asyncExecute=function(qa){if(null==this.batch_){this.batch_=[];var Ja=this;this.asyncExecuteFunction(function(){Ja.executeBatch_()})}this.batch_.push(qa)};var Sa=$jscomp.global.setTimeout;wa.prototype.asyncExecuteFunction=function(qa){Sa(qa,0)};wa.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var qa=this.batch_;this.batch_=[];for(var Ja=0;Ja<qa.length;++Ja){var Qa=qa[Ja];qa[Ja]=null;try{Qa()}catch(eb){this.asyncThrow_(eb)}}}this.batch_=null};wa.prototype.asyncThrow_=function(qa){this.asyncExecuteFunction(function(){throw qa;})};var Aa=function(qa){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ja=this.createResolveAndReject_();try{qa(Ja.resolve,Ja.reject)}catch(Qa){Ja.reject(Qa)}};Aa.prototype.createResolveAndReject_=function(){function qa(eb){return function(nb){Qa||
(Qa=!0,eb.call(Ja,nb))}}var Ja=this,Qa=!1;return{resolve:qa(this.resolveTo_),reject:qa(this.reject_)}};Aa.prototype.resolveTo_=function(qa){if(qa===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(qa instanceof Aa)this.settleSameAsPromise_(qa);else{a:switch(typeof qa){case "object":var Ja=null!=qa;break a;case "function":Ja=!0;break a;default:Ja=!1}Ja?this.resolveToNonPromiseObj_(qa):this.fulfill_(qa)}};Aa.prototype.resolveToNonPromiseObj_=function(qa){var Ja=void 0;
try{Ja=qa.then}catch(Qa){this.reject_(Qa);return}"function"==typeof Ja?this.settleSameAsThenable_(Ja,qa):this.fulfill_(qa)};Aa.prototype.reject_=function(qa){this.settle_(2,qa)};Aa.prototype.fulfill_=function(qa){this.settle_(1,qa)};Aa.prototype.settle_=function(qa,Ja){if(0!=this.state_)throw Error("Cannot settle("+qa+", "+Ja+"): Promise already settled in state"+this.state_);this.state_=qa;this.result_=Ja;this.executeOnSettledCallbacks_()};Aa.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var qa=0;qa<this.onSettledCallbacks_.length;++qa)Bb.asyncExecute(this.onSettledCallbacks_[qa]);this.onSettledCallbacks_=null}};var Bb=new wa;Aa.prototype.settleSameAsPromise_=function(qa){var Ja=this.createResolveAndReject_();qa.callWhenSettled_(Ja.resolve,Ja.reject)};Aa.prototype.settleSameAsThenable_=function(qa,Ja){var Qa=this.createResolveAndReject_();try{qa.call(Ja,Qa.resolve,Qa.reject)}catch(eb){Qa.reject(eb)}};Aa.prototype.then=function(qa,Ja){function Qa(tb,Cb){return"function"==
typeof tb?function(Lb){try{eb(tb(Lb))}catch(Sb){nb(Sb)}}:Cb}var eb,nb,Tb=new Aa(function(tb,Cb){eb=tb;nb=Cb});this.callWhenSettled_(Qa(qa,eb),Qa(Ja,nb));return Tb};Aa.prototype.catch=function(qa){return this.then(void 0,qa)};Aa.prototype.callWhenSettled_=function(qa,Ja){function Qa(){switch(eb.state_){case 1:qa(eb.result_);break;case 2:Ja(eb.result_);break;default:throw Error("Unexpected state: "+eb.state_);}}var eb=this;null==this.onSettledCallbacks_?Bb.asyncExecute(Qa):this.onSettledCallbacks_.push(Qa)};
Aa.resolve=Ha;Aa.reject=function(qa){return new Aa(function(Ja,Qa){Qa(qa)})};Aa.race=function(qa){return new Aa(function(Ja,Qa){for(var eb=$jscomp.makeIterator(qa),nb=eb.next();!nb.done;nb=eb.next())Ha(nb.value).callWhenSettled_(Ja,Qa)})};Aa.all=function(qa){var Ja=$jscomp.makeIterator(qa),Qa=Ja.next();return Qa.done?Ha([]):new Aa(function(eb,nb){function Tb(Lb){return function(Sb){tb[Lb]=Sb;Cb--;0==Cb&&eb(tb)}}var tb=[],Cb=0;do tb.push(void 0),Cb++,Ha(Qa.value).callWhenSettled_(Tb(tb.length-1),nb),
Qa=Ja.next();while(!Qa.done)})};return Aa},"es6","es3");$jscomp.polyfill("Math.log2",function(ra){return ra?ra:function(wa){return Math.log(wa)/Math.LN2}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(ra){return ra?ra:function(wa){return this.then(function(Ha){return Promise.resolve(wa()).then(function(){return Ha})},function(Ha){return Promise.resolve(wa()).then(function(){throw Ha;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(ra){return ra?ra:function(wa){wa=Number(wa);return 0===wa||isNaN(wa)?wa:0<wa?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function ra(){Ra.mode=ob.realtime;Ra.isRT=!0;ya.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(ya.adjust){ya.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");ya.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");ya.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");ya.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var U=ya.adjust;U&&U.addEventListener("click",Tb,!1);(U=ya.adjustExit)&&
U.addEventListener("click",tb,!1);[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Ha)}Ub.enabled&&Ta.do_instantDetection(Ub.interval,Ub.callback);ac&&(ac(!0),ac=null)}function wa(){var U=document.createElement("style");U.setAttribute("type","text/css");U.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var sa=document.getElementsByTagName("head");1<=sa.length?sa[0].appendChild(U):document.body.appendChild(U)}function Ha(U){U&&
(U.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(U).display&&U.classList.add("_jeelizVTOForceShow"))}function Sa(U){U&&(U.classList.add("_jeelizVTOForceHide"),U.classList.remove("_jeelizVTOForceShow"))}function Aa(U,sa){if(U)for(var Na in sa)U.style[Na]=sa[Na]}function Bb(U){if(!U)return{width:0,height:0};U=U.getBoundingClientRect();return{width:U.width,height:U.height}}function qa(U){return new Promise(function(sa,Na){var La=new XMLHttpRequest;La.open("GET",U,!0);La.onreadystatechange=
function(){if(4===La.readyState)if(200===La.status||0===La.status)try{var Za=JSON.parse(La.responseText);sa(Za)}catch(db){Na("INVALID JSON")}else Na("HTTP ERROR "+La.status)};La.send()})}function Ja(U,sa){return new Promise(function(Na,La){qa(U).then(function(Za){Ta.set_modelStandalone(Za,Lb.bind(null,sa,Na),sa)}).catch(La)})}function Qa(){eb("INVALID_SKU")}function eb(U){wc.error?wc.error(U):console.log("ERROR:",U)}function nb(){var U=Bb(ya.container),sa=Math.abs(ib.displayHeight-U.height);1>=Math.abs(ib.displayWidth-
U.width)&&1>=sa?console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize"):(ib.displayWidth=U.width,ib.displayHeight=U.height,console.log("INFO in JeelizVTOWidget.resize: width = "+ib.displayWidth.toString()+" height = "+ib.displayHeight.toString()+" oFactor = "+(1).toString()),ib.cvWidth=Math.round(1*ib.displayWidth),ib.cvHeight=Math.round(1*ib.displayHeight),Aa(ya.cv,{width:ib.displayWidth.toString()+"px",height:ib.displayHeight.toString()+"px"}),ya.cv.width=ib.cvWidth,
ya.cv.height=ib.cvHeight,Ta&&(Ra.mode===ob.notLoaded?Ta.set_size(ib.cvWidth,ib.cvHeight,!1):Ta.resize(ib.cvWidth,ib.cvHeight,!1)))}function Tb(){[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Sa);Ra.mode=ob.adjust;[ya.adjustNotice,ya.adjustExit].forEach(Ha);ya.cv.style.cursor="move";Ta.switch_modeInteractor("movePinch");kc("ADJUST_START")}function tb(){[ya.adjustNotice,ya.adjustExit].forEach(Sa);[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Ha);ya.cv.style.cursor=
"auto";Ra.mode=Ra.realtime;Ta.switch_modeInteractor("idle");kc("ADJUST_END")}function Cb(){if(!ya.trackIframe){var U=lc.appstaticURL+"jeewidget/";ya.trackIframe=document.createElement("iframe");ya.trackIframe.width="10";ya.trackIframe.height="10";ya.trackIframe.src=U+"trackIframe.html";Aa(ya.trackIframe,{position:"absolute",zIndex:-1,bottom:"0px",right:"0px"});ya.container.appendChild(ya.trackIframe)}}function Lb(U,sa){Ra.mode=ob.realtime;sa&&sa();wb.toggle_loading(!1);if(ya.trackIframe){sa=location.href.split("?").shift().split("://").pop();
sa=sa.split("/").shift();sa=sa.split("www.").pop();try{ya.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:sa,sku:U},"*")}catch(Na){}}}function Sb(U,sa,Na,La){var Za=sa.mod+".json";sa.isStandalone?Ja(xc+"models3DStandalone/"+Za,U).then(Na):Ta.load_model(Za,sa.mats,Lb.bind(null,U,Na),U,La)}function kc(U){(U=Hc[U])&&U()}var Ta=function(){function U(a,b){return a[0]*(1-b)+a[1]*b}function sa(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=
function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Na(a,b){sa(a+"",function(d){b(JSON.parse(d))})}function La(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=La(a[d],b);return a}function Za(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function db(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";
case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Db(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function Ma(a,b,d){var e=1,k=0;for(d=b+d-1;d>=b;--d)k+=e*Db(a,d),e*=2;return k}function jb(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,
d=new Uint8Array(b),e=0;e<b;++e)d[e]=a.charCodeAt(e);return d}function qb(a){return"string"===typeof a?JSON.parse(a):a}function Jb(a){return"undefined"===typeof qb(a).nb?Mb(a):xb(a)}function xb(a){var b=qb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var d=b.n;b=jb(b);for(var e=new Uint32Array(d),k=0;k<d;++k)e[k]=Ma(b,k*a,a);return e}function Mb(a){var b=qb(a);a=b.ne;var d=b.nf,e=b.n;b=jb(b);for(var k=new Float32Array(e),m=new Float32Array(d),w=a+d+1,n=0;n<e;++n){var q=w*n,r=0===Db(b,q)?1:-1,y=
Ma(b,q+1,a);q=q+1+a;for(var G=m.length,v=0,H=q;H<q+G;++H)m[v]=Db(b,H),++v;for(G=q=0;G<d;++G)q+=m[G]*Math.pow(2,-G-1);k[n]=0===q&&0===y?0:r*(1+q)*Math.pow(2,1+y-Math.pow(2,a-1))}return k}function bc(a){var b=null,d=null,e=null,k=0,m=this,w=null,n={Mc:[],Zd:"none",dg:!1,Yd:null,grid:null,Ec:[1,1]};this.m=function(){this.Nk(w.Mc);e.qo({Zd:w.Zd,dg:w.dg,Yd:w.Yd})};this.Sl=function(q){return b[q]};this.ue=function(q){["s31","s33","s26"].forEach(function(r){Z.j(r,[{type:"2f",name:"u20",value:q}])});b&&b.forEach(function(r){r.ue(q)})};
this.Nk=function(q){var r=null;k=q.length;var y=null!==w.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),G=y?w.grid:[1,1];y&&this.ue(G);b=q.map(function(v,H){v=Object.assign({},v,{index:H,parent:m,de:r,Dm:H===k-1,Sb:y,Aa:G,Ec:1===H?w.Ec:[1,1]});return r=0===H?Zc.instance(v):$c.instance(v)});d=b[0];e=b[k-1];b.forEach(function(v,H){0!==H&&v.pn()})};this.wa=function(q){q.h(0);var r=q;b.forEach(function(y){r=y.wa(r,!1)});return r};this.Uh=function(){return d.Rl()};this.Dc=function(){return e.Vl()};
this.Qh=function(){return e.Qh()};this.v=function(){b&&(b.forEach(function(q){q.v()}),e=d=b=null,k=0)};"undefined"!==typeof a&&(w=Object.assign({},n,a),this.m())}function Eb(a,b){a[b]=!0;a.setAttribute(b,"true")}function Vb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function mc(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function cc(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function dc(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&nc(b,a.deviceId);return b}function nc(a,b){b&&
(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function ec(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}function fc(a){function b(v){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(H,u){return Math.abs(H-v)-Math.abs(u-v)})}function d(v){var H=dc(a);v=v(H);k.push(v);e(v)}function e(v){if(v.video&&v.video.facingMode&&v.video.facingMode.exact){var H=v.video.facingMode.exact;v=dc(v);delete v.video.facingMode.exact;
v.video.facingMode.ideal=H;k.push(v)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var m=b(a.video.width.ideal).slice(0,3),w=b(a.video.height.ideal).slice(0,3),n={},q=0;for(n.lb=void 0;q<m.length;n={lb:n.lb},++q){n.lb=m[q];var r={},y=0;for(r.kb=void 0;y<w.length;r={kb:r.kb},++y)if(r.kb=w[y],n.lb!==a.video.width.ideal||r.kb!==a.video.height.ideal){var G=Math.max(n.lb,r.kb)/Math.min(n.lb,r.kb);G<4/3-.1||G>16/9+.1||d(function(v,
H){return function(u){u.video.width.ideal=v.lb;u.video.height.ideal=H.kb;return u}}(n,r))}}}d(function(v){return ec(v)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(v){delete v.video.width.ideal;delete v.video.height.ideal;return v}),d(function(v){delete v.video.width;delete v.video.height;return v}));a.video.facingMode&&(d(function(v){delete v.video.facingMode;return v}),a.video.width&&a.video.height&&d(function(v){ec(v);delete v.video.facingMode;return v}));
k.push({audio:a.audio,video:!0});return k}function oc(a){try{var b=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(e){b=window.innerHeight>window.innerWidth}if(b&&a&&a.video){b=a.video.width;var d=a.video.height;b&&d&&b.ideal&&d.ideal&&b.ideal>d.ideal&&(a.video.height=b,a.video.width=d)}}function Nb(a){a.volume=0;Eb(a,"muted");if(cc()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",
b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Eb(a,"muted")},5)}}function ad(a){var b=Ba.element,d=Ba.rh;return null===b?Promise.resolve():new Promise(function(e,k){if(b.srcObject&&b.srcObject.getVideoTracks){var m=b.srcObject.getVideoTracks();1!==m.length?k("INVALID_TRACKNUMBER"):(m=m[0],a?Ic(b,e,k,d):(m.stop(),e()))}else k("BAD_IMPLEMENTATION")})}function Jc(a,b,d,e){function k(w){m||(m=!0,d(w))}var m=!1;navigator.mediaDevices.getUserMedia(e).then(function(w){function n(){setTimeout(function(){if(a.currentTime){var r=
a.videoHeight;if(0===a.videoWidth||0===r)k("VIDEO_NULLSIZE");else{var y={Vk:null,Cg:null,Zm:null};try{var G=w.getVideoTracks()[0];G&&(y.Zm=G,y.Vk=G.getCapabilities(),y.Cg=G.getSettings())}catch(v){}cc()||Vb()?a.parentNode&&null!==a.parentNode?(m||b(a,w,y),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),Nb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Nb(a);setTimeout(function(){a.play();m||b(a,
w,y)},100)},80)):m||b(a,w,y)}}else k("VIDEO_NOTSTARTED")},700)}function q(){a.removeEventListener("loadeddata",q,!1);var r=a.play();Nb(a);"undefined"===typeof r?n():r.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=w:(a.src=window.URL.createObjectURL(w),a.videoStream=w);Nb(a);a.addEventListener("loadeddata",q,!1)}).catch(function(w){k(w)})}function Ic(a,b,d,e){if(a)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if(e&&
e.video&&Vb()){var k=mc();0!==k[0]&&(12>k[0]||12===k[0]&&2>k[1])&&oc(e)}Eb(a,"autoplay");Eb(a,"playsinline");e&&e.audio?a.volume=0:Eb(a,"muted");Jc(a,b,function(){function m(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var q=n.shift();Jc(a,b,function(){m(n)},q)}}var w=fc(e);m(w)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function bd(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=
b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function cd(){function a(M){M=M?pc.jf:1;P.width=M*I.width;P.height=M*I.height;return P}function b(M){var R=M.length-1,ha=M[R];if("data:"===ha.substring(0,5))return ha;for(ha="";0<=R;--R){var pa=M[R],Ia="http"===pa.substring(0,4).toLowerCase();ha=pa+ha;if(Ia)break}return ha}function d(M,
R,ha){return new Promise(function(pa){xa.Aj(R);za.$();Oa.isEnabled=!0;Ea.isEnabled=!1;Oa.Na||(Oa.Na=gc.instance({}));M.Vh()&&(Oa.Na.pj(M.Vh()),xa.oa(Oa.Na));M.set();Ea.isEnabled=!1;y();var Ia=kb.Sh(ha);setTimeout(function(){Oa.isEnabled=!1;xa.Aj(!1);pa(Ia)},1)})}function e(M,R){ka.Xc=.5;return new Promise(function(ha){Ea.bc=M;Ea.isEnabled=!0;Ea.B=function(){var pa=Kc.instance(R());Ea.B=null;ha(pa)}})}function k(M,R){return new Promise(function(ha,pa){Na(R+M,function(Ia){Ia.error?pa("SKU_NOT_FOUND"):
ha({$m:Ia.intrinsic.mod+".json",Ym:Ia.intrinsic.mats})})})}function m(M,R){var ha=b([I.ca,I.ua,I.Vd+"/"]);R=R.map(function(pa){return ha+pa});V.model={url:b([I.ca,I.ua,I.Wd+"/"+M]),Pc:R,Ib:!1,Hb:!1};return new Promise(function(pa){Pa.Ci(V.model,function(){S.isBusy=!1;pa()})})}function w(M,R){if(!R)return M;M=M.slice(0);var ha=gb.Wl().map(function($a){return $a.toLowerCase()}),pa;for(pa in R){var Ia=ha.indexOf(pa.toLowerCase());-1!==Ia&&(M[Ia]=R[pa])}return M}function n(M,R){return new Promise(function(ha,
pa){S.set_model(M,function(){S.set_materials(R,function(){S.isBusy=!1;ha()})},function(){S.isBusy=!1;pa()})})}function q(){S.load_model=function(M,R,ha,pa,Ia,$a){if(S.isBusy)return!1;S.isBusy=!0;R=w(R,Ia);(V.model?n(M,R):m(M,R)).then(ha).catch($a);return!0};S.set_offset=function(M){O=M;Pa.ve()};S.set_scale=function(M){D=M;Pa.we()};S.set_rx=function(M){W=M;Pa.Oj()};S.switch_shadow=xa.Hg;S.switch_bgBlur=xa.Gg;S.set_zoom=xa.ug;S.is_viewer3D=function(){return ca===da.Ga};S.switch_viewer3D=function(M,
R){if(ca===da.mc||ca===da.nc||ca===da.W&&!M||ca===da.Ga&&M||Ea.isEnabled)return!1;if(ca===da.ta)return mb!==da.Ga||M?mb===da.W&&M?(mb=da.Ga,xa.oa(ka.Db),xa.ab(1),R&&R(),!0):!1:(mb=da.W,xa.oa(ka.Fa),xa.ab(0),R&&R(),!0);var ha=0,pa=-1,Ia=0;ca===da.W?(ca=da.mc,pa=I.Xo):ca===da.Ga&&(ca=da.nc,pa=I.$o);var $a=yc.qf();Ca=setInterval(function(){var Ob=yc.qf();ha+=(Ob-$a)/pa;1<=ha&&(ha=1,ca===da.mc?(ca=da.Ga,xa.oa(ka.Db)):(ca=da.W,xa.oa(ka.Fa)),R&&R(),clearInterval(Ca),Ca=null);var hb=ca===da.nc||ca===da.W?
1-I.Vo(ha):I.Uo(ha);xa.ab(hb);ca!==da.nc&&ca!==da.mc||0!==Ia++%2||(xa.oa(ka.Yf),ka.Yf.ko(hb));$a=Ob},.016);return!0};S.capture_image=function(M,R,ha,pa){Ea.bc=M;Ea.isEnabled=!0;"undefined"===typeof isAllocate&&(ha=!1);(pa="undefined"===typeof pa?!1:pa)&&xa.oe(!1);f();Ea.B=function(){xa.Yi(0);c.flush();var Ia=kb.Sh(ha);R(Ia);pa&&xa.oe(!0)}};S.capture_detection=function(M,R){var ha=null===ja.Eb?ja.ib:ja.$c;e(M,function(){return{pd:ma.pc.clone(),Zf:gb.Yh(),Vf:gb.Wh(),background:ha.clone(),Na:ua.Ha.Zh().clone(),
Uf:Xa}}).then(R)};S.process_image=function(M){function R(){return new Promise(function(hb,pb){Ea.Rg=$a.updateLightInterval;e($a.nSteps,function(){return{pd:ma.pc.clone(),Zf:!1,Vf:!1,background:I.pq?!1:ja.ib.clone(!0),Na:ua.Ha.Zh().clone()}}).then(function(lb){Ea.Rg=3;lb?1>=lb.Yl().data[0]?pb("FACE_NOT_FOUND"):d(lb,$a.isMask,!0).then(function(dd){xa.oa(ka.Fa);hb(dd)}):pb("CRITICAL")});y()})}function ha(){return new Promise(function(hb,pb){k($a.modelSKU,$a.glassesDBURL).then(function(lb){S.load_model(lb.$m,
lb.Ym,function(){hb()},$a.modelSKU,null,function(){pb("CANNOT_LOAD_MODEL")})}).catch(function(lb){pb(lb)})})}function pa(){if($a.image){var hb=$a.image;Ia(hb);return Promise.resolve(hb)}return new Promise(function(pb){var lb=new Image;lb.onload=function(){Ia(lb);pb()};lb.src=$a.imageBase64})}function Ia(hb){var pb=hb.width,lb=hb.height;if(pb!==I.width||lb!==I.height)Ba.Nd&&(Ba.element.width=pb,Ba.element.height=lb),K(pb,lb,$a.overSamplingFactor);Ba.Fh.drawImage(hb,0,0);f()}var $a=Object.assign({imageBase64:null,
image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",isMask:!0},M);if(I.Jc)throw Error("This feature cannot be called");var Ob=ab.FOVforced;$a.FOVHztDeg&&(ab.FOVforced=$a.FOVHztDeg);xa.oa(ka.Fa);return new Promise(function(hb,pb){return ha().then(pa).then(function(){R().then(function(lb){ab.FOVforced=Ob;hb(lb)}).catch(pb)}).catch(pb).catch(pb)})};S.process_offlineRendering=function(M,R,ha,pa,Ia){Pa.Kn();
pa&&(S.$j.drawImage(kb.sb(),0,0),kb.sb().parentNode.insertBefore(S.Fb,kb.sb()),S.Fb.setAttribute("class","jeefitMask"));S.set_model(R,function(){S.set_materials(ha,function(){setTimeout(function(){d(M,pa).then(Ia);Pa.Hn(pa?function(){kb.sb().parentNode.removeChild(S.Fb)}:!1)},1)})})};S.serialize_detection=function(M){return M.cc()};S.unserialize_detection=function(M,R,ha){return Kc.Zc(M,R,ha)};S.do_instantDetection=function(M,R){Lc.m(ma.pc);Lc.start(M,R)};S.relieve_DOM=function(M,R){if(T.Wb)return!1;
v(R||160);Fa=!1;ia&&clearTimeout(ia);ia=setTimeout(function(){v(I.ya);ia=!1;u()},M);return!0};S.switch_slow=function(M,R){if(T.Wb)return!1;"undefined"===typeof R&&(R=I.hk);ia&&(v(I.ya),u(),clearTimeout(ia),ia=!1);M?Fa=!1:u();v(M?R:I.ya);return!0};S.switch_deepSleep=function(M){if(bb===M)return!1;bb=!1;S.switch_sleep(M);bb=M;return!0};S.switch_sleep=function(M,R){function ha(){S.isBusy=!1;M?(mb=ca,ca=da.ta):(ca=mb,y())}if(T.Wb||bb||S.isBusy)return R?Promise.reject():null;if(M&&ca===da.ta||!M&&ca!==
da.ta)return R?Promise.resolve(!1):!1;Ca&&(clearInterval(Ca),Ca=null);ca===da.nc?(ca=da.W,xa.oa(ka.Fa),xa.ab(0)):ca===da.mc&&(ca=da.Ga,xa.oa(ka.Db),xa.ab(1));yb.stop();var pa=null;S.isBusy=!0;R?pa=ad(!M).then(ha):ha();return R?pa:!0};S.set_modelStandalone=function(M,R){xa.pe(!1);zc.instance({url:M.model,Pc:M.materials,Ib:!1,Hb:!1,B:function(ha){Kb=[0,0,0];ea=1;ta=F=A=0;Ya=I.Nc;S.ready&&Pa.xe();R&&R();G(ha);Pa.Eg();xa.pe(!0)}})};S.start_rendering=Pa.Eg;S.update_material=function(M,R){gb&&gb.Jo(M,R)};
S.set_model=function(M,R,ha){gb&&(M=b([I.ca,I.ua,I.Wd+"/",M]),gb.replace(M,function(){R&&R(gb.Zk())},ha))};S.set_tweaker=function(M,R){function ha(pa){S.fh(pa);R&&R()}"string"===typeof M?sa(I.ca+I.ua+I.Co+"/"+M,ha):ha(M)};S.fh=function(M){M&&(M.preOffset&&(Kb=M.preOffset),M.preScale&&(ea=M.preScale),M.rx&&(A=M.rx),M.beginBendZ&&(F=M.beginBendZ),M.bendStrength&&(ta=M.bendStrength),M.maskBranchStartEnd&&(Ya=M.maskBranchStartEnd),S.ready&&Pa.xe())};S.set_materials=function(M,R){if(gb){var ha=b([I.ca,
I.ua,I.Vd+"/"]);M=M.map(function(pa){var Ia=pa;"string"===typeof pa&&(Ia=ha+pa,Ia=Ia.replace(/([^:])\/\//,"$1/"));return Ia});gb.vg(M,R)}}}function r(){fa.Ug(pc.Cl);Pa.Yc();I.$b&&(za.reset(),ua.Ha.jh(Ba.ga_),ua.Ha.ih());S.ready=!0;S.ed.forEach(function(M){M()});S.ed.splice(0)}function y(){Fb.reset();yb.stop();za.$();H(0)}function G(M){gb&&(xa.Bn(gb),gb.remove());xa.ck(M);gb=M}function v(M){Q=M;yb.update({ya:Q})}function H(M){oa=-1;Ea.isEnabled?oa=Ea.bc:Oa.isEnabled?oa=Oa.bc:Fa?(f(),oa=ca===da.W?Fb.V():
1):(oa=I.bd[0],f());za.$();if(!Oa.isEnabled)for(var R=0;R<oa;++R)Z.set("s63"),ja.Gf.L(),ja.ib.h(0),ma.Qc.h(1),X.l(!1,!1),t.wa(ja.Gf),Ea.isEnabled&&0===(R+1)%Ea.Rg&&g();Ea.isEnabled?(Ea.B&&Ea.B(),Ea.isEnabled=!1,c.flush(),ca!==da.ta&&yb.pg(H)):(xa.animate(M),ja.lg&&va-ka.zi>ka.Dj&&I.$b&&ca===da.W&&(za.$(),g(),za.ba()),Oa.isEnabled||(Fa&&(Fb.Hj(),R=Fb.Rh(1),Y=U(I.fk,R),I.$b&&ca===da.W&&(ka.Dj=U(I.Bi,R),ka.Xc=U(I.Rm,R),ka.Xc=Math.min(ka.Xc,.5))),va=M,ca!==da.ta&&yb.pg(H)))}function u(){va=yc.qf();Fa=
!0}function f(){var M=15;if(!Ba.Nd){var R=Ba.element.currentTime;M=R-qc;0>M&&(qc=R);if(1E3*M<I.Po)return}Ba.ga_.refresh();qc+=M;Ba.wd=M;Da=!0;za.$();Z.set("s0");ma.mg.L();ma.Qc.Kk(0);X.l(!0,!0);Z.set("s61");ja.ib.L();Ba.ga_.h(0);X.l(!1,!1);null!==ja.Eb&&(Z.set("s62"),ja.$c.o(),ja.ib.h(0),ja.Eb.h(1),X.l(!1,!1))}function h(){ja.Sj=aa.instance({isPot:!0,isLinear:!0,isFloat:!1,url:I.ca+I.ua+I.Qo});var M={isPot:!1,isLinear:!0,isFloat:!1,width:P.width,height:P.height};ja.ib=aa.instance(M);ja.$c=aa.instance(M);
T.Ej.push(ja.ib,ja.$c);ja.Gf=aa.instance({isPot:!0,isFloat:!1,width:t.Uh()});I.Sd&&(rb=aa.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(I.Tf||-1!==I.Sf.indexOf("//")?"":I.ca+I.ua)+I.Sf}))}function B(){function M(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0])}}var R={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};ma.Qc=Mc.instance(M());ma.mg=aa.instance(M());ma.pc=aa.instance(M());ma.ae=Mc.instance(M());ma.cf=
aa.instance(R);R={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};ma.Vg=aa.instance(R);ma.ze=aa.instance(R);ka.be=aa.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function J(M){ja.lg=M;if(Da){Da=!1;Z.set("s69");ma.Vg.L();ma.ze.h(2);var R=U(I.Mk,Fb.Rh(.5));Z.H("u67",R);ma.mg.h(1);Z.H("u68",1E3*Ba.wd);X.l(!1,!1);Z.set("s70");ma.ze.o();ma.Vg.h(0);X.l(!1,!1)}M.h(0);ma.Qc.lj(1);c.viewport(0,0,1,1);Z.set("s64");Z.Ag("u47",Nc.get(0));X.l(!1,
!1);Z.set("s65");c.viewport(1,0,2,1);X.l(!1,!1);ma.cf.L();Z.set("s66");Z.N("u58",I.Ke[0]*Y,I.Ke[1]);ma.Qc.h(0);ma.ae.h(1);X.l(!1,!1);Z.set("s67");ma.ae.lj(1);ma.cf.h(0);ma.ze.h(2);ma.Qc.h(3);X.l(!1,!1);Z.set("s68");ma.ae.h(0);ma.pc.o();X.l(!1,!1)}function g(){ka.zi=va;ka.be.L();Z.set(ba.oi?"s72":"s71");ja.lg.h(0);X.l(!1,!1);ua.Ha.Rj(Ba.ga_,ka.be,ka.Xc)}function p(){return new Promise(function(M){var R=I.ca,ha=I.ad.split("://").shift();if("http"===ha||"https"===ha)R="";R+=I.ad;"json"!==R.split(".").pop()&&
(R+=I.neuralNetworkPath);sa(R,function(pa){pa=JSON.parse(pa);if(pa.exportData){var Ia=pa.exportData;ba.Za=ba.Za||Ia.rotationEulerAnglesFactors;ba.Bc=ba.Bc||Ia.deformScaleXFactor;ba.ra=ba.ra||Ia.translationScalingFactors;ba.Eh=Ia.dyOffset||0;ba.Ch=Ia.dsOffset||0;ba.oi=Ia.isLThetaSplitCosSin||!1}t=new bc({Mc:pa.layers,Zd:"gpuRawAvg",Yd:J});M()})})}function l(M){a(M);M=I.width;var R=I.height;N.pb[0]=1;N.pb[1]=M/R;Nc.m({$d:I.scanOverlapFactors,Ji:I.scanNScaleLevels,Z:M,Cf:R,dj:I.scanScale0Factor,ra:ba.ra,
qg:!0});rc=M>R?[M/R,1]:[1,R/M];T.La=!0}function C(){Z.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:N.pb},{type:"1f",name:"u43",value:ba.Bc},{type:"1f",name:"u45",value:ba.Eh},{type:"1f",name:"u44",value:ba.Ch}]);Z.j("s64",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:I.Ao},{type:"1f",name:"u52",value:I.gl},{type:"3f",name:"u48",value:[ba.ra[0]*N.pb[0],ba.ra[1]*N.pb[1],ba.ra[2]]},{type:"3f",name:"u49",
value:[I.oc[0][0],I.oc[1][0],I.oc[2][0]]},{type:"3f",name:"u50",value:[I.oc[0][1],I.oc[1][1],I.oc[2][1]]}]);Z.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u55",value:I.sn},{type:"3f",name:"u53",value:ba.Za},{type:"3f",name:"u54",value:I.Gj},{type:"1f",name:"u56",value:I.Dl}]);Z.j("s66",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:I.Ke},{type:"1f",name:"u59",value:I.In},{type:"1f",name:"u60",value:I.rn}]);Z.j("s67",
[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",name:"u63",value:3},{type:"2f",name:"u42",value:N.pb},{type:"1f",name:"u65",value:t.Uh()},{type:"2f",name:"u64",value:I.En}]);Z.j("s68",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",value:I.Ln}]);Z.j("s69",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:ba.Za},{type:"3f",name:"u54",value:I.Gj}]);Z.j("s70",[{type:"1i",
name:"u62",value:0},{type:"2f",name:"u70",value:I.Bo},{type:"2f",name:"u71",value:I.Jn}]);Z.j("s71",[{type:"1i",name:"u46",value:0}]);Z.j("s72",[{type:"1i",name:"u46",value:0}]);Z.j("s62",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function K(M,R,ha){var pa=0===ha,Ia=a(pa);I.width=M;I.height=R;l(pa);C();T.Ej.forEach(function($a){$a.resize(M,R)});ha=pa?1:ha;fa.resize(Ia.width*ha,Ia.height*ha);Pa.Yc();fb.Bg(Ba.element.videoWidth||Ba.element.width,Ba.element.videoHeight||Ba.element.height);
fb.Ig();fb.Bj()}function L(){yb.stop();T.fb&&(clearTimeout(T.fb),T.fb=null);if(!T.Wb){var M=T.width,R=T.height;if(I.width===M&&I.height===R)y();else if(ca!==da.W&&ca!==da.Ga)T.fb=setTimeout(L,I.bj);else{var ha="undefined"===typeof vb?!1:vb.get_mode(),pa=ca;ca=da.ta;T.Wb=!0;Ea.isEnabled=!0;Ea.B=function(){Ea.isEnabled=!1;T.Wb=!1;u();v(I.ya);ia&&clearTimeout(ia);ia=!1;ca=pa};K(M,R,0);y();ca===da.Ga&&(ca=da.W,S.switch_viewer3D(!0,!1));ha&&vb.switch_mode(ha)}}}var A,F,N={pb:[-1,-1]},x=null,z=[.5,0,0,
.5],P={width:-1,height:-1},T={width:-1,height:-1,fb:null,Wb:!1,La:!1,Ej:[]},la=[0,I.ce[1],I.ce[2]],ba={Za:[-I.Za[0],-I.Za[1],I.Za[2]],Bc:I.Bc,ra:I.ra,Eh:0,Ch:0,oi:!1},Q=I.ya,ia=null,t=null;a(!0);var O=[0,0,0],D=1,W=0,ja={ib:null,$c:null,Gf:null,Sj:null,lg:null,Eb:null},ma={mg:null,pc:null,ae:null,cf:null,Vg:null,ze:null},va=0,Da=!1,ka={Fa:null,Db:null,Yf:null,zi:0,Dj:I.Bi[1],Xc:.1,be:null},na=!1,Fa=!0,Y=1,oa=-1,da={ta:-1,W:0,Ga:1,mc:2,nc:3},ca=da.W,Ca=null,mb=da.W,bb=!1,Ea={isEnabled:!1,bc:1,Rg:3,
B:null},Oa={isEnabled:!1,Na:null,bc:0},rb=null,rc=-1,zb=!1,Gb=!1,Pb=!1,hc=[0,0,0],Qb=1,Wb,ic,Ua,Kb=[0,0,0],ea=1,ta=F=A=0,Ya=I.Nc,Ka=[0,0,0],Xa={scale:1,offsetX:0,offsetY:0},qc=0,Pa={m:function(){Z.uc([{id:"s61",name:"_",u:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",J:["a0"],R:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s63",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",J:["a0"],R:[2],
i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s64",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s65",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.,1.,1.,1.),f=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.,1.,1.,1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 c=texture2D(u41,vv0),d=texture2D(u57,vv0),o=texture2D(u41,g),j=texture2D(u57,g);float k=pow(j.a,u60),l=mix(u58.x,u58.y,1.-k),a=step(.34,vv0.x)*step(vv0.x,.66);vec4 m=mix(h,i,a),b=max(l*f,m);b*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),a);vec4 n=c-d;gl_FragColor=n*b;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s67",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 u=vec4(1.,1.,1.,1.);const vec2 g=vec2(.25,.5),h=vec2(.75,.5),f=vec2(.16,.5),i=vec2(.5,.5);varying vec2 vv0;void main(){float j=step(.33,vv0.x)*step(vv0.x,.66),v=step(.66,vv0.x);vec4 k=texture2D(u63,i);float a=k.a;a*=texture2D(u62,g).a,a*=texture2D(u62,h).a;vec4 l=texture2D(u57,vv0),m=texture2D(u61,vv0),b=l+m;b.a=mix(b.a,a,j);vec4 c=texture2D(u57,f),n=texture2D(u63,f);vec2 o=c.gb,p=n.gb;float q=c.a;vec2 d=u65*abs(o-p)/(u42*q);float r=max(d.x,d.y),s=smoothstep(u64.x,u64.y,r);vec4 t=texture2D(u63,vv0);gl_FragColor=mix(b,t,s);}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s71",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s72",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s62",name:"_",
g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);B();yb.m({ni:!1,ya:Q});Fb.m({ag:0,n:I.bd[1]-I.bd[0]+1,Ai:I.bd[0]});S.set_videoRotation=function(M){ab.rotate=M;S.ready&&(fb.Bg(Ba.element.videoWidth,Ba.element.videoHeight),fb.Ig())};S.set_viewRotation=function(){};S.set_LUT=function(M){return new Promise(function(R){M?aa.instance({url:M,isFloat:!1,isFlipY:!1,B:function(ha){ja.Eb=ha;Pa.Yc();R()}}):(ja.Eb=null,Pa.Yc(),R())})};S.resize=function(M,R,ha){S.ready&&(T.fb&&(clearTimeout(T.fb),T.fb=null),yb.stop(),ha=ha?pc.jf:1,T.width=
M*ha,T.height=R*ha,T.fb=setTimeout(L,I.bj))};return p()},xo:function(){h();l(!0);C();Pa.Bj();q();S.dd.forEach(function(M){M()});S.dd.splice(0);V.model&&!S.isBusy?Pa.Ci(V.model):I.Jc||r();return Promise.resolve()},Xl:function(){return P},v:function(){yb.v();return new Promise(function(M){S.switch_sleep(!0,!0).finally(function(){t&&t.v();fa.v();kb.v();c&&(c=null);t=null;I.Tf=!1;gb=null;Fa=!0;Y=1;oa=-1;ca=da.W;Ca=null;mb=da.W;Object.assign(Ba,Oc);Object.assign(I,Pc);M()}).catch(function(R){throw Error(R);
})})},Yc:function(){xa.jj(ma.pc,null===ja.Eb?ja.ib:ja.$c,ka.be,ja.Sj)},Ul:function(){return Xa},qj:function(M){Xa=M},ve:function(){Ka[0]=O[0]-Xa.offsetX;Ka[1]=O[1]+Xa.offsetY;Ka[2]=O[2];xa.Rn(la,Kb,Ka)},we:function(){xa.Sn(D*I.nn,ea,Xa.scale)},Oj:function(){xa.Tn(W+A)},Go:function(){xa.Pn(I.jd+F,I.Kb+ta)},Io:function(){xa.Qn(Ya)},xe:function(){Pa.ve();Pa.we();Pa.Oj();Pa.Go();Pa.Io()},Kn:function(){yb.stop();Ca&&(clearInterval(Ca),Ca=null);Oa.isEnabled=!0;Oa.bc=0;zb=xa.Tl();Gb=gb.Yh();Pb=gb.Wh();Qb=
ea;hc=Kb;Wb=Ya;ic=F;Ua=ta;Ea.isEnabled=!1;xa.oe(!1)},Hn:function(M){function R(){2===++ha&&(Oa.isEnabled=!1,ea=Qb,Kb=hc,Ya=Wb,F=ic,ta=Ua,Pa.xe(),xa.oa(zb),y(),M&&M())}var ha=0;ca===da.mc?ca=da.Ga:ca===da.nc&&(ca=da.W);xa.ab(ca===da.W?0:1);gb.replace(Gb,R);gb.vg(Pb,R);Pa.Yc();xa.oe(!0)},Bj:function(){var M=Math.tan(Ba.Pb/2);xa.ij({lf:I.lf/M,Mn:M,qn:Ba.Ti,Da:I.Da,$f:I.$f,Vj:N.pb,Zj:I.To,Fc:I.Fc,Bf:I.Bf,zf:I.zf,Af:I.Af,Nc:Ya,Le:I.Le,Ye:I.Ye,og:I.og,jc:I.jc,ro:I.vj,so:I.wj,me:I.me,kc:I.kc,qd:I.qd,af:I.af,
$e:I.$e,Ze:I.Ze,Oe:I.Oe,Ne:I.ca+I.ua+I.Ne,jd:I.jd+F,Kb:I.Kb+ta,xf:I.xf,$g:I.$g,Zg:I.Zg,Ce:I.Ce,Zo:I.Yo,Be:Ba.Be,Sd:I.Sd,Tm:rb,Rd:I.Rd,Td:I.Td,Rf:I.Rf,Sm:rc,Jg:I.Jg})},Wk:function(){var M=ab.Fe,R=ab.Ee,ha=1/Math.tan(Ba.Pb/2),pa=kb.Y()/kb.O();Ba.Ti=[ha,0,0,0,0,ha/pa,0,0,0,0,-(R+M)/(R-M),-1,0,0,-2*M*R/(R-M),0];Ba.Be=1/Math.tan(I.Wo*Math.PI/360)/ha},Bg:function(M,R){x=[.5,.5];M=R/M;R=kb.Y()/kb.O();90===Math.abs(ab.rotate)&&(M=1/M);M>R?x[1]*=R/M:x[0]*=M/R;z[0]=0;z[1]=0;z[2]=0;z[3]=0;switch(ab.rotate){case 0:z[0]=
x[0];z[3]=x[1];break;case 180:z[0]=-x[0];z[3]=-x[1];break;case 90:z[1]=x[0];z[2]=-x[1];break;case -90:z[1]=-x[0],z[2]=x[1]}I.pi||(z[0]*=-1,z[1]*=-1);R=ab.FOVforced;Ba.Pb=2*Math.atan(2*x[0]*Math.tan((R?R:1<M?ab.FOVmobile:ab.FOVdesktop)*Math.PI/180/2));Pa.Wk()},Ig:function(){Z.j("s61",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:z}])},Ff:function(M,R){return new Promise(function(ha,pa){Pa.pm(M,R);Promise.all([Pa.m(),Pa.qm()]).then(function(){Pa.gi();ha()}).catch(function(){S.ob&&S.ob("GL_INCOMPATIBLE",
"Cannot init JEELIZVTO");pa()})})},pm:function(M,R){S.Gb=document.createElement("canvas");S.Fb=document.createElement("canvas");S.Fb.width=I.width;S.Fb.height=I.height;S.$j=S.Fb.getContext("2d");S.replace_video=function(ha){Ba.element=ha;Ba.Pg.ka=Ba.element;return!0};S.tc=S.Gb.getContext("2d");S.capture_background=function(ha,pa){ha="undefined"===typeof ha?M:ha;pa="undefined"===typeof pa?R:pa;S.Gb.width=ha;S.Gb.height=pa;var Ia=ha/pa,$a=0,Ob=0;if(M/R>Ia){var hb=R*Ia;Ia=R;$a=Math.round((M-hb)/2)}else hb=
M,Ia=M/Ia,Ob=Math.round((R-Ia)/2);S.tc.save();S.tc.translate(ha,0);S.tc.scale(-1,1);S.tc.drawImage(Ba.element,$a,Ob,hb,Ia,0,0,ha,pa);S.tc.restore();ha=document.createElement("canvas");ha.width=S.Gb.width;ha.height=S.Gb.height;ha.getContext("2d").drawImage(S.Gb,0,0);return ha}},gi:function(){window.CanvasListeners&&(vb.init({qa:kb.sb()}),S.init_listeners=Pa.gi,S.add_listener=vb.add_listener,S.remove_listener=vb.remove_listener,S.animate_swipe=vb.animate_swipe,S.switch_modeInteractor=vb.switch_mode,
S.get_modeInteractor=vb.get_mode,vb.add_listener("move",function(M,R){ca===da.W&&(I.Um&&(Xa.offsetX-=R[0]*I.Ei,Xa.offsetX=Math.min(Math.max(Xa.offsetX,-I.Ud),I.Ud)),Xa.offsetY-=R[1]*I.Ei,Xa.offsetY=Math.min(Math.max(Xa.offsetY,-I.Ud),I.Ud),Pa.ve())},!0).add_listener("pinch",function(M,R){ca===da.W&&(Xa.scale+=R*I.Vm,Xa.scale=Math.min(Math.max(Xa.scale,I.Fi[0]),I.Fi[1]),Pa.we())},!0))},qm:function(){return new Promise(function(M,R){fa.m({Md:!1,Uk:!1,expand:!1,qa:kb.sb(),Qb:kb,onload:function(){ka.Db=
gc.instance({Jb:I.ca+I.ua+cb.Ro,wc:I.ca+I.ua+cb.So,vc:cb.Tj,xc:cb.Uj});I.$b?(ka.Fa=gc.instance({}),ua.Ha.oa(ka.Fa)):ka.Fa=ka.Db;xa.oa(ka.Fa);ka.Yf=I.$b?ed.instance({Qm:ka.Fa,Om:ka.Db}):ka.Db;M()}})||R()})},Eg:function(){na||(na=!0,Pa.xe(),r(),va=0,I.Jc&&y())},Ci:function(M,R){M=zc.instance({Pe:function(){Pa.Eg();R&&R()},url:M.url,Pc:M.Pc,Ib:M.Ib,Hb:M.Hb});G(M)},Cj:function(){if(I.$b){var M=Object.assign({},cb,{zb:b([I.ca,I.ua,cb.zb])});ua.Ha.gb(M)}}};return Pa}function fd(){return new Promise(function(a,
b){S.He&&S.He();Ba.Nd=!1;var d={width:{min:ab.minWidth,max:ab.maxWidth,ideal:ab.idealWidth},height:{min:ab.minHeight,max:ab.maxHeight,ideal:ab.idealHeight},facingMode:{ideal:"user"}},e={video:d,audio:!1};Ba.rh=e;d&&-1!==Ba.deviceId&&nc(e,Ba.deviceId);Ic(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(k){S.Ie&&S.Ie(k);Qc(k).then(a).catch(b)},function(k){S.ob&&S.ob("WEBCAM_UNAVAILABLE",k);b()},e)})}function Qc(a){Ba.element=a;a=Ba.element.videoWidth||
Ba.element.width;var b=Ba.element.videoHeight||Ba.element.height;Ba.Pg={ka:Ba.element,isPot:!1,isFloat:!1,isFlipY:!0};Ba.ga_=aa.instance(Ba.Pg);fb.Bg(a,b);return fb.Ff(a,b).then(function(){fb.Ig();return fb.xo()}).catch(function(){return Promise.reject()})}function gd(){var a=document.createElement("canvas");a.width=I.width;a.height=I.height;Ba.Fh=a.getContext("2d");Ba.Nd=!0;return Qc(a)}function Xb(a){return 3===arguments.length?this.qb(arguments):this.set(a)}function Rc(a,b){b=Math.floor(b);a.r=
(b>>16&255)/255;a.X=(b>>8&255)/255;a.b=(b&255)/255}function hd(a,b){function d(n){void 0!==n&&1>parseFloat(n)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var k=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(255,parseInt(e[1],10))/255;a.X=Math.min(255,parseInt(e[2],10))/255;a.b=Math.min(255,parseInt(e[3],10))/255;d(e[5]);return}if(e=
/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(100,parseInt(e[1],10))/100;a.X=Math.min(100,parseInt(e[2],10))/100;a.b=Math.min(100,parseInt(e[3],10))/100;d(e[5]);return}break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){k=parseFloat(e[1])/360;var m=parseInt(e[2],10)/100,w=parseInt(e[3],10)/100;d(e[5]);a.On(k,m,w);return}}}else if(e=/^#([A-Fa-f0-9]+)$/.exec(b)){e=e[1];k=e.length;if(3===k){a.r=
parseInt(e.charAt(0)+e.charAt(0),16)/255;a.X=parseInt(e.charAt(1)+e.charAt(1),16)/255;a.b=parseInt(e.charAt(2)+e.charAt(2),16)/255;return}if(6===k){a.r=parseInt(e.charAt(0)+e.charAt(1),16)/255;a.X=parseInt(e.charAt(2)+e.charAt(3),16)/255;a.b=parseInt(e.charAt(4)+e.charAt(5),16)/255;return}}b&&0<b.length&&(e=id[b],void 0!==e?Rc(a,e):console.warn("JETHREE.Color: Unknown color "+b))}function sc(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.P=void 0!==e?e:1}function Sc(a,b,d){var e=b.C,k=b.D,m=b.F;
b=b.P;var w=d.C,n=d.D,q=d.F;d=d.P;a.C=e*d+b*w+k*q-m*n;a.D=k*d+b*n+m*w-e*q;a.F=m*d+b*q+e*n-k*w;a.P=b*d-e*w-k*n-m*q;return a}function Yb(a,b){this.x=a||0;this.y=b||0}function Va(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function Tc(a,b){var d=a.x,e=a.y,k=a.z;a.x=e*b.z-k*b.y;a.y=k*b.x-d*b.z;a.z=d*b.y-e*b.x}function Zb(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.Ra=e||Zb.Wj}function Ac(a,b){this.min=void 0!==a?a:new Va(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Va(-Infinity,-Infinity,
-Infinity)}function tc(a){return(new Va).fd(a.min,a.max).Ca(.5)}function jd(a,b){a.min.min(b);a.max.max(b)}function $b(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Uc(a,b,d){var e=b.elements,k=d.elements;d=a.elements;b=e[0];var m=e[4],w=e[8],n=e[12],q=e[1],r=e[5],y=e[9],G=e[13],v=e[2],H=e[6],u=e[10],f=e[14],h=e[3],B=e[7],J=e[11];e=e[15];var g=k[0],p=
k[4],l=k[8],C=k[12],K=k[1],L=k[5],A=k[9],F=k[13],N=k[2],x=k[6],z=k[10],P=k[14],T=k[3],la=k[7],ba=k[11];k=k[15];d[0]=b*g+m*K+w*N+n*T;d[4]=b*p+m*L+w*x+n*la;d[8]=b*l+m*A+w*z+n*ba;d[12]=b*C+m*F+w*P+n*k;d[1]=q*g+r*K+y*N+G*T;d[5]=q*p+r*L+y*x+G*la;d[9]=q*l+r*A+y*z+G*ba;d[13]=q*C+r*F+y*P+G*k;d[2]=v*g+H*K+u*N+f*T;d[6]=v*p+H*L+u*x+f*la;d[10]=v*l+H*A+u*z+f*ba;d[14]=v*C+H*F+u*P+f*k;d[3]=h*g+B*K+J*N+e*T;d[7]=h*p+B*L+J*x+e*la;d[11]=h*l+B*A+J*z+e*ba;d[15]=h*C+B*F+J*P+e*k;return a}function Bc(a,b,d,e,k,m){this.a=
a;this.b=b;this.c=d;this.Pa=e instanceof Va?e:new Va;this.Ae=Array.isArray(e)?e:[];this.color=k instanceof Xb?k:new Xb;this.Xg=Array.isArray(k)?k:[];this.ac=void 0!==m?m:0}function kd(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);var k=e.withCredentials=!1;e.onreadystatechange=function(){404!==e.status||k||(k=!0,d&&d(404));if(4===e.readyState&&200===e.status){var m=null;try{m=JSON.parse(e.responseText)}catch(w){d&&d(-1)}b&&m&&b(m)}};e.onerror=function(){d&&d(0)};e.send()}function Cc(a,b,d){"object"===
typeof a?b(a):kd(a,b,d)}function ld(a){return new Promise(function(b,d){Cc(a,b,d)})}function md(a,b){for(var d=new Va,e=new Va,k=0,m=b.length;k<m;k++){var w=b[k],n=a[w.a],q=a[w.b],r=a[w.c];n&&q&&r&&(d.eb(r,q),e.eb(n,q),Tc(d,e),0!==d.Mf()&&(d.normalize(),w.Pa.K(d)))}}function nd(a,b){for(var d=Array(a.length),e=0,k=a.length;e<k;++e)d[e]=new Va;e=new Va;k=new Va;for(var m=0,w=b.length;m<w;++m){var n=b[m],q=a[n.a],r=a[n.b],y=a[n.c];q&&r&&y&&(e.eb(y,r),k.eb(q,r),Tc(e,k),d[n.a].add(e),d[n.b].add(e),d[n.c].add(e))}e=
0;for(a=a.length;e<a;++e)d[e].normalize();a=0;for(e=b.length;a<e;++a)n=b[a],k=n.Ae,m=d[n.a],w=d[n.b],n=d[n.c],m&&w&&n&&(3===k.length?(k[0].K(m),k[1].K(w),k[2].K(n)):(k[0]=m.clone(),k[1]=w.clone(),k[2]=n.clone()));return d}function od(a,b,d,e){function k(C){p.K(b[C]);l.K(p);var K=n[C];J.K(K);J.sub(p.Ca(p.sd(K))).normalize();var L=l.x,A=l.y,F=l.z,N=K.x,x=K.y;K=K.z;g.x=A*K-F*x;g.y=F*N-L*K;g.z=L*x-A*N;L=0>g.sd(q[C])?-1:1;w[4*C]=J.x;w[4*C+1]=J.y;w[4*C+2]=J.z;w[4*C+3]=L}for(var m=a.length,w=new Float32Array(4*
m),n=Array(m),q=Array(m),r=0;r<m;r++)n[r]=new Va,q[r]=new Va;var y=new Va,G=new Va,v=new Va,H=new Yb,u=new Yb,f=new Yb,h=new Va,B=new Va;e.forEach(function(C){var K=C.a,L=C.b;C=C.c;y.K(a[K]);G.K(a[L]);v.K(a[C]);H.K(d[K]);u.K(d[L]);f.K(d[C]);var A=G.x-y.x,F=v.x-y.x,N=G.y-y.y,x=v.y-y.y,z=G.z-y.z,P=v.z-y.z,T=u.x-H.x,la=f.x-H.x,ba=u.y-H.y,Q=f.y-H.y,ia=1/(T*Q-la*ba);h.set((Q*A-ba*F)*ia,(Q*N-ba*x)*ia,(Q*z-ba*P)*ia);B.set((T*F-la*A)*ia,(T*x-la*N)*ia,(T*P-la*z)*ia);n[K].add(h);n[L].add(h);n[C].add(h);q[K].add(B);
q[L].add(B);q[C].add(B)});var J=new Va,g=new Va,p=new Va,l=new Va;e.forEach(function(C){k(C.a);k(C.b);k(C.c)});return w}function Vc(a,b,d,e){return Math.sqrt((a-d)*(a-d)+(b-e)*(b-e))}var V={uh:!0,yp:!1,zp:!1,fl:!1,th:!1,xp:!1,Oa:!1,Md:!1,gq:!1,ca:"",Hi:"",Ck:700,Bk:200,vh:!1,Lo:!1,Mo:!1,Ko:!1,ik:3,Mb:!1,gh:!0,Jb:"images/backgrounds/interior2.jpg",wc:"images/backgrounds/interior_light.jpg",Ek:[256,256,512,512],vc:2.1,xc:8,Dk:[64,128,256,256],wm:[60,96,160,250],vm:[8,12,18,40],Rc:2.2,ig:1,Qe:300,kh:500,
Re:50,Ok:0,Pk:0,np:45,pp:1,op:1E3,lh:20,ap:10,bp:10,cp:5,mn:.1,Ni:20,Qi:100,Ri:100,ln:-Math.PI/3,kn:Math.PI/3,Pi:0,Fj:0,wd:[40,32,16,16],gk:[0,.87,.92,.9],gn:2,cn:100,ea:!1,jk:16,kk:.4,mk:[.72,.73,.72,.74],xk:1.2,uk:[.5,.5,.5,1],zk:140,yk:280,Ak:1.2,nk:20,pk:40,wk:[6,9,9,12],tk:[.03,.02,.02,.018],sk:[.35,.35,.4,.5],qk:[.2,.2,.2,.2],lk:[.1,.15,.15,.15],vk:[200,200,150,120],rk:[1,2,3,5],to:1.1,zq:[.25,.5,1,2],Aq:256,yq:256,xq:200,uo:[40,80,200,500],vo:[35,45,80,120],$k:!0,al:"CCW"},Wc={},Z=function(){function a(x,
z,P){z=x.createShader(z);x.shaderSource(z,P);x.compileShader(z);return x.getShaderParameter(z,x.COMPILE_STATUS)?z:null}function b(x,z,P){z=a(x,x.VERTEX_SHADER,z);P=a(x,x.FRAGMENT_SHADER,P);x===c&&n.push(z,P);var T=x.createProgram();x.attachShader(T,z);x.attachShader(T,P);x.linkProgram(T);return T}function d(x){return["float","sampler2D","int"].map(function(z){return"precision "+x+" "+z+";\n"}).join("")}function e(x,z){z.T=z.T?!0:!1;if(!z.T){z.u=z.u||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
z.J=z.J||["a0"];z.R=z.R||[2];z.precision=z.precision||v;z.id=y++;void 0!==z.ej&&(z.ej.forEach(function(la,ba){z.g=z.g.replace(la,z.Ea[ba])}),z.ej.splice(0));z.Yg=0;z.R.forEach(function(la){z.Yg+=4*la});var P=d(z.precision);z.na=b(x,P+z.u,P+z.g);z.A={};z.i.forEach(function(la){z.A[la]=x.getUniformLocation(z.na,la)});z.attributes={};z.va=[];z.J.forEach(function(la){var ba=x.getAttribLocation(z.na,la);z.attributes[la]=ba;z.va.push(ba)});if(z.s){x.useProgram(z.na);r=z;q=z.id;for(var T in z.s)x.uniform1i(z.A[T],
z.s[T])}z.La=!0}}function k(x){ub.tj(N);q!==x.id&&(N.I(),q=x.id,r=x,c.useProgram(x.na),x.va.forEach(function(z){0!==z&&c.enableVertexAttribArray(z)}))}function m(x,z,P){e(x,z,P);x.useProgram(z.na);x.enableVertexAttribArray(z.attributes.a0);q=-1;return r=z}function w(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],s:{u1:0}}}var n=[],q=-1,r=null,y=0,G=!1,v="highp",H=["u1"],u=["u0"],f={u1:0},h={u0:0},B={u1:0,u2:1},J={u1:0,u3:1},g=["u1","u3","u4"],
p={u5:0},l=["u6","u7","u8","u9"],C={u6:0,u7:1},K={s0:w(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:H,s:f,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],s:B},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],s:f,T:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:H,s:f},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],s:B},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:H,s:f},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:H,s:f},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],s:h},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],s:h},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:H,s:f},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],s:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],s:f},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:H,s:f,T:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:H,s:f,T:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],s:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:u,s:h,T:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:u,s:h},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:u,s:h},
s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:u,s:h},s20:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:u,s:h},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:u,s:h,T:!0},s22:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u16","u17"],s:{u0:0,u16:1},T:!0},s23:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u18"],s:f},s24:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],s:Object.assign({u19:2},
C),T:!0},s25:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:l,s:C},s26:{g:"uniform float u8,u9;uniform vec2 u20,u21;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=u20*u21,f=c+.5*(vec2(1.)-u21)/u20,g=f+fract(b*u8)/d,h=(vec2(.5)+floor(a*b))/a;vec4 i=texture2D(u7,h),j=texture2D(u6,g);gl_FragColor=i*j;}",
i:["u20","u21"].concat(l),s:C,T:!0},s27:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(l),s:Object.assign({u25:3,u22:4,u23:5,u24:6},C),T:!0},s28:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(l),s:Object.assign({u3:2},C)},s29:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],s:C,T:!0},s30:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:g,s:J},s31:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(g),s:J,T:!0},s32:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:g,s:J,T:!0},s33:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(g),s:J,T:!0},s34:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:g,s:J,T:!0},s35:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:H,s:f,precision:"lowp"},s36:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],s:f,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],s:f,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],s:B,T:!0},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],s:B,T:!0},s40:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],s:p},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
s:p,T:!0},s42:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],s:f,precision:"lowp",T:!0},s43:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
s:f,precision:"lowp",T:!0},s44:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],s:{u1:0,u16:1,u31:2},T:!0}},L={s45:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Ea:["1.1111","gl_FragColor\\*=2.2222;"]},s46:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Ea:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},A=null,F=null,N={Zb:function(){return G},m:function(){if(!G){A=La(K,2);F=La(L,2);v="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var x in A)e(c,A[x],x);Z.set("s0");c.enableVertexAttribArray(0);G=!0}},uc:function(x){x.forEach(function(z){N.pa(z)})},pa:function(x){A[x.id]=x;e(c,x,x.id)},tm:function(x,z,
P){z||(z=x);A[z]=Object.create(F[x]);A[z].Cm=!0;F[x].Ea&&F[x].Ea.forEach(function(T,la){A[z].g=A[z].g.replace(new RegExp(T,"g"),P[la])});e(c,A[z],z)},set:function(x){var z=A[x];z.T&&(z.T=!1,e(c,z,x));k(z)},Ab:function(x){return m(x,w(),"s47")},he:function(x){return m(x,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:v},"s48")},Bl:function(x){return"undefined"===typeof A[x]?!1:A[x].La},I:function(){-1!==q&&(q=-1,r.va.forEach(function(x){0!==x&&c.disableVertexAttribArray(x)}))},ke:function(){var x=
0;r.va.forEach(function(z,P){P=r.R[P];c.vertexAttribPointer(z,P,c.FLOAT,!1,r.Yg,x);x+=4*P})},Al:function(){c.enableVertexAttribArray(0)},fc:function(){N.hc(c)},hc:function(x){x.vertexAttribPointer(r.va[0],2,x.FLOAT,!1,8,0)},ie:function(x,z){c.uniform1i(r.A[x],z)},H:function(x,z){c.uniform1f(r.A[x],z)},N:function(x,z,P){c.uniform2f(r.A[x],z,P)},je:function(x,z){c.uniform2fv(r.A[x],z)},Ag:function(x,z){c.uniform3fv(r.A[x],z)},zg:function(x,z,P,T){c.uniform3f(r.A[x],z,P,T)},mo:function(x,z,P,T,la){c.uniform4f(r.A[x],
z,P,T,la)},xa:function(x,z){c.uniform4fv(r.A[x],z)},no:function(x,z){c.uniformMatrix2fv(r.A[x],!1,z)},oo:function(x,z){c.uniformMatrix3fv(r.A[x],!1,z)},Vc:function(x,z){c.uniformMatrix4fv(r.A[x],!1,z)},j:function(x,z){N.set(x);z.forEach(function(P){switch(P.type){case "4f":c.uniform4fv(r.A[P.name],P.value);break;case "3f":c.uniform3fv(r.A[P.name],P.value);break;case "2f":c.uniform2fv(r.A[P.name],P.value);break;case "1f":c.uniform1f(r.A[P.name],P.value);break;case "1i":c.uniform1i(r.A[P.name],P.value);
break;case "mat2":c.uniformMatrix2fv(r.A[P.name],!1,P.value);break;case "mat3":c.uniformMatrix3fv(r.A[P.name],!1,P.value);break;case "mat4":c.uniformMatrix4fv(r.A[P.name],!1,P.value)}})},Np:function(){return"lowp"},v:function(){N.I();c.disableVertexAttribArray(0);for(var x in A){var z=A[x];z.La&&(z.La=!1,c.deleteProgram(z.na));z.Cm&&delete A[x]}n.forEach(function(P){c.deleteShader(P)});n.splice(0);y=0;G=!1;r=null;q=-1}};return N}(),c=null,kb=function(){function a(u){console.log("ERROR in ContextFF: ",
u);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(u,f,h){u.setAttribute("width",f);u.setAttribute("height",h)}function e(u){function f(){Hb.v();Ga.reset();B.getExtension("WEBGL_lose_context").loseContext()}if(b())return!1;var h=document.createElement("canvas");d(h,5,5);var B=null;try{B=h.getContext("webgl2",u)}catch(J){return!1}if(!B)return!1;k(B);Ga.Gh(B);u=Ga.bf(B);if(!u.Va&&!u.Xa)return f(),!1;u=Hb.mh(B,u);f();return u?!0:!1}function k(u){u.clearColor(0,
0,0,0);u.disable(u.DEPTH_TEST);u.disable(u.BLEND);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.disable(u.CULL_FACE);u.GENERATE_MIPMAP_HINT&&u.FASTEST&&u.hint(u.GENERATE_MIPMAP_HINT,u.FASTEST);u.disable(u.SAMPLE_ALPHA_TO_COVERAGE);u.disable(u.SAMPLE_COVERAGE);u.depthFunc(u.LEQUAL);u.clearDepth(1)}var m=null,w=null,n=null,q=null,r=!0,y=null,G=null,v=[],H={O:function(){return m.width},Y:function(){return m.height},sb:function(){return m},Fl:function(){return c},la:function(){return r},flush:function(){c.flush()},
Vp:function(){za.$();H.Fn()},Fn:function(){aa.reset();X.reset();Z.I();Z.Al();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);X.md();Z.fc()},Kl:function(){y||(y=new Uint8Array(m.width*m.height*4));c.readPixels(0,0,m.width,m.height,c.RGBA,c.UNSIGNED_BYTE,y);return y},Ip:function(){return m.toDataURL("image/jpeg")},Jp:function(){za.ba();w||(w=document.createElement("canvas"),n=w.getContext("2d"));d(w,m.width,m.height);for(var u=H.Kl(),f=n.createImageData(w.width,w.height),h=w.width,B=w.height,J=f.data,g=
0;g<B;++g)for(var p=B-g-1,l=0;l<h;++l){var C=4*(g*h+l),K=4*(p*h+l);J[C]=u[K];J[C+1]=u[K+1];J[C+2]=u[K+2];J[C+3]=u[K+3]}n.putImageData(f,0,0);return w.toDataURL("image/png")},Sh:function(u){!w&&u&&(w=document.createElement("canvas"),n=w.getContext("2d"));var f=u?w:document.createElement("canvas");d(f,m.width,m.height);(u?n:f.getContext("2d")).drawImage(m,0,0);return f},m:function(u){u=Object.assign({Wa:null,cg:null,qa:null,Xe:null,width:512,height:512,premultipliedAlpha:!1,zm:!0,antialias:!1,debug:!1,
wp:!1},u);u.Wa?(c=u.Wa,m=u.Wa.canvas):u.Xe&&!u.qa?m=document.getElementById(u.Xe):u.qa&&(m=u.qa);m||(m=document.createElement("canvas"));m.width=u.width;m.height=u.height;if(c)r=c instanceof WebGL2RenderingContext;else{r=!0;var f={antialias:u.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:u.premultipliedAlpha,stencil:!1,depth:u.zm,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(f.antialias=!1);var h=e(f);h||!f.antialias||b()||(f.antialias=!1,h=e(f));h&&(c=m.getContext("webgl2",f));c?r=!0:((c=m.getContext("webgl",f))||(c=m.getContext("experimental-webgl",f)),r=!1)}if(!c)return a("WebGL1 and 2 are not enabled");u.cg&&m.addEventListener&&(q=c.getExtension("WEBGL_lose_context"))&&(G=u.cg,m.addEventListener("webglcontextlost",G,!1));if(!Ga.m())return a("Not enough GL capabilities");k(c);Z.m();X.m();Hb.mh(c,Ga.Hl());v.forEach(function(B){B(c)});v.splice(0);return!0},mp:function(){return new Promise(function(u){c?
u(c):v.push(u)})},v:function(){c&&(Ga.v(),Z.v(),Hb.v());q&&G&&(m.removeEventListener("webglcontextlost",G,!1),q=G=null);c=y=n=w=m=null;v.splice(0)}};return H}(),ub=function(){function a(){null===b&&("undefined"!==typeof Z?b=Z:"undefined"!==typeof E&&(b=E))}var b=null;return{reset:function(){b=null},tj:function(d){b!==d&&(b&&b.I(),b=d)},Zb:function(){return b.Zb()},fc:function(){return b.fc()},hc:function(d){return b.hc(d)},ke:function(){return b.ke()},I:function(){return b.I()},set:function(d){a();
return b.set(d)},Ab:function(d){a();return b.Ab(d)},he:function(d){a();return b.he(d)}}}(),aa=function(){function a(F){c.bindTexture(c.TEXTURE_2D,F)}function b(F){var N=new Uint16Array(F.length);F.forEach(function(x,z){C[0]=x;var P=K[0];var T=P>>16&32768;x=P>>12&2047;var la=P>>23&255;P=103>la?T:142<la?T|31744|((255==la?0:1)&&P&8388607):113>la?(x|=2048,T|(x>>114-la)+(x>>113-la&1)):(T|la-112<<10|x>>1)+(x&1);N[z]=P});return N}function d(){if(null!==L.Df)return L.Df;var F=e(b([.5,.5,.5,.5]),!0);return null===
F?!0:L.Df=F}function e(F,N){if(!ub.Zb()||!H)return null;var x=null,z=Math.sqrt(F.length/4);try{var P=c.getError();if("FUCKING_BIG_ERROR"===P)return!1;x=A.instance({isFloat:!1,S:N,array:F,width:z});P=c.getError();if(P!==c.NO_ERROR)return!1}catch(T){return!1}za.ba();c.viewport(0,0,z,z);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);ub.set("s0");x.Ja(0);X.l(!0,!0);F=4*z*z;N=new Uint8Array(F);c.readPixels(0,0,z,z,c.RGBA,c.UNSIGNED_BYTE,N);z=!0;for(P=0;P<F;++P)z=z&&3>Math.abs(N[P]-127);x.remove();za.$();
return z}var k=0,m=null,w=0,n=null,q=null,r=null,y=null,G=null,v=null,H=!1,u=[],f={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ka:null,ai:null,Am:!1,S:!1,B:null,G:4,Wf:0},h=!1,B=null,J=null,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,l=!1,C=new Float32Array(1),K=new Int32Array(C.buffer),L={Df:null,Ef:null},A={m:function(){H||(G=[c.RGBA,null,c.RGBA,c.RGBA],v=
[c.RGBA,null,c.RGBA,c.RGBA],m=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],p="undefined"!==typeof fa,l="undefined"!==typeof Ga,n=[-1,-1,-1,-1,-1,-1,-1,-1],y=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],H=!0)},rm:function(){if(!q){for(var F=new Float32Array(16384),N=0;16384>N;++N)F[N]=2*Math.random()-1;q={random:A.instance({isFloat:!0,isPot:!0,array:F,width:64}),Jj:A.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}A.Ho()},$h:function(){return q.Jj},
Ho:function(){y[1]=Ga.rf(c)},ho:function(){v=G=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Zi:function(F){Z.set("s1");za.ba();var N=F.O(),x=F.Y();c.viewport(0,0,N,x);F.h(0);X.l(!1,!1)},iq:function(F,N){A.Zi(F);c.readPixels(0,0,F.O(),F.Y(),c.RGBA,c.UNSIGNED_BYTE,N)},jq:function(F,N){A.Zi(F);return Ga.ng(0,0,F.O(),F.Y(),N)},Nh:function(F,N,x,z,P,T,la){F.activeTexture(F.TEXTURE0);var ba=F.createTexture();F.bindTexture(F.TEXTURE_2D,ba);P=P instanceof Float32Array?P:new Float32Array(P);F.texParameteri(F.TEXTURE_2D,
F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,T);F.texImage2D(F.TEXTURE_2D,0,F.RGBA,x,z,0,F.RGBA,F.FLOAT,P);F.bindTexture(F.TEXTURE_2D,null);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);la&&(za.$(),Z.Ab(F));F.viewport(0,0,x,z);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,
N,0);F.bindTexture(F.TEXTURE_2D,ba);la?X.l(!0,!0):X.Ob(F);F.deleteTexture(ba);H&&(n[0]=-1,r=null,k=0)},Je:function(F){F!==k&&(c.activeTexture(m[F]),k=F)},instance:function(F){function N(){ka=void 0!==Q.ka.videoWidth?Q.ka.videoWidth:Q.ka.width;na=void 0!==Q.ka.videoHeight?Q.ka.videoHeight:Q.ka.height}function x(ea){var ta=c.getError();if("FUCKING_BIG_ERROR"===ta)return!1;c.texImage2D(c.TEXTURE_2D,0,bb,Ea,Oa,ea);ta=c.getError();ta!==c.NO_ERROR&&Ea!==c.RGBA&&(Ea=c.RGBA,c.texImage2D(c.TEXTURE_2D,0,bb,
Ea,Oa,ea));return!0}function z(){if(!Y){a(ma);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,rb);Q.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,Q.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,Q.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));Q.isAnisotropicFiltering&&"undefined"!==typeof V&&c.texParameterf(c.TEXTURE_2D,fa.Ll().TEXTURE_MAX_ANISOTROPY_EXT,
V.ik);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,Q.isLinear?c.LINEAR:c.NEAREST);Q.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,Q.isMipmap&&!zb?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,Q.isMipmap&&!zb?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);Ea=G[Q.G-1];bb=v[Q.G-1];Oa=y[t];if(Ga.la()){var ea=Ga.Nl();Ea===c.RGBA&&Oa===c.FLOAT?Q.isMipmap||Q.isLinear?bb=Hb.Pl(c):Ga.fa()?ea&&(bb=ea):bb=c.RGBA16F||c.RGBA:Ea===c.RGB&&Oa===c.FLOAT&&ea&&(bb=ea,Ea=
c.RGBA)}if(Q.S&&!Q.isFloat||Q.isFloat&&Q.isMipmap&&Hb.Jm())bb=Ga.Ol(),Oa=Ga.rf(c);Q.Wf&&(Pb=Q.Wf);Q.isSrgb&&4===Q.G&&(Ea=fa.im());if(Q.ka)x(Q.ka);else if(Q.url)x(va);else if(Da){ea=Da;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,0,Ea,Oa,ea),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,0,Ea,Oa,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,ka,na,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(qc){c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,
0,Ea,Oa,null)}Q.isKeepArray||(Da=null)}else ea=c.getError(),"FUCKING_BIG_ERROR"!==ea&&(c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,0,Ea,Oa,null),ea=c.getError(),ea!==c.NO_ERROR&&(Ea=c.RGBA,Q.S&&Oa!==c.FLOAT&&(Oa=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,0,Ea,Oa,null))));if(Q.isMipmap)if(!zb&&Ua)Ua.Cd(),Qb=!0;else if(zb){ea=Math.log2(Math.min(ka,na));Gb=Array(1+ea);Gb[0]=ma;for(var ta=1;ta<=ea;++ta){var Ya=Math.pow(2,ta),Ka=ka/Ya;Ya=na/Ya;var Xa=c.createTexture();a(Xa);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,
c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,bb,Ka,Ya,0,Ea,Oa,null);a(null);Gb[ta]=Xa}Qb=!0}a(null);n[k]=-1;rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;Q.B&&Ua&&(Q.B(Ua),Q.B=null)}}function P(){for(var ea=ka*na,ta=2*ea,Ya=3*ea,Ka=0;Ka<ea;++Ka)da[0][Ka]=mb[Ka],da[1][Ka]=mb[Ka+ea],da[2][Ka]=mb[Ka+ta],da[3][Ka]=mb[Ka+Ya]}function T(){var ea=ka*na*4;ca=[new Uint8Array(ea),new Uint8Array(ea),new Uint8Array(ea),new Uint8Array(ea)];da=[new Float32Array(ca[0].buffer),
new Float32Array(ca[1].buffer),new Float32Array(ca[2].buffer),new Float32Array(ca[3].buffer)];Ca=new Uint8Array(4*ea);mb=new Float32Array(Ca.buffer);oa=!0}function la(){ba=new Uint8Array(ka*na*4);ic=new Float32Array(ba.buffer);Wb=!0}var ba,Q=Object.assign({},f,F),ia=w++;null===Q.isFlipY&&(Q.isFlipY=Q.url?!0:!1);Q.data&&(Q.array="string"===typeof Q.data?Jb(Q.data):Q.isFloat?new Float32Array(Q.data):new Uint8Array(Q.data),Q.isFlipY=!1);var t=0,O=Q.ka?!0:!1,D=null,W=null,ja=!1;Q.S=Q.S||Q.isFloat;Q.S&&
(t=1);!Q.Am&&Q.isFloat&&l&&!Ga.fa()&&(Q.isFloat=!1);Q.isFloat&&(t=2);Q.isAnisotropicFiltering&&p&&!fa.Im()&&(Q.isAnisotropicFiltering=!1);var ma=Q.ai||c.createTexture(),va=null,Da=!1,ka=0,na=0,Fa=!1,Y=!1,oa=!1,da=null,ca=null,Ca=null,mb=null,bb=null,Ea=null,Oa=null,rb=Q.isFlipY,rc=(F=Q.S&&Q.isMipmap)&&Hb.Rk(),zb=F&&!rc?!0:!1,Gb=null,Pb=-1,hc=-1,Qb=!1,Wb=!1,ic=ba=null;Q.width&&(ka=Q.width,na=Q.height?Q.height:ka);var Ua={get:function(){return ma},O:function(){return ka},Y:function(){return na},jm:function(){return Q.url},
vi:function(){return Q.isFloat},wi:function(){return Q.S},$p:function(){return Q.isLinear},Cd:function(){c.generateMipmap(c.TEXTURE_2D)},Jk:function(ea,ta){zb?(ea||(ea=Ua.Xh()),A.Je(ta),a(Gb[ea]),n[ta]=-1):Ua.h(ta)},Xh:function(){-1===Pb&&(Pb=Math.log(ka)/Math.log(2));return Pb},El:function(ea){ea||(ea=Ua.Xh());if(zb){Z.set("s12");A.Je(0);for(var ta=ka,Ya=na,Ka=1;Ka<=ea;++Ka)ta/=2,Ya/=2,Z.N("u14",.25/ta,.25/Ya),c.viewport(0,0,ta,Ya),a(Gb[Ka-1]),c.framebufferTexture2D(za.Gd(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,
Gb[Ka],0),X.l(!1,1===Ka);n[0]=-1}else ea!==hc&&(hc=ea,c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,ea)),Ua.Cd()},wq:function(ea){(O=!(Array.isArray(ea)||ea.constructor===Float32Array||ea.constructor===Uint8Array))?(Da=null,Q.ka=ea,N()):Da=ea},h:function(ea){if(!Fa)return!1;A.Je(ea);if(n[ea]===ia)return!1;a(ma);n[ea]=ia;return!0},Ja:function(ea){c.activeTexture(m[ea]);k=ea;a(ma);n[ea]=ia},o:function(){r=Ua;c.framebufferTexture2D(za.Gd(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,ma,
0)},L:function(){r=Ua;c.viewport(0,0,ka,na);c.framebufferTexture2D(za.Gd(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,ma,0)},te:A.te,$n:function(ea,ta){ka=ea;na=ta},resize:function(ea,ta){Ua.$n(ea,ta);z()},clone:function(ea){ea=A.instance({width:ka,height:na,S:Q.S,isFloat:Q.isFloat,isLinear:Q.isLinear,isMirrorY:Q.isMirrorY,isFlipY:ea?!rb:rb,isPot:Q.isPot});ub.set("s0");za.$();ea.L();Ua.h(0);X.l(!0,!0);return ea},Wc:function(){c.viewport(0,0,ka,na)},remove:function(){c.deleteTexture(ma);Y=!0;u.splice(u.indexOf(Ua),
1);Ua=null},refresh:function(){Ua.Ja(0);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);O?c.texImage2D(c.TEXTURE_2D,0,bb,Ea,Oa,Q.ka):c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,0,Ea,Oa,Da);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Xi:function(){oa||T();c.readPixels(0,0,ka,4*na,c.RGBA,c.UNSIGNED_BYTE,Ca);P();return da},vn:function(){oa||T();return Ga.ng(0,0,ka,4*na,Ca).then(function(){P();return da})},xn:function(){Wb||la();c.readPixels(0,0,ka,na,c.RGBA,c.UNSIGNED_BYTE,ba);return ic},wn:function(){Wb||la();
return Ga.ng(0,0,ka,na,ba)},zh:function(ea){za.ba();Z.set("s15");Ua.h(0);if(ea)c.viewport(0,0,ka,na),Z.mo("u15",.25,.25,.25,.25),X.l(!1,!0);else for(ea=0;4>ea;++ea)c.viewport(0,na*ea,ka,na),Z.xa("u15",g[ea]),X.l(!1,0===ea)},Tg:function(ea){var ta;if(ta=Oa===y[0])null!==L.Ef?ta=L.Ef:(ta=e(new Uint8Array([127,127,127,127]),!1),ta=null===ta?!0:L.Ef=ta),ta=!ta;a(ma);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);ta?(ja||(D=document.createElement("canvas"),D.width=ka,D.height=na,W=D.getContext("2d"),W.createImageData(ka,
na),ja=!0),null.data.set(ea),W.putImageData(null,0,0),c.texImage2D(c.TEXTURE_2D,0,bb,Ea,Oa,D)):c.texImage2D(c.TEXTURE_2D,0,bb,ka,na,0,Ea,Oa,ea);n[k]=ia;rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Kq:function(ea,ta){a(ma);ta&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,bb,Ea,Oa,ea);n[k]=ia;ta&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},cc:function(ea,ta){var Ya=ka*na,Ka=4*Ya;ea=Q.S?ea?"RGBE":"JSON":"RGBA";ta&&(ea=ta);ta=Ga.la()&&!1;var Xa=null;switch(ea){case "RGBE":Xa="s13";
break;case "JSON":Xa=ta?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Xa="s7"}oa||("RGBA"===ea||"RGBE"===ea||"RGBAARRAY"===ea?(ca=new Uint8Array(Ka),oa=!0):"JSON"!==ea||ta||T());za.ba();Z.set(Xa);Ua.h(0);Ka=null;if("RGBA"===ea||"RGBE"===ea||"RGBAARRAY"===ea){c.viewport(0,0,ka,na);X.l(!0,!0);c.readPixels(0,0,ka,na,c.RGBA,c.UNSIGNED_BYTE,ca);if("RGBAARRAY"===ea)return{data:ca};h||(B=document.createElement("canvas"),J=B.getContext("2d"),h=!0);B.width=ka;B.height=na;Ya=J.createImageData(ka,na);Ya.data.set(ca);
J.putImageData(Ya,0,0);Ka=B.toDataURL("image/png")}else if("JSON"===ea)if(ta)Ka=new Float32Array(Ya),c.viewport(0,0,ka,na),X.l(!0,!0),c.readPixels(0,0,ka,na,c.RGBA,c.FLOAT,Ka);else{for(Ka=0;4>Ka;++Ka)c.viewport(0,na*Ka,ka,na),Z.xa("u15",g[Ka]),X.l(!Ka,!Ka);Ua.Xi();Ka=Array(Ya);for(ta=0;ta<Ya;++ta)Ka[4*ta]=da[0][ta],Ka[4*ta+1]=da[1][ta],Ka[4*ta+2]=da[2][ta],Ka[4*ta+3]=da[3][ta]}return{format:ea,data:Ka,width:ka,height:na,isMirrorY:Q.isMirrorY,isFlipY:"RGBA"===ea?Q.isFlipY:!Q.isFlipY}}};Q.isMipmap&&
!zb&&Fa&&!Qb&&(Ua.Cd(),Qb=!0);if(Q.url)a(ma),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),va=new Image,va.vp="Anonymous",va.crossOrigin="Anonymous",va.src=Q.url,va.onload=function(){ka=va.width;na=va.height;z()};else if(Q.ka){var Kb=function(){N();ka?z():setTimeout(Kb,1)};Kb()}else Q.array?(Q.S&&!Q.isFloat?Q.array instanceof Uint16Array?(Da=Q.array,z()):d()?(Da=b(Q.array),z()):(z(),A.Nh(c,ma,Ua.O(),Ua.Y(),Q.array,rb,!0)):(Da=Q.isFloat?Q.array instanceof Float32Array?Q.array:
new Float32Array(Q.array):Q.array instanceof Uint8Array?Q.array:new Uint8Array(Q.array),z()),Q.isKeepArray||(Da&&Da!==Q.array&&(Da=null),delete Q.array)):Q.ai?Fa=!0:z();Ua.Rp=Ua.O;Q.B&&Fa&&(Q.B(Ua),Q.B=null);u.push(Ua);return Ua},ba:function(F){F!==k&&(c.activeTexture(m[F]),k=F);n[F]=-1;a(null)},Lk:function(F){q.random.h(F)},te:function(){r=null;c.framebufferTexture2D(za.Gd(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==k&&c.activeTexture(m[0]);for(var F=0;F<m.length;++F)n[F]=-1;
k=-1},mq:function(){k=-1},Lj:function(){for(var F=0;F<m.length;++F)A.ba(F)},M:function(){q&&(q.random.remove(),q.Jj.remove())},Zc:function(F,N){if("RGBA"===F.format||"RGBE"===F.format){var x=new Image;x.src=F.data;x.onload=function(){A.instance({isMirrorY:F.isMirrorY,isFlipY:F.isFlipY,isFloat:!1,ka:x,B:function(z){if("RGBA"===F.format)N(z);else{var P=F.width,T=F.height,la=A.instance({isMirrorY:F.isMirrorY,isFloat:!0,width:P,height:T,isFlipY:F.isFlipY});za.$();c.viewport(0,0,P,T);Z.set("s14");la.o();
z.h(0);X.l(!0,!0);A.ba(0);N(la);Ga.flush();z.remove()}}})}}else"JSON"===F.format?N(A.instance({isFloat:!0,isFlipY:F.isFlipY,width:F.width,height:F.height,array:new Float32Array(F.data)})):N(!1)},Xk:b,v:function(){r&&(za.$(),A.te(),za.ba());A.Lj();u.slice(0).forEach(function(F){F.remove()});u.splice(0);H=!1;w=0;"undefined"!==typeof Hb&&Hb.v();q=null}};return A}(),Mc={instance:function(a){var b=[aa.instance(a),aa.instance(a)],d=[b[1],b[0]],e=d,k={lj:function(m){e[1].o();e[0].h(m);k.xj()},Un:function(m){e[1].L();
e[0].h(m);k.xj()},xj:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},h:function(m){e[0].h(m)},Ja:function(m){e[0].Ja(m)},Kk:function(m){e[1].h(m)},Mp:function(){return e[0]},Pp:function(){return e[1]},Tg:function(m){e[0].Tg(m);e[1].Tg(m)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){k.Un(0);Z.set("s0");X.l(!1,!1)}};return k}},X=function(){function a(q){var r={ja:null,indices:null};r.ja=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,r.ja);q.bufferData(q.ARRAY_BUFFER,
new Float32Array([-1,-1,3,-1,-1,3]),q.STATIC_DRAW);r.indices=q.createBuffer();q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,r.indices);q.bufferData(q.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),q.STATIC_DRAW);return r}var b=null,d=0,e=!1,k=[],m=-2,w=-2,n={reset:function(){w=m=-2},m:function(){e||(b=a(c),n.md(),e=!0)},instance:function(q){var r=d++,y=q.indices?q.indices.length:0,G="undefined"===typeof q.mode?c.STATIC_DRAW:q.mode,v=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v);c.bufferData(c.ARRAY_BUFFER,
q.ja instanceof Float32Array?q.ja:new Float32Array(q.ja),G);m=r;var H=null,u=null,f=null;if(q.indices){H=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,H);var h=null;65536>q.indices.length?(h=Uint16Array,u=c.UNSIGNED_SHORT,f=2):(h=Uint32Array,u=c.UNSIGNED_INT,f=4);h=q.indices instanceof h?q.indices:new h(q.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,G);w=r}var B={yc:function(J){m!==r&&(c.bindBuffer(c.ARRAY_BUFFER,v),m=r);J&&ub.ke()},Hk:function(){w!==r&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
H),w=r)},bind:function(J){B.yc(J);B.Hk()},U:function(){c.drawElements(c.TRIANGLES,y,u,0)},Ka:function(J,g){c.drawElements(c.TRIANGLES,J,u,g*f)},remove:function(){c.deleteBuffer(v);q.indices&&c.deleteBuffer(H);B=null}};k.push(B);return B},md:function(){-1!==m&&(c.bindBuffer(c.ARRAY_BUFFER,b.ja),m=-1);-1!==w&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),w=-1)},l:function(q,r){q&&X.md();r&&ub.fc();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ob:function(q){q=q||c;var r=a(q);q.bindBuffer(q.ARRAY_BUFFER,
r.ja);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,r.indices);ub.hc(q);q.clear(q.COLOR_BUFFER_BIT);q.drawElements(q.TRIANGLES,3,q.UNSIGNED_SHORT,0);q.flush();q.bindBuffer(q.ARRAY_BUFFER,null);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);q.deleteBuffer(r.ja);q.deleteBuffer(r.indices);n.reset();e&&(n.md(),ub.fc())},M:function(){var q=c,r=b;q.deleteBuffer(r.ja);q.deleteBuffer(r.indices)},v:function(){n.M();k.forEach(function(q){q.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);
n.reset();e=!1;k.splice(0);d=0}};return n}(),za=function(){var a=null,b=null,d=null,e=!1,k=[],m={ma:-2,Mh:1},w={Zb:function(){return e},m:function(){if(!e){a=c.createFramebuffer();var n=Ga.la();b=n&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=n&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},Ml:function(){return b},Th:function(){return d},Gd:function(){return c.FRAMEBUFFER},Qp:function(){return m},Fp:function(){return a},instance:function(n){void 0===n.Gc&&(n.Gc=!1);var q=n.ga_?
n.ga_:null,r=n.width,y=void 0!==n.height?n.height:n.width,G=a,v=null,H=!1,u=!1,f=0;q&&(r=r?r:q.O(),y=y?y:q.Y());var h={fj:function(){H||(G=c.createFramebuffer(),H=!0,f=m.Mh++)},gd:function(){h.fj();h.o();v=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,v);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,y);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,v);c.clearDepth(1)},bind:function(B,J){f!==m.ma&&(c.bindFramebuffer(b,G),m.ma=f);q&&q.o();J&&c.viewport(0,0,r,y);
B&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},hh:function(){f!==m.ma&&(c.bindFramebuffer(b,G),m.ma=f)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Te:function(){c.clear(c.COLOR_BUFFER_BIT)},oh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Wc:function(){c.viewport(0,0,r,y)},o:function(){f!==m.ma&&(c.bindFramebuffer(b,G),m.ma=f)},rtt:function(B){q=B;m.ma!==f&&(c.bindFramebuffer(c.FRAMEBUFFER,G),m.ma=f);B.o()},ba:function(){c.bindFramebuffer(b,null);m.ma=-1},resize:function(B,J){r=
B;y=J;v&&(c.bindRenderbuffer(c.RENDERBUFFER,v),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,y))},remove:function(){G===a||u||(c.bindFramebuffer(b,G),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),v&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),c.deleteFramebuffer(G),v&&c.deleteRenderbuffer(v));u=!0}};n.Gc&&h.gd();k.push(h);return h},ba:function(){c.bindFramebuffer(b,null);m.ma=-1},Iq:function(){c.bindFramebuffer(b,null);
c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ga.uj();m.ma=-1},reset:function(){m.ma=-2},$:function(){0!==m.ma&&(c.bindFramebuffer(b,a),m.ma=0)},clear:function(){Ga.uj();c.clear(c.COLOR_BUFFER_BIT)},v:function(){w.ba();k.forEach(function(n){n.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);w.reset();e=!1;k.splice(0);m.Mh=1}};return w}(),Ga=function(){function a(){n="undefined"===typeof kb?fa:kb;q=!0}function b(g,p){for(var l=0;l<g.length;++l){var C=p.getExtension(g[l]);if(C)return C}return null}
function d(){null!==h.se&&(clearTimeout(h.se),h.se=null);h.Ub=!1}function e(g){if(0===h.vb.length){h.za=c.PIXEL_PACK_BUFFER;h.vb.splice(0);h.Hd.splice(0);for(var p=0;p<h.Ac;++p)h.vb.push(c.createBuffer()),h.Hd.push(-1);h.Ta=0;h.bg=0}c.bindBuffer(h.za,h.vb[h.Ta]);g.byteLength!==h.Hd[h.Ta]&&(c.bufferData(h.za,g.byteLength,c.STREAM_READ),h.Hd[h.Ta]=g.byteLength);h.Wp=!0}function k(){c.bindBuffer(h.za,null)}function m(){h.Rb.forEach(function(g){c.deleteSync(g)});h.Rb.splice(0)}function w(){h.Ta=(h.Ta+
1)%h.Ac;++h.bg}var n=null,q=!1,r={li:!1,Lg:null,Mg:null,si:!1,Gm:!1,Ng:null,ti:!1,Og:null,mi:!1,Ue:null,xm:!1,Ve:null,ym:!1},y=null,G={Va:!0,Xa:!0,kf:!0,Wi:!1},v=null,H=!0,u=null,f=null,h={Yk:1,Ac:-1,Ta:0,bg:0,Ub:!1,vb:[],Rb:[],Hd:[],za:null,se:null},B="undefined"===typeof window?{}:window,J={m:function(){if(q)return!0;J.reset();q||a();var g=c;if(!y.li){y.Lg=J.Jh(g);B.GL_EXT_FLOAT=y.Lg;y.si=y.Lg?!0:!1;if(y.si||J.la())y.Mg=J.Kh(g),y.Gm=y.Mg?!0:!1,B.GL_EXT_FLOATLINEAR=y.Mg;y.li=!0}if(!y.mi){y.Ng=J.yd(g);
y.Ng&&(y.ti=!0,B.GL_EXT_HALFFLOAT=y.Ng);if(y.ti||J.la())y.Og=J.Lh(g),B.GL_EXT_HALFFLOATLINEAR=y.Og;y.Yp=y.Og?!0:!1;y.mi=!0}y.Ue=J.Hh(g);y.xm=y.Ue?!0:!1;B.GL_EXT_COLORBUFFERFLOAT=y.Ue;y.Ve=J.Ih(g);y.ym=y.Ve?!0:!1;B.GL_EXT_COLORBUFFERHALFFLOAT=y.Ve;za.m();aa.m();if(!J.il())return!1;X.m();aa.rm();return!0},reset:function(){y=Object.assign({},r);v=Object.assign({},G)},O:function(){q||a();return n.O()},Y:function(){q||a();return n.Y()},la:function(){q||a();return n.la()},Gh:function(g){J.Hh(g);J.Ih(g);
J.Jh(g);J.Kh(g);J.yd(g);J.Lh(g)},Hh:b.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Ih:b.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Jh:b.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Kh:b.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),yd:b.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float",
"WEBKIT_OES_texture_half_float"]),Lh:b.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),rf:function(g){var p=J.yd(g);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Nl:function(){return f||c.RGBA32F||c.RGBA},Ol:function(){return u||c.RGBA16F||c.RGBA},Hl:function(){return v},fa:function(){return v.Va},qp:function(){return v.Xa},Qk:function(){return v.kf},Tk:function(){return v.Wi&&H},Ij:function(g){H=g;!g&&h.Ub&&
(m(),c.bindBuffer(h.za,null),h.Ub=!1)},aq:function(){return h.Ub},qe:function(g,p,l){function C(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(K,null);g.deleteTexture(F);g.deleteFramebuffer(A)}var K=g.FRAMEBUFFER,L=g.NEAREST,A=g.createFramebuffer();g.bindFramebuffer(K,A);var F=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,F);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,L);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,L);g.texImage2D(g.TEXTURE_2D,0,p,3,3,0,g.RGBA,l,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,F,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return C(),!1;ub.he(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);X.Ob(g);g.bindFramebuffer(K,null);ub.Ab(g);g.activeTexture(g.TEXTURE0);
g.bindTexture(g.TEXTURE_2D,F);X.Ob(g);p=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,p);C();for(l=0;36>l;++l)if(3!==l%4&&3<Math.abs(p[l]-127))return!1;return!0},bf:function(g){var p={Va:!1,Xa:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&J.qe(g,g.RGBA32F,g.FLOAT)&&(p.Va=!0,f=g.RGBA32F);!p.Va&&J.qe(g,g.RGBA,g.FLOAT)&&(p.Va=!0,f=g.RGBA);var l=J.rf(g);u=null;g.RGBA16F&&J.qe(g,g.RGBA16F,l)&&(p.Xa=!0,u=g.RGBA16F);!p.Xa&&J.qe(g,g.RGBA,l)&&(p.Xa=!0,
u=g.RGBA);return p},kl:function(){var g=za.instance({width:2});g.fj();var p=aa.instance({width:2,isFloat:!0,G:3});g.o();p.o();J.flush();c.checkFramebufferStatus(za.Th())!==c.FRAMEBUFFER_COMPLETE?(aa.ho(),v.kf=!1):v.kf=!0;g.remove();p.remove()},ll:function(){var g=!1;J.la()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof c[p]}));v.Wi=g},il:function(){var g=J.bf(c);Object.assign(v,g);
if(!v.Va&&!v.Xa)return!1;J.kl();J.ll();return!0},yn:function(g,p,l,C,K){c.readPixels(g,p,l,C,c.RGBA,c.UNSIGNED_BYTE,K);return Promise.resolve(K,!1)},ng:function(g,p,l,C,K,L,A){if(!J.Tk())return J.yn(g,p,l,C,K);h.Ac=A||h.Yk;e(K);c.readPixels(g,p,l,C,c.RGBA,c.UNSIGNED_BYTE,0);h.Rb[h.Ta]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);J.flush();var F=!1;return new Promise(function(N,x){function z(){if(!h.Ub)return d(),k(),w(),x(),!1;var P=(h.Ta+1)%h.Ac;switch(c.clientWaitSync(h.Rb[P],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;
default:return d(),c.deleteSync(h.Rb[P]),h.Rb[P]=null,c.bindBuffer(h.za,h.vb[P]),c.getBufferSubData(h.za,0,K),k(),w(),N(K,F),!0}h.se=setTimeout(z,0);return!1}d();h.bg+1<h.Ac?(k(),w(),N(K,!1)):(h.Ub=!0,z()||!L||F||(F=!0,L()))})},uj:function(){c.viewport(0,0,J.O(),J.Y())},flush:function(){c.flush()},v:function(){d();m();aa.v();za.v();X.v();h.vb.forEach(function(g){c.deleteBuffer(g)});h.vb.splice(0);ub.reset();q=!1}};return J}(),Hb=function(){function a(l,C,K,L){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,
L?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var A=null;if(null!==K)try{A=h.getError();if("FUCKING_BIG_ERROR"===A)return!1;h.texImage2D(h.TEXTURE_2D,0,l,4,4,0,h.RGBA,C,K);A=h.getError();if(A!==h.NO_ERROR)return!1}catch(F){return!1}L&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);X.Ob(h);A=h.getError();if("FUCKING_BIG_ERROR"===A)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,y);A=h.getError();A===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,
null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,y),A=h.getError());if(A!==h.NO_ERROR)return!1;K=!0;for(L=0;16>L;++L)K=K&&4>Math.abs(y[L]-127);K&&(q.Si=C,q.ji=l);return K}function b(l,C){return B.Va&&a(l,h.FLOAT,new Float32Array(G),C)?(n=w.eh,!0):!1}function d(l,C,K){if(!B.Xa)return!1;var L=aa.Xk(G),A=Ga.yd(h);if(A&&A.HALF_FLOAT_OES&&a(l,A.HALF_FLOAT_OES,L,C)||h.HALF_FLOAT&&a(l,h.HALF_FLOAT,L,C))return n=w.sc,!0;L=new Float32Array(G);if(a(l,h.FLOAT,L,C))return n=w.sc,!0;h.bindTexture(h.TEXTURE_2D,
K);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(q.td,p);aa.Nh(h,K,2,2,L,!1,!1);h.bindFramebuffer(q.td,null);h.bindTexture(h.TEXTURE_2D,K);return a(l,null,null,C)?(n=w.sc,!0):!1}function e(l,C,K){r=!0;if(d(l,!0,K)||b(C,!0))return!0;r=!1;return d(l,!1,K)||b(C,!1)?!0:!1}function k(l){if(n===w.I){h=l||c;n=w.RGBA8;r=!0;Ga.Gh(h);B||(B=Ga.bf(h));za.reset();p=h.createFramebuffer();q.td=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(q.td,null);h.clearColor(0,
0,0,0);h.viewport(0,0,2,2);Z.I();J=Z.Ab(h);l=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,l);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);g=l;var C=l=h.RGBA,K=h.RGBA16F,L=h.RGBA32F;L&&(l=L);K&&(C=K);if((K||L)&&e(C,l,g))return m(),!0;l=C=h.RGBA;if(e(C,l,g))return m(),!0;n=w.RGBA8;m();return!1}}function m(){h.deleteProgram(J.na);h.deleteTexture(g);
g=J=null}for(var w={I:-1,eh:3,sc:2,RGBA8:0},n=w.I,q={Si:null,ji:null,td:null},r=!0,y=new Uint8Array(16),G=Array(64),v=0;4>v;++v)for(var H=0;4>H;++H){var u=0===(H+v)%2?1:0,f=4*v+H;G[4*f]=u;G[4*f+1]=u;G[4*f+2]=u;G[4*f+3]=u}var h=null,B=null,J=null,g=null,p=null;return{Rk:function(l){k(l);return r},mh:function(l,C){n===w.I&&(typeof("undefined"!==C)&&(B=C),k(l));return n!==w.RGBA8},Zp:function(l){k(l);return n===w.eh},Jm:function(l){k(l);return n===w.sc},Lp:function(l){k(l);return q.Si},Pl:function(l){k(l);
return q.ji},v:function(){h=null;r=!0;n=w.I;B=null}}}(),Zc={instance:function(a){function b(){v&&v.remove();v=aa.instance({isFloat:!1,isPot:!1,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}var d=null,e=!1,k=!1,m=null,w=!1,n=!1,q=null,r="undefined"===typeof a.preprocessing?!1:a.preprocessing,y="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(e=!0,I&&void 0!==I.ca&&(a.mask=I.ca+a.mask),d=aa.instance({isFloat:!1,url:a.mask}));var G=!1;a.customInputShader&&(G="s49",Z.pa({name:"_",
id:G,g:a.customInputShader,Jq:["uSource"],precision:"lowp"}),Z.j(G,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":q="s38";w=!0;break;case "meanNormalization":q="s39";w=!0;break;case "grayScale":q="s35";w=!1;break;case "grayScaleTilt":q="s36";n=!0;w=!1;break;case "rgbGrayTilt":q="s37";n=!0;w=!1;break;case "copy":q=G?G:"s0";break;case "inputLightRegulation":q=G?G:"s35";m=pd.instance({ii:y,Mi:a.size,Ii:a.nBlurPass,Ba:!1});k=!0;break;case "inputMix0":q="none";m=qd.instance({Z:y,hb:a.varianceMin,
Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});k=!0;break;case "inputMix1":q="none";m=rd.instance({Z:y,hb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});k=!0;break;case "inputCut4":q="none";m=sd.instance({Z:y,hb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Hc:a.isNormalized||!1,hg:a.overlap||0,Ba:!1});y*=m.Ql();k=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}y=Math.ceil(y);n&&Z.j(q,[{name:"u29",type:"1f",value:a.tilt}]);e&&(q+="Mask");var v=null;b();var H={O:function(){return a.size},
Rl:function(){return y},sf:function(){return H.O()},Vl:function(){return k?m.Dc():v},ue:function(u){a.Aa=u;b()},wa:function(u){za.$();if("abort"===q)return u;"none"!==q&&(Z.set(q),w&&Z.H("u30",1/a.size),v.L(),e&&d.h(1),X.l(!1,!1),v.h(0),u=v);k&&m.process(u)},v:function(){v.remove();e&&d.remove()}};return H}},$c={instance:function(a){function b(){if(p.lc){k.input&&(k.input.remove(),k.Ld.remove());var C=a.size*a.sparsity;g=Math.log(C/a.size)/Math.log(2);k.input=aa.instance({isMipmap:!0,isFloat:!0,isPot:!0,
width:C*a.Aa[0],height:C*a.Aa[1],Wf:g});k.Ld=aa.instance({isFloat:!0,isPot:!0,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}}function d(){k.xb&&k.xb.remove();k.xb=aa.instance({isFloat:!0,isPot:!w,isLinear:!w&&n.isLinear,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}function e(C){n.buffer.forEach(function(K,L){n.results[L][0]=C[0][K];n.results[L][1]=C[1][K];n.results[L][2]=C[2][K];n.results[L][3]=C[3][K]});return n.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,Ld:null,xb:null,gg:null,
eg:null,fg:null},m=null,w=!0,n={type:"undef",B:null,isLinear:!1,buffer:[],results:[]},q=-1,r=a.isReorganize?a.isReorganize:!1,y=a.kernelsCount?!0:!1,G=[a.Sb?"s31":"s30",a.Sb?"s33":"s32","s34"][a.shiftRGBAMode||0],v={isEnabled:!1},H=1/a.size;a.Dm?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.de.sf(),w=!1):"full"===a.connectivityUp&&(a.sparsity=a.de.sf());var u={elu:"s18",elu01:"s19",relu:"s17",arctan:"s20",arctan2:"s21",sigmoid:"s16",copy:"s0"}[a.activation],f=a.sparsity*a.sparsity,h=!1,
B=a.size,J="";if(a.maxPooling){switch(a.maxPooling.size){case 2:J="s40";break;case 4:J="s41"}h=!0;B/=a.maxPooling.size;k.eg=aa.instance({isFloat:!0,isPot:!1,width:B})}var g=-1,p=null;w&&d();k.bias=aa.instance(a.bias);var l={O:function(){return a.size},sf:function(){return B},Qh:function(){return a.classesCount},Ik:function(C){m.h(C)},pn:function(){a.remap&&a.remap.isEnabled&&(v={isEnabled:!0,Xm:aa.instance(a.remap.maskTexture),Mc:a.remap.layers.map(function(C){return a.parent.Sl(C)}),depth:a.remap.depth})},
io:function(){switch(a.connectivityUp){case "direct":p=td.instance(a.connectivity);break;case "square":p=ud.instance(a.connectivity);break;case "squareFast":p=vd.instance(a.connectivity,a.activation);break;case "full":p=wd.instance(Object.assign({Sb:a.Sb,Ec:a.Ec||[1,1]},a.connectivity));break;case "conv":q=a.kernelsCount,p=xd.instance(a.connectivity),r&&(k.gg=aa.instance({width:B,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},wa:function(C,K){m=C;p.lc?(k.input.L(),y&&k.bias.h(2),p.wa(v),k.input.h(0),k.input.El(g),
k.Ld.L(),y?Z.set("s0"):(Z.set(G),Z.H("u4",f),k.bias.h(1)),k.input.Jk(g,0),X.l(!1,!1),Z.set(u),k.xb.o(),k.Ld.h(0),X.l(!1,!1)):(k.xb.L(),k.bias.h(1),p.wa());if(w)return K=k.xb,h&&(k.eg.L(),K.h(0),Z.set(J),Z.N("u14",H,H),X.l(!1,!1),K=k.eg),r&&(k.gg.o(),Z.set("s23"),Z.N("u18",q,B/q),K.h(0),X.l(!1,!1),K=k.gg),K.h(0),K;var L=k.xb;a.normalize&&(C=L,Z.set("gpuRawAvg"===n.type?"s9":"s8"),Z.H("u10",H),k.fg.L(),C.h(0),X.l(!1,!1),L=k.fg);C=null;switch(n.type){case "cpuRGBA2Float":L.zh(!1);K?C=l.tn(L).then(n.B):
(L=l.un(L),n.B(L));break;case "cpuMeanFloat":L.zh(!0);if(K)C=L.wn().then(n.B);else{L=L.xn();for(var A=0;A<L.length;++A);n.B(L)}break;case "gpuRawAvg":case "gpuRaw":L.h(0);case "none":null!==n.B&&n.B(L)}K&&null===C&&(C=Promise.resolve());return C},ue:function(C){a.Aa=C;b();d()},qo:function(C){C&&(n.type=C.Zd||"none",n.B=C.Yd||null,n.isLinear=C.dg?!0:!1);d();C="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var K=0,L=0,A=0;K<C;++K)n.buffer.push(L+(a.size-1-A)*a.size),
n.results.push([-1,-1,-1,-1]),++L,L===a.size&&(L=0,++A);a.normalize&&(k.fg=aa.instance({isFloat:!0,isPot:!0,width:a.size}))},tn:function(C){return C.vn().then(e)},un:function(C){C=C.Xi();e(C);return n.results},v:function(){for(var C in k){var K=k[C];K&&K.remove()}p&&(p.v(),p=null)}};a.de&&l.io(a.de);return l}},td={instance:function(a){var b=aa.instance(a.weights);return{lc:!0,Fd:function(){return 1},v:function(){b.remove()},km:function(){return b},wa:function(){Z.set("s29");b.h(1);X.l(!1,!1)}}}},
wd={instance:function(a){var b=a.fromLayerSize,d=aa.instance(a.weights),e=a.Sb?"s26":"s25";return{lc:!0,Fd:function(){return b},v:function(){d.remove()},wa:function(k){if(k.isEnabled){Z.set("s27");k.Xm.h(3);for(var m=Math.min(k.Mc.length,k.depth),w=0;w<m;++w)k.Mc[w].Ik(4+w)}else Z.set(e);a.Sb&&Z.je("u21",a.Ec);Z.H("u8",a.toLayerSize);Z.H("u9",a.fromLayerSize);d.h(1);X.l(!1,!1)}}}},ud={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,m=k/b,w=b/d,n=0,q=0,r=0,y=Array(e*
d*e*d*4),G=Array(e*d*e*d*4),v=Array(b*b),H=0;H<v.length;++H)v[H]=0;H=Math.floor(e/2);for(var u=.5/d,f=.5/b,h=.5/k,B=0;B<d;++B)for(var J=Math.round(B*w),g=0;g<d;++g){var p=Math.round(g*w),l=B/d,C=g/d;l+=u;C+=u;for(var K=0;K<e;++K){var L=J+K-H;0>L&&(L+=b);L>=b&&(L-=b);for(var A=0;A<e;++A){var F=n/k,N=q/k,x=p+A-H;0>x&&(x+=b);x>=b&&(x-=b);var z=L/b,P=x/b;N=1-N-1/k;z+=f;P+=f;F+=h;N+=h;var T=B*e+K,la=g*e+A;la=d*e-la-1;T=la*d*e+T;y[4*T]=F;y[4*T+1]=N;y[4*T+2]=z;y[4*T+3]=P;P=v[x*b+L]++;T=P%m;z=L*m+T;x=x*m+
(P-T)/m;x=b*m-1-x;x=x*b*m+z;G[4*x]=F;G[4*x+1]=N;G[4*x+2]=l;G[4*x+3]=C;++n>=k&&(n=0,++q);++r}}}v=null;var ba=aa.instance(a.weights);delete a.weights.data;var Q=aa.instance({width:k,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;var ia=aa.instance({width:k,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;return{lc:!0,Fd:function(){return m},v:function(){Q.remove();ia.remove();ba.remove()},wa:function(){Z.set("s24");ba.h(1);ia.h(2);X.l(!1,!1)}}}},xd={instance:function(a){var b=a.kernelsCount,
d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||[1,1],m=aa.instance(a.weights);return{lc:!0,Fd:function(){return e},Tp:function(){return d},km:function(){return m},v:function(){m.remove()},wa:function(){Z.set("s28");Z.je("u28",k);Z.H("u26",b);Z.H("u27",d);Z.H("u8",a.toLayerSize);Z.H("u9",a.fromLayerSize);m.h(1);X.l(!1,!1)}}}},vd={instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,k=a.toSparsity,m=a.stride?a.stride:1,w=k*e/d,n=e<d,q=d/e,r=aa.instance(a.weights),y="s50"+[d.toString(),
e.toString(),k.toString(),m.toString(),b].join("_");Z.Bl(y)||(a=db(b),e=[{type:"1f",name:"u8",value:e},{type:"1f",name:"u32",value:m}],n&&e.push({type:"1f",name:"u9",value:d}),d=[(n?w:k).toFixed(1),a],n&&d.push(q.toFixed(1)),Z.tm(n?"s46":"s45",y,d),Z.j(y,e.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{lc:!1,Fd:function(){return w},v:function(){r.remove()},wa:function(){Z.set(y);r.h(3);X.l(!1,!1)}}}},pd={instance:function(a){var b=a.Ii?
a.Ii:3,d=a.ii?a.ii:64,e=a.Mi?a.Mi:64,k=a.Ba?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=aa.instance(a),w=aa.instance(a),n=aa.instance(a),q=aa.instance(a),r=aa.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),y=1/d;return{process:function(G){Z.set("s42");q.o();X.l(k,!1);Z.set("s43");for(var v=0;v<b;++v)m.o(),Z.N("u14",y,0),X.l(k,!1),n.o(),q.h(0),X.l(k,!1),w.o(),m.h(0),Z.N("u14",0,y),X.l(k,!1),q.o(),n.h(0),X.l(k,!1),v!==b-1&&w.h(0);Z.set("s44");r.o();G.h(0);w.h(1);q.h(2);X.l(k,!1);r.h(0)},
Dc:function(){return r}}}},qd={instance:function(a){function b(y){return aa.instance({isFloat:y,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({hb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=[b(!1),b(!1),b(!1)],m=[b(!1),b(!1),b(!1)],w=b(!0),n=[e,m[0],m[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));var q="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.hb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};Z.uc([{id:"s52",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",s:r,i:["u1"],precision:"lowp"},{id:"s53",name:"_",g:a,s:r,i:["u1","u33"],precision:"lowp"},{id:"s54",name:"_",g:q,s:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){Z.set("s52");e.L();X.l(d.Ba,!1);Z.set("s53");for(var y=0;3>y;++y)Z.N("u33",1,0),k[y].o(),n[y].h(0),
X.l(!1,!1),Z.N("u33",0,1),m[y].o(),k[y].h(0),X.l(!1,!1);Z.set("s54");w.o();e.h(0);m[0].h(1);m[1].h(2);m[2].h(3);X.l(!1,!1);w.h(0)},Dc:function(){return w}}}},rd={instance:function(a){function b(r){return aa.instance({isFloat:r,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({hb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=b(!1),m=b(!1),w=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));var n="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.hb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};Z.uc([{id:"s55",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
s:q,i:["u1"],precision:"lowp"},{id:"s56",name:"_",g:a,s:q,i:["u1","u33"],precision:"lowp"},{id:"s57",name:"_",g:n,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){Z.set("s55");e.L();X.l(d.Ba,!1);Z.set("s56");Z.N("u33",1,0);k.o();e.h(0);X.l(!1,!1);Z.N("u33",0,1);m.o();k.h(0);X.l(!1,!1);Z.set("s57");w.o();e.h(0);m.h(1);X.l(!1,!1);w.h(0)},Dc:function(){return w}}}},sd={instance:function(a){function b(y){return aa.instance({isFloat:y,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({hb:.1,
Sa:9,Z:128,gain:1,hg:0,Hc:!1,Ba:!1},a),e=b(!1),k=null,m=null,w=null;d.Hc&&(k=b(!1),m=b(!1),w=b(!0));a={u1:0};var n=[{id:"s58",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",d.hg.toFixed(4)),s:a,
i:["u1"],precision:"lowp"}];if(d.Hc){var q="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6)),r="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.hb.toFixed(4)).replace("2.2222",d.gain.toFixed(4));n.push({id:"s59",name:"_",g:q,s:a,i:["u1","u33"],precision:"lowp"},{id:"s60",name:"_",g:r,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}Z.uc(n);return{process:function(){Z.set("s58");e.L();X.l(d.Ba,!1);d.Hc?(Z.set("s59"),Z.N("u33",1,0),k.o(),e.h(0),X.l(!1,!1),Z.N("u33",0,1),m.o(),k.h(0),X.l(!1,!1),Z.set("s60"),w.o(),e.h(0),m.h(1),X.l(!1,!1),w.h(0)):e.h(0)},Ql:function(){return 2-d.hg},Dc:function(){return d.Hc?w:e}}}},Fb=function(){function a(f,
h,B,J,g,p,l){if(!H)if(l===p.length)g();else{switch(p[l]){case "A":B();break;case "D":f();break;case "S":h().then(function(C,K){u.Hj();a(f,h,B,K?null:J,g,p,++l)}).catch(function(C){console.log("An error occurred in the WebAR loop: ",C);g()});return;case "R":J&&J()}a(f,h,B,J,g,p,++l)}}var b={n:5,ag:1,Ai:0,Bd:[35,49],xd:[2,200],k:.7,Fo:200,jn:.05},d=-1,e=null,k=-1,m=-1,w=0,n=-1,q=-1,r=0,y=0,G=b.xd[1],v=Math.log(2),H=!0,u={V:function(){switch(d){case -1:return-1;case 0:return q+e.Ai;case 1:return r}},
Rh:function(f){return Math.pow(Math.min(Math.max(n,0),e.n-1)/(e.n-1),f||1)},m:function(f){e=Object.assign({},b,f);n=q=e.ag;d=0;u.reset()},Hj:function(f){f=("undefined"===typeof f?Date.now():f)||0;var h=Math.min(Math.max(f-y,e.xd[0]),e.xd[1]);G=h;y=f;var B=-1===k?0:e.k;k=Math.min(Math.max(1E3/h,5),120)*(1-B)+k*B;f-m>e.Fo&&5<++w&&(h=e.k,n=n*(1-h)+(k<e.Bd[0]?q-1:k>e.Bd[1]?q+1:q)*h,Math.abs(n-q)>1-e.jn&&(h=Math.min(Math.max(Math.round(n),0),e.n-1),h!==q&&(n=q=h,k=(e.Bd[1]-e.Bd[0])/2)),m=f)},pg:function(f,
h,B,J,g,p){H=!1;a(f,h,B,J,g,p,0)},stop:function(){H=!0},bo:function(f){r=f;d=1},Eo:function(){d=0;u.reset()},reset:function(){G=b.xd[1];m=k=-1;w=0},Cq:function(f,h,B){B=Math.exp(-v*G/B);return(1-B)*f+B*h},Kp:function(){return G}};return u}(),Nc=function(){function a(G,v){var H=G[0]-.5;G=G[1]-.5;var u=v[0]-.5;v=v[1]-.5;return H*H+G*G-(u*u+v*v)}var b={Ji:4,$d:[1.5,1.5,2],ra:[.1,.1,.1],dj:1,Z:-1,Cf:-1,zo:2,fn:1,qg:!0,zl:.8},d=null,e=[],k=[],m=[],w=[0],n=[.5,.5,1],q=null,r=0,y=[0,0,0];return{m:function(G){d=
Object.assign({},b,G);e.splice(0);k.splice(0);m.splice(0);r=0;G=d.$d[0]*d.ra[0];var v=d.$d[1]*d.ra[1],H=1/(1+d.$d[2]*d.ra[2]),u=d.dj*Math.min(d.Z,d.Cf),f=u/d.Z;u/=d.Cf;var h=.5*d.zl;h*=h;for(var B=0;B<d.Ji;++B){var J=[];k.push(J);var g=Math.pow(H,B),p=f*g,l=u*g;g=p*d.fn;m.push(g);var C=p*G,K=l*v;p/=2;l/=2;for(var L=1+(1-p-p)/C,A=1+(1-l-l)/K,F=0;F<A;++F)for(var N=l+F*K,x=N-.5,z=0;z<L;++z){var P=p+z*C,T=P-.5;T*T+x*x>h||(P=[P,N,g],e.push(P),J.push(P))}d.qg&&J.sort(a);q=e}d.qg&&e.sort(a)},get:function(G){var v=
q.length;if(0===v)return n;for(;G>=w.length;)w.push(0);w[G]>=v&&(w[G]=0);var H=q[Math.floor(w[G])%v];w[G]=(w[G]+1/d.zo)%v;if(0===r)return H;y[0]=H[0];y[1]=H[1];y[2]=r;return y},hq:function(G){G>=w.length||(w[G]=Math.floor(Math.random()*q.length))},vq:function(G){r=G;if(0===r)q=e;else{for(var v=m.length,H=v-1,u=0;u<v;++u)if(m[u]<=G){H=u;break}q=k[H]}},reset:function(){for(var G=e.length/w.length,v=0;v<w.length;++v)w[v]=Math.floor(v*G);r=0;q=e}}}(),yb=function(){function a(){d(f+H.Xf);h.port.postMessage("DONE")}
function b(){p.hd=0===H.ya?J(d):J(e)}function d(A){g.Xb&&null!==u&&(A-=f,A=Math.min(Math.max(A,H.Dh[0]),H.Dh[1]),f+=A,m(),l.isEnabled&&l.Ic&&g.Ma&&f-l.Kf>H.dh&&(r(),l.Kf=f),u(f))}function e(A){g.Xb&&(p.timeout=setTimeout(d.bind(null,A),H.ya))}function k(){u=null;g.Xb=!1;m()}function m(){p.hd&&(window.cancelAnimationFrame(p.hd),p.hd=null);p.timeout&&(window.clearTimeout(p.timeout),p.timeout=null)}function w(A){A&&!g.Ma?(g.Ma=!0,B&&Fb.Eo(),h.port.postMessage("STOP"),Ga.Ij(!0),b()):!A&&g.Ma&&(g.Ma=!1,
B&&Fb.bo(1),Ga.Ij(!1),h.port.postMessage("START"))}function n(A){A.target.hidden?K():C()}function q(A,F,N){F=A.createShader(F);A.shaderSource(F,N);A.compileShader(F);return F}function r(){l.Ic=!1;var A=l.Wa,F=l.Id,N=l.Jd,x=l.za;A.uniform1f(l.bi,Math.random());l.Yb?F.beginQueryEXT(x,N):A.beginQuery(x,N);A.drawElements(A.POINTS,1,A.UNSIGNED_SHORT,0);l.Yb?F.endQueryEXT(x):A.endQuery(x);Ga.flush();G().then(function(z){0===z||isNaN(z)?(l.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
z)):(z=H.Xj*H.bh*1E3/z,l.ye=(l.ye+1)%H.rc,l.Lf[l.ye]=z,++l.yi>H.rc&&(l.Od.set(l.Lf),l.Od.sort(function(P,T){return P-T}),z=l.Od[Math.floor(H.rc/2)],l.Ad=Math.max(l.Ad,z),H.ah(z/l.Ad)),l.Ic=!0)}).catch(function(){l.Ic=!0})}function y(A){var F=l.Wa,N=l.Id,x=l.Jd;x=l.Yb?N.Ep(x,N.QUERY_RESULT_AVAILABLE_EXT):F.getQueryParameter(x,F.QUERY_RESULT_AVAILABLE);F=F.getParameter(N.GPU_DISJOINT_EXT);x?A(!F):setTimeout(y.bind(null,A),.1)}function G(){return new Promise(function(A,F){y(function(N){if(N){N=l.Wa;
var x=l.Id,z=l.Jd;N=l.Yb?x.getQueryObjectEXT(z,x.QUERY_RESULT_EXT):N.getQueryParameter(z,N.QUERY_RESULT);A(N)}else F()})})}var v={ni:!0,Dh:[1,200],Xf:20,ya:0,bh:50,Xj:240,dh:3E3,rc:3,ah:null},H=null,u=null,f=0,h=null,B=!1,J=null,g={La:!1,Ma:!0,Jf:!1,If:!1,Hf:!1,Xb:!1},p={hd:null,timeout:null},l={isEnabled:!1,Ic:!1,Wa:null,Id:null,Jd:null,za:null,bi:null,Yb:!0,Kf:0,yi:0,Lf:null,Od:null,ye:0,Ad:0},C=w.bind(null,!0),K=w.bind(null,!1),L={m:function(A){H=Object.assign(v,A);Object.assign(g,{Ma:!0,La:!0,
Xb:!1});J=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==H.ah){A=document.createElement("canvas");A.setAttribute("width","1");A.setAttribute("height","1");var F={antialias:!1};A=A.getContext("webgl2",F)||A.getContext("webgl",F);if(F=A.getExtension("EXT_disjoint_timer_query")||A.getExtension("EXT_disjoint_timer_query_webgl2")){l.Wa=A;l.Id=F;l.isEnabled=!0;l.Yb=F.beginQueryEXT?!0:!1;var N=q(A,A.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),x=q(A,A.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",H.bh.toString())),z=A.createProgram();A.attachShader(z,N);A.attachShader(z,x);A.linkProgram(z);N=A.getAttribLocation(z,"a0");l.bi=A.getUniformLocation(z,"u39");A.useProgram(z);A.enableVertexAttribArray(N);z=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,z);A.bufferData(A.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),A.STATIC_DRAW);A.vertexAttribPointer(N,4,A.FLOAT,
!1,16,0);z=A.createBuffer();A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,z);A.bufferData(A.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),A.STATIC_DRAW);A.disable(A.DEPTH_TEST);A.disable(A.DITHER);A.disable(A.STENCIL_TEST);A.viewport(0,0,1,1);z=l.Yb?F.createQueryEXT():A.createQuery();l.Jd=z;l.za=F.TIME_ELAPSED_EXT||A.TIME_ELAPSED;l.Kf=-H.dh;l.Lf=new Float32Array(H.rc);l.Od=new Float32Array(H.rc);l.Ad=0;l.ye=0;l.yi=0;l.Ic=!0}}if(H.ni){A=!1;try{if("undefined"===typeof SharedWorker){var P=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
H.Xf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),T=new Worker(P);T.addEventListener("message",a);h={Vi:T,port:T};g.Jf=!0}else{var la=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
H.Xf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ba=new SharedWorker(la);ba.port.start();ba.port.addEventListener("message",a);h={Vi:ba,port:ba.port};g.If=!0}A=!0}catch(Q){}A&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",K),window.addEventListener("focus",C)),window.addEventListener("pagehide",
K),window.addEventListener("pageshow",C),g.Hf=!0)}B="undefined"!==typeof Fb},v:function(){k();g.Hf&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",K),window.removeEventListener("focus",C)),window.removeEventListener("pagehide",K),window.removeEventListener("pageshow",C),g.Hf=!1);g.If?(h.port.close(),g.If=!1):g.Jf&&(h.Vi.terminate(),g.Jf=!1);Object.assign(g,{Ma:!0,La:!1,Xb:!1});u=null},eq:function(){return g.Ma},update:function(A){Object.assign(H,
A)},pg:function(A){g.La||L.m({});m();g.Xb=!0;u=A;g.Ma&&b()},stop:k};return L}(),yc={qf:function(){return Date.now()},Hp:function(){return performance.now()}},vb=function(){function a(Y){switch(C){case l.movePinch:var oa=-Y.deltaY;0===K&&f("pinch",-1,.001*oa,null)}Y.deltaY;Y.preventDefault()}function b(Y){if(-1!==K)switch(C){case l.swipe:if(1!==K)break;q();y(Y,A);var oa=A[0]-L[0];k(oa);Y=oa/(20*J.offsetWidth/100);f("swipeMove",Math.min(Math.max(Y,-1),1),Y,null);break;case l.movePinch:if(2===K||3===
K){y(Y,A);oa=A[0]-L[0];var da=A[1]-L[1];2===K?(W+=Math.sqrt(oa*oa+da*da),10>W?(L[0]=A[0],L[1]=A[1]):(va||(va=!0,f("moveStart",null,null,null)),ja[0]=oa,ja[1]=da,N[0]=oa-F[0],N[1]=da-F[1],f("move",ja,N,null),F[0]=ja[0],F[1]=ja[1])):3===K&&(Y=r(Y)/ma,f("pinch",Y,Y-Da,null),Da=Y)}}}function d(Y){if(-1!==K)switch(C){case l.swipe:if(1!==K)break;q();y(Y,A);Y=A[0]-L[0];var oa=0>Y;(Y=20<100*Math.abs(Y)/J.offsetWidth)&&oa?f("swipeLeft",x,null,null):Y&&!oa&&f("swipeRight",x,null,null);var da=function(){setTimeout(function(){n();
K=0;f("swipeEnd",null,null,null)},202)};Y?(Y=function(){var ca=(oa?-1:1)*J.width,Ca=(oa?1:-1)*ca/J.width;x.style.transitionDuration=(400).toString()+"ms";x.style.left=(ba[0]+ca).toString()+"px";x.style.top=ba[1].toString()+"px";x.style.transform="rotate( "+Ca.toString()+"rad )";da()},la?Y():Q=Y):(x.style.transitionDuration=(200).toString()+"ms",x.style.opacity="0",x.style.left=ba[0].toString()+"px",x.style.top=ba[1].toString()+"px",x.style.transform="",da());K=-1;break;case l.movePinch:if(2===K||
3===K)K===K.move?f("moveEnd",null,null,null):3===K&&f("pinchEnd",null,null,null),K=0}}function e(Y){Y.preventDefault();if(-1!==K)switch(C){case l.swipe:if(0!==K)break;q();K=1;ia=setTimeout(function(){n();ia=null;1===K&&(K=0,f("swipeEnd",null,null,null))},1E3);m();f("swipeStart",null,null,null);f("swipeGetCanvas",x,P,z);y(Y,L);break;case l.movePinch:0!==K?2!==K||va||void 0===Y.changedTouches&&void 0===Y.touches||(ma=r(Y),20<ma&&(K=3,Da=1,f("pinchStart",null,null,null))):3!==K&&(va=!1,y(Y,L),F[0]=0,
F[1]=0,K=2,W=0)}}function k(Y){var oa=0>Y;x.style.left=ba[0]+Y+"px";x.style.transformOrigin=oa?O:t;x.style.transform="rotate( "+((oa?1:-1)*Y/J.width).toString()+"rad )"}function m(){la=!1;var Y=J.getBoundingClientRect();ba[0]=Y.left;ba[1]=Y.top;x.width=Math.round(J.width/4);x.height=Math.round(J.height/4);z.width=x.width;z.height=x.height;x.style.width=J.offsetWidth+"px";x.style.height=J.offsetHeight+"px";x.style.left=ba[0]+"px";x.style.top=ba[1]+"px";setTimeout(w,0)}function w(){P.drawImage(J,0,
0,x.width,x.height);T.drawImage(x,0,0);la=!0;document.body.appendChild(x);Q&&(Q(),Q=!1)}function n(){x.style.transitionDuration="0ms";x.style.opacity="1";x.style.transform="";la&&(document.body.removeChild(x),la=!1)}function q(){ia&&(window.clearTimeout(ia),ia=null)}function r(Y){G(Y,ka,0);G(Y,na,1);return Math.sqrt(ka[0]*ka[0]+na[0]*na[0])}function y(Y,oa){void 0!==Y.changedTouches||void 0!==Y.touches?G(Y,oa,0):(oa[0]=Y.pageX,oa[1]=Y.pageY)}function G(Y,oa,da){Y.touches.length>da?(oa[0]=Y.touches[da].pageX,
oa[1]=Y.touches[da].pageY):(oa[0]=Y.changedTouches[da].pageX,oa[1]=Y.changedTouches[da].pageY)}function v(){p.forEach(function(Y){J.removeEventListener(Y.type,Y.rb,!1)});return p.splice(0,p.length)}function H(Y){Y.forEach(function(oa){u(oa.type,oa.rb)})}function u(Y,oa){J.removeEventListener(Y,oa,!1);x.removeEventListener(Y,oa,!1);J.addEventListener(Y,oa,!1);x.addEventListener(Y,oa,!1);0===p.filter(function(da){return da.type===Y&&da.rb===oa}).length&&p.push({type:Y,rb:oa})}function f(Y,oa,da,ca){g[Y].forEach(function(Ca){Ca.rb(oa,
da,ca)})}function h(Y){return Y[0]+"% "+(100-Y[1]).toString()+"%"}var B=!1,J=null,g={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},p=[],l={idle:0,swipe:1,movePinch:2},C=l.idle,K=0,L=[0,0],A=[0,0],F=[0,0],N=[0,0],x=document.createElement("canvas"),z=document.createElement("canvas"),P=x.getContext("2d"),T=z.getContext("2d");x.style.position="fixed";x.style.zIndex="800";x.style.cursor="move";x.style.pointerEvents=
"none";x.className="swipeImage";x.setAttribute("draggable",!1);var la=!1,ba=[0,0],Q=null,ia=null,t=h([50,100]),O=h([50,0]),D=null,W=0,ja=[0,0],ma=0,va=!1,Da=1,ka=[0,0],na=[0,0],Fa={init:function(Y){if(B)Fa.switch_canvas(Y.qa);else return J=Y.qa,u("mousedown",e),u("mouseup",d),u("mouseout",d),u("mousemove",b),u("mousemove",b),u("wheel",a),u("touchstart",e),u("touchend",d),u("touchmove",b),B=!0,Fa},switch_canvas:function(Y){if(!B)Fa.init({qa:Y});else if(J!==Y){var oa=v();J=Y;H(oa);for(var da in g)for(Y=
g[da],oa=Y.length-1;0<=oa;--oa)Y[oa].An&&Y.splice(oa,1)}},get_mode:function(){for(var Y in l)if(l[Y]===C)return Y;return!1},switch_mode:function(Y){B&&"undefined"!==typeof l[Y]&&(Y=l[Y],C!==Y&&(q(),C=Y,K=0))},add_listener:function(Y,oa,da){g[Y].push({rb:oa,An:"undefined"===typeof da?!1:da});return Fa},remove_listener:function(Y){g[Y].splice(0,g[Y].length);return Fa},animate_swipe:function(Y,oa){D&&(clearInterval(D),D=null);m();var da=J.width/(oa/1E3)*("left"===Y?-1:1),ca=0,Ca,mb=Date.now();D=setInterval(function(){D&&
(Ca=Date.now(),ca+=(Ca-mb)/1E3*da,k(ca),mb=Ca,Math.abs(ca)>.75*J.width&&D&&(clearInterval(D),D=null,n()))},16)}};return Fa}();window.CanvasListeners=vb;var S={VERSION:"3.8.2",ed:[],dd:[],He:!1,Ge:!1,Ie:!1,ready:!1,isBusy:!1},ab={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,FOVforced:0,Fe:10,Ee:8E3},Pc={Jc:!0,Wd:"models3D",Vd:"materials",Co:"tweakers",neuralNetworkPath:"built/jeefitNNC_60_0.json",neuralNetworkVersion:"60_0",
ca:"",ua:"",ad:"",ya:0,hk:20,width:1024,height:1024,pi:!0,hn:[2,3.5],bj:300,bd:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,ra:[.2,.2,.3],oc:[[.8,.5],[.8,.5],[1,1]],Ao:30,gl:.9,sn:[.2,.6],rn:1,Bo:[.01,.035],Jn:[.003,.007],Jg:[0,.6],Dl:.2,Za:[.698111,1.047166,.122169],Gj:[-.1,0,0],ce:[0,-62,8],nn:1.03,Da:[0,-60,0],$f:50,Bc:.4,lf:73,Ke:[.02,1],fk:[4,1],Mk:[0,.5],Ln:.15,In:1,En:[.5,4],Po:20,Cp:!1,Fc:145,Bf:-18,zf:20,Af:3,Nc:[-110,0],jc:1,vj:.4,wj:3,me:[0,0,0],kc:[1.1,1],qd:0,
af:.95,$e:90,Ze:50,jd:30,Kb:.05,xf:!0,Sd:!0,Sf:"images/masks/target.jpg",Tf:!1,Rd:[1/255,175/255,236/255,0],Td:-.001,Rf:3.14,Oe:0,Ne:"images/masks/burka.png",Le:Math.PI-Math.PI/4,Ye:Math.PI/4,og:[.3,.2,.1],$b:1,Bi:[700,90],Rm:[.2,.04],Qo:"images/backgrounds/viewer3D.png",$g:[0,0,0],Zg:[0,15,60],Ce:.3,Yo:50,Uo:Wc?Za:!1,Vo:Wc?Za:!1,Xo:1E3,$o:1E3,Wo:40,To:[0,0,-400],Ei:.1,Vm:.5,Fi:[.5,1.5],Ud:30,Um:!0},I=Object.assign({},Pc);V.uh=!0;V.vh=!0;V.th=!1;V.Oa=!0;var cb={ee:3.5,zb:"images/debug/picsou.png",
Tc:45,Pf:.785,Qf:.3925,Qd:5,Pd:2,Of:0,Nf:0,Ro:"images/backgrounds/bg1.jpg",So:"images/backgrounds/bg1_light.jpg",Tj:1,Uj:2};I.fx=[4,50];I.Nc=[-110,0];I.vj=.25;I.wj=3;I.me=[0,-2,20];I.kc=[.95,1];V.Rc=2.1289;V.ig=1;cb.ee=2.5858;cb.Pf=.4388;cb.Qf=.118;cb.zb="images/debug/hdri2.png";cb.Tc=180;cb.rg=.8065;cb.Qd=5.3887;cb.Pd=.5351;cb.Of=-.3019;cb.Nf=0;cb.Tj=3.5288;cb.Uj=6.2168;var Oc={element:null,Fh:null,Nd:!1,rh:null,ga_:null,Pg:null,deviceId:-1,Pb:-1,wd:0,Ti:null,Be:-1},Ba=Object.assign({},Oc),gb=null,
Xc=I.hn,Dc=window.devicePixelRatio?window.devicePixelRatio:1;var pc={Cl:Math.max(Xc[0],Dc)/Dc,jf:Math.min(Dc,Xc[1])};var fb=null;S.onLoad=function(a){S.ready?a():S.ed.push(a)};S.onHalfLoad=function(a){S.load_model?a():S.dd.push(a)};S.onWebcamAsk=function(a){S.He=a};S.onContextLost=function(a){S.Ge=a};S.onWebcamGet=function(a){S.Ie=a};S.get_onHalfLoadCallstack=function(){return S.dd};S.set_size=function(a,b,d){d=d?pc.jf:1;I.width=a*d;I.height=b*d};S.get_videoDevices=function(a){bd(a)};S.set_videoDevice=
function(a){Ba.deviceId=a};S.set_videoSizes=function(a,b,d,e,k,m){ab.idealWidth=a;ab.idealHeight=b;ab.minWidth=d;ab.maxWidth=e;ab.minHeight=k;ab.maxHeight=m};S.set_loading=function(a,b,d){a&&(I.Tf=!0,I.Sf=a);"number"===typeof b&&(a=new Xb(b),I.Rd=[a.r,a.X,a.b,0]);"number"===typeof d&&(I.Td=d)};S.set_settings=function(a,b,d){a&&Object.assign(I,a);b&&Object.assign(ab,b);d&&Object.assign(cb,d)};S.get_size=function(){return{width:I.width,height:I.height}};S.get_cv=function(){return kb.sb()};S.set_NNCPath=
function(a){I.ad=a};S.set_materialsPath=function(a){I.Vd=a};S.set_modelsPath=function(a){I.Wd=a};S.destroy=function(){return fb?fb.v():Promise.resolve()};S.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(cb.Qd=a.lightDirFactor);0<=a.lightAmbFactor&&(cb.Pd=a.lightAmbFactor);0<=a.screenLuminosity&&(cb.ee=a.screenLuminosity);0<=a.screenWidthAngle&&(cb.Tc=a.screenWidthAngle);a.screenTextureURL&&
(cb.zb=a.screenTextureURL);S.ready&&(fb.Cj(),ua.Ha.jh(Ba.ga_))};S.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null},a);I.Jc=b.isRequestCamera;S.set_size(b.width,b.height,b.isApplyOverSampling);S.update_lightSettings(a);b.modelsPath&&(I.Wd=b.modelsPath);b.materialsPath&&
(I.Vd=b.materialsPath);b.materialTextureBasePath&&(V.Hi=b.materialTextureBasePath);b.NNCPath&&(I.ad=b.NNCPath);I.scanOverlapFactors=b.scanOverlapFactors||I.scanOverlapFactors;I.scanNScaleLevels=b.scanNScaleLevels||I.scanNScaleLevels;I.scanScale0Factor=b.scanScale0Factor||I.scanScale0Factor;I.pi=b.isMirror;return new Promise(function(d,e){S.onHalfLoad(d);S.init(b.basePath,function(){},e,b.cv)})};S.init=function(a,b,d,e){fb=cd();S.ob=d?function(k,m){d(k,m);S.ob=!1}:function(){};S.gp=fb;a&&(I.ca=a);
b&&S.ed.push(b);fb.Cj();a=fb.Xl();return kb.m({Xe:"jeefitCanvas",qa:e,width:a.width,height:a.height,debug:!1,cg:function(){S.Ge&&S.Ge()},premultipliedAlpha:!0})?I.Jc?fd():gd():(S.ob&&S.ob("GL_INCOMPATIBLE","Cannot init Context"),!1)};window.JEELIZVTO=S;var Lc=function(){function a(){za.ba();c.viewport(0,0,1,1);Z.set("s73");e.h(0);X.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,m);b(0<m[0])}var b=null,d=!1,e=null,k=!1,m=null,w={m:function(n){if(k)return!1;e=n;Z.uc([{id:"s73",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);Z.j("s73",[{type:"1i",name:"u41",value:0}]);m=new Uint8Array(4);return k=!0},start:function(n,q){w.stop();b=q;d=window.setInterval(a,n)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return w}(),Ec={};Xb.prototype={constructor:Xb,r:1,X:1,b:1,set:function(a){a instanceof Xb?this.K(a):"number"===typeof a?Rc(this,a):"string"===typeof a&&hd(this,a);return this},On:function(){function a(b,d,e){0>e&&(e+=1);1<e&&--e;return e<1/6?b+6*(d-b)*e:.5>e?d:e<2/3?b+6*(d-b)*(2/3-
e):b}return function(b,d,e){b=Ec.Math.Dp(b,1);d=Ec.Math.Se(d,0,1);e=Ec.Math.Se(e,0,1);0===d?this.r=this.X=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,b+1/3),this.X=a(e,d,b),this.b=a(e,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.X,this.b)},K:function(a){this.r=a.r;this.X=a.X;this.b=a.b;return this},add:function(a){this.r+=a.r;this.X+=a.X;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.X*=a.X;this.b*=a.b;return this},Ca:function(a){this.r*=
a;this.X*=a;this.b*=a;return this},qb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.X=a[b+1];this.b=a[b+2];return this}};var id={};sc.prototype={constructor:sc,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get w(){return this.P},set w(a){this.P=a},set:function(a,b,d,e){this.C=a;this.D=b;this.F=d;this.P=e;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.P)},K:function(a){this.C=a.x;
this.D=a.y;this.F=a.z;this.P=a.w;return this},inverse:function(){this.C*=-1;this.D*=-1;this.F*=-1;this.normalize();return this},sd:function(a){return this.C*a.C+this.D*a.D+this.F*a.F+this.P*a.P},Mf:function(){return this.C*this.C+this.D*this.D+this.F*this.F+this.P*this.P},length:function(){return Math.sqrt(this.C*this.C+this.D*this.D+this.F*this.F+this.P*this.P)},normalize:function(){var a=this.length();0===a?(this.F=this.D=this.C=0,this.P=1):(a=1/a,this.C*=a,this.D*=a,this.F*=a,this.P*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),Sc(this,a,b)):Sc(this,this,a)},qb:function(a,b){void 0===b&&(b=0);this.C=a[b];this.D=a[b+1];this.F=a[b+2];this.P=a[b+3];return this}};Yb.prototype={constructor:Yb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},gj:function(a){this.x=a;
return this},hj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},K:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.fd(a,b);this.x+=a.x;this.y+=a.y;return this},fd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.eb(a,b);this.x-=a.x;this.y-=a.y;return this},eb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},df:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Se:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},sd:function(a){return this.x*a.x+this.y*a.y},Mf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.df(this.length())},
qb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Va.prototype={constructor:Va,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},gj:function(a){this.x=a;return this},hj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},K:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.fd(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},fd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.eb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},eb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},df:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Se:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},sd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Mf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.df(this.length())},qb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};Zb.Wj="XYZ";Zb.prototype={constructor:Zb,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get order(){return this.Ra},set order(a){this.Ra=a},set:function(a,b,d,e){this.C=
a;this.D=b;this.F=d;this.Ra=e||this.Ra;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.Ra)},K:function(a){this.C=a.C;this.D=a.D;this.F=a.F;this.Ra=a.Ra;return this},qb:function(a){this.C=a[0];this.D=a[1];this.F=a[2];void 0!==a[3]&&(this.Ra=a[3]);return this}};Ac.prototype={constructor:Ac,set:function(a,b){this.min.K(a);this.max.K(b);return this},clone:function(){return(new this.constructor).K(this)},K:function(a){this.min.K(a.min);this.max.K(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Va).eb(this.max,this.min)},getParameter:function(a,b){return(b||new Va).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};$b.prototype={constructor:$b,set:function(a,b,d,e,k,m,w,n,q,r,y,G,v,H,u,f){var h=this.elements;h[0]=a;h[4]=b;
h[8]=d;h[12]=e;h[1]=k;h[5]=m;h[9]=w;h[13]=n;h[2]=q;h[6]=r;h[10]=y;h[14]=G;h[3]=v;h[7]=H;h[11]=u;h[15]=f;return this},clone:function(){return(new $b).qb(this.elements)},K:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Uc(this,a,b)):Uc(this,this,a)},Ca:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,e=a.y;a=a.z;b[0]*=d;b[4]*=e;b[8]*=a;b[1]*=d;b[5]*=e;b[9]*=a;b[2]*=d;b[6]*=e;b[10]*=a;b[3]*=d;b[7]*=e;b[11]*=a;return this},qb:function(a){this.elements.set(a);return this}};Bc.prototype={constructor:Bc,
clone:function(){return(new this.constructor).K(this)},K:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Pa.K(a.Pa);this.color.K(a.color);this.ac=a.ac;for(var b=0,d=a.Ae.length;b<d;b++)this.Ae[b]=a.Ae[b].clone();b=0;for(d=a.Xg.length;b<d;b++)this.Xg[b]=a.Xg[b].clone();return this}};var E=function(){function a(p,l,C){l=p.createShader(l);p.shaderSource(l,C);p.compileShader(l);return p.getShaderParameter(l,p.COMPILE_STATUS)?l:!1}function b(p,l){fa.la()&&(l.g=l.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
l.wf=a(p,p.VERTEX_SHADER,l.u,l.name+" VERTEX");l.vf=a(p,p.FRAGMENT_SHADER,l.g,l.name+" FRAGMENT");var C=p.createProgram();p.attachShader(C,l.wf);p.attachShader(C,l.vf);p.linkProgram(C);return C}function d(p){p.u="#version 300 es\n"+p.u.replace(/varying/g,"out");p.g="#version 300 es\n"+p.g.replace(/varying/g,"in");p.u=p.u.replace(/texture2D\(/g,"texture(");p.g=p.g.replace(/texture2D\(/g,"texture(");p.da||(p.g=p.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),p.g=p.g.replace(/gl_FragColor/g,
"FragColor"));var l=0,C=[];p.u=p.u.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(K,L,A){var F="";A.split(",").forEach(function(N){N=N.trim();F+="layout(location = "+l+") in "+L+" "+N+";\n";C.push(N);++l});return F});p.ak=C}function e(p){return["float","sampler2D","int"].map(function(l){return"precision "+p+" "+l+";\n"}).join("")}function k(p,l){if(l.hi)return!1;var C=fa.la();V.Xp||C||p.enableVertexAttribArray(0);void 0===l.da&&(l.da=!1);l.da&&(l.cd=C?3:2);l.id=J++;void 0===l.cd&&
(l.cd=2);void 0===l.precision&&(l.precision="highp");l.da&&(l.g=(fa.la()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+l.g);void 0===l.u&&(l.u="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var K=e(l.precision);
l.g=K+l.g;l.u=K+l.u;C&&3<=l.cd&&d(l);l.Ea&&l.Ea.forEach(function(L){l.u=l.u.replace(L.search,L.replace);l.g=l.g.replace(L.search,L.replace)});l.na=b(p,l);l.A={};l.i.forEach(function(L){l.A[L]=p.getUniformLocation(l.na,L)});l.attributes={};l.va=[];l.Wg=0;void 0===l.J&&(l.J=["a0"]);void 0===l.R&&(l.R=[2]);l.J.forEach(function(L,A){var F=C&&3<=l.cd?l.ak.indexOf(L):p.getAttribLocation(l.na,L);l.attributes[L]=F;l.va.push(F);l.Wg+=4*l.R[A]});l.set=function(){h!==l.id&&(-1!==h&&B.I(),h=l.id,B=l,p.useProgram(l.na),
l.va.forEach(function(L){0!==L&&p.enableVertexAttribArray(L)}))};l.I=function(){h=-1;l.va.forEach(function(L){0!==L&&p.disableVertexAttribArray(L)})};l.hi=!0}function m(p,l){k(p,l);l.set();h=-1;return l}function w(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"highp"}}function n(){g.j("s104",[{type:"1i",name:"u1",value:0}]);g.j("s105",[{type:"1i",name:"u153",value:0}]);g.j("s106",[{type:"1i",name:"u74",value:0}])}function q(){var p=
"u41 u143 u144 u145 u146 u42 u78".split(" ").concat(H,u);f.s107={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-u145)*u146;k.x+=A*sign(a0.x)*(1.-u85);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u149,u150,a0.z);}",
i:["u149","u150"].concat(p),J:["a0"],precision:"highp"};f.s108={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u147"].concat(G,p),J:["a0","a1"],R:[3,2],precision:"lowp"};f.s109={name:"_",g:"uniform vec3 u147;void main(){gl_FragColor=vec4(u147,0.);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u147"].concat(p),R:[3],precision:"lowp"};f.s110={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 h=s(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 k=u80/t;vec3 l=a0;float z=max(0.,-a0.z-u145)*u146;l.x+=z*sign(a0.x)*(1.-u85);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u78"].concat(p),J:["a0","a2"],precision:"highp"};f.s111={name:"_",g:"uniform sampler2D u153;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u153,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 h=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 k=u80/v;vec3 l=a0;float B=max(0.,-a0.z-u145)*u146;l.x+=B*sign(a0.x)*(1.-u85);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u78","u153"].concat(p),J:["a3","a0","a2","a1"],R:[4,3,3,2],precision:"highp"};f.s112={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u111","u148"].concat(p),precision:"lowp"};f.s113={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u111","u148"].concat(v,p),J:["a0","a1"],R:[3,2],precision:"lowp"};p=["u136","u124","u137"];f.s114={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=1.;}",i:p,precision:"highp"};f.s115={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a2,0.);gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:p,J:["a0","a2"],precision:"highp"};f.s105={name:"_",g:"uniform sampler2D u153;uniform vec3 u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u154),c=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u137*vec4(a2,0.),a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u153","u154"].concat(p),J:["a0","a2","a1","a3"],precision:"highp"};f.s104={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u136*u124*u137*vec4(a0,1.)+f,vv0=a1;}",i:["u147"].concat(G,p),J:["a0","a1"],
Ea:[{search:"0.0005",replace:Ga.fa()?"0.0005":"0.0"}],precision:"lowp"};f.s116={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;void main(){gl_Position=u136*u124*u137*vec4(a0,1.);}",i:["u111"].concat(p),precision:"highp"};f.s106={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;void main(){gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a1;}",i:["u111"].concat(v,p),J:["a0","a1"],R:[3,2],precision:"highp"}}function r(){for(var p in f)k(c,f[p])}var y=!1,G=["u1","u73"],v=["u74","u75"],H="u76 u77 u78 u79 u80 u81".split(" "),u="u82 u83 u84 u85 u86 u87".split(" "),f={},h=-1,B=null,J=0,g={pa:function(p,l){f[p]=l;y&&k(c,f[p])},lq:function(p,l){f[p]=l;l.hi=!1;k(c,f[p])},Zb:function(){return y},m:function(){f.s0=
w();f.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};f.s74={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",i:["u1"],precision:"lowp"};f.s75={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1","u12",
"u13"],precision:"highp"};f.s76={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:"highp"};f.s12={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u88,vv0*u89),c=texture2D(u1,vv0*u89);float a=smoothstep(u90,0.,vv0.y);a+=smoothstep(1.-u90,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u91*f);}",
i:["u1","u89","u88","u90","u91"]};f.s77={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u89;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u88,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u90,0.,vv0.y);b+=smoothstep(1.-u90,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u91*h));gl_FragColor=k;}",
i:["u1","u89","u88","u90","u91"],precision:"highp"};f.s78={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};f.s79={name:"_",g:"uniform sampler2D u1,u92;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:"lowp"};f.s80={name:"_",g:"uniform sampler2D u1,u92,u41;uniform vec2 u14,u93;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u93.x+pow(c,2.)*(u93.y-u93.x);vec3 j=mix(b/5.,texture2D(u92,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u92","u14","u41","u93"],precision:"lowp"};f.s81={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:"lowp"};f.s82={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:"lowp"};f.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:"highp"};f.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};f.s83={name:"_",g:"uniform sampler2D u94,u95;uniform float u96,u97;varying vec2 vv0;void main(){vec3 a=texture2D(u95,vv0).rgb,b=texture2D(u94,vv0).rgb;gl_FragColor=vec4(b*u97+u96*a,1.);}",
i:["u94","u95","u96","u97"],precision:"highp"};f.s84={name:"_",g:"uniform sampler2D u98,u99;uniform float u91;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u99,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u98,g).rgb,u91*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u98","u99","u91"],precision:"lowp",Ea:[{search:"8888",replace:V.wm[fa.V()]}]};f.s85={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:"lowp"};f.s86={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};f.s87={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",
i:["u1","u14"],precision:"lowp"};f.s89={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};f.s90={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u88,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u88"],precision:"highp"};f.s91={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u88,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u88"],precision:"highp"};f.s92=
{name:"_",g:"uniform sampler2D u1,u100,u2,u101;uniform vec4 u102;uniform vec2 u103;uniform float u104,u105,u106,u107;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u100,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u101,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u103*.5+h).r,l=atan(a.x,a.y),m=-(mod(u104,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u105,b),c=.5+u107*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u102*k;gl_FragColor=mix(d,o,j*u106);}",
i:"u1 u2 u101 u100 u102 u104 u105 u106 u103 u107".split(" "),precision:"lowp"};var p="u108 u109 u110 u111 u98 u112 u3 u113 u100 u114 u115 u116 u117 u118 u14".split(" ");V.ea&&(f.s93={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u119,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u120,u115,u117,u114;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u114;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u108,vv0);vec3 k=texture2D(u100,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u113;vec4 b=texture2D(u111,vv0),m=texture2D(u109,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u110,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u112,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u115-u117,u115+u117,I);h=mix(l(texture2D(u98,H)),u116,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u120*texture2D(u119,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:p.concat(["u119","u120"]),precision:"highp"});f.s94={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u115,u117,u118,u121,u122,u114,u123;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u114;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u108,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u100,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u108,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u113;vec4 c=texture2D(u111,vv0),s=texture2D(u109,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u110,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u121*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u109,v).rgb,R=texture2D(u109,w).rgb,S=texture2D(u109,x).rgb,T=texture2D(u109,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u112,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u115-u117,u115+u117,fa);vec3 ha=r(texture2D(u98,ea));A=mix(ha,u116,ga_*u118);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u121),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u122,q)*m);float ma=mix(la,q,u123);gl_FragColor=vec4(f,ma);}",
i:p.concat(["u123","u121","u122"]),precision:"highp"};V.ea&&(f.s95={name:"_",g:"uniform sampler2D u108,u109;uniform mat4 u124;uniform vec2 u125,u14,u126;uniform float u127,u128,u129,u130,u131,u132,u133,u134,u120;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u126;vec4 pos=texture2D(u108,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u127),s=sin(u127);vec3 no0=texture2D(u109,uvt).rgb;float zv=(u124*vec4(co0,1.)).z;vec3 co;vec2 scale=u125/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u130,u131,1.),ao=dzFactor*clamp(u129*omegaMin*u132,0.,u120);gl_FragColor=vec4(ao,ao,ao,u128);}",
i:"u108 u109 u129 u128 u127 u14 u135 u130 u131 u132 u133 u134 u124 u125 u120".split(" "),Ea:[{search:"8888.8",replace:V.wk[fa.V()].toFixed(1)}],precision:"lowp"},f.s96={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:"lowp"});f.s97={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;void main(){vec4 a=u136*u124*u137*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u136","u124","u137"],precision:"lowp"};f.s98={name:"_",g:"uniform sampler2D u138,u112,u99;uniform mat4 u136,u139;uniform vec2 u140;uniform float u141;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u140*(z-f),0.),B=vec3(u139*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u99,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u136*u,i=h.xyz/h.w;if(texture2D(u138,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u139*vec4(g,0.)),t+=texture2D(u112,y(s));}gl_FragColor=vec4(u141*t.rgb/n,1.);}",
i:"u138 u112 u99 u136 u139 u140 u141".split(" "),Ea:[{search:"8888.8",replace:V.uo[fa.V()].toFixed(1)},{search:"9999.9",replace:V.vo[fa.V()].toFixed(1)}],precision:"lowp"};f.s99={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s100={name:"_",g:"uniform sampler2D u1,u142;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124;varying vec2 vv0;void main(){vec4 a=u136*u124*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u136","u124","u1"],J:["a0","a1"],precision:"lowp"};if(fa.aa()){p="u41 u143 u144 u145 u146 u42 u111 u147 u148 u13 u149 u150 u78".split(" ").concat(H,u);fa.ui()||(f.s101={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",da:!0});f.s102={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],da:!0};f.s103NNGLcolor={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u85*e;vec3 c=u85*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u79,0.,0.),u82,c);float x=mix(texture2D(u41,u).r,0.,u85);a.z+=x;mat3 h=v(a);vec3 y=mix(u143,u83,c);float z=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u81,1.,u85);vec2 k=u80/w;vec3 l=a0;float C=max(0.,-a0.z-u145)*u146;l.x+=C*sign(a0.x)*(1.-u85);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u149,u150,a0.z),vv0=m,vv3=a0.y;}",
i:p,J:["a0","a2"],R:[3,3],da:!0};f.s103NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(G),J:["a0","a2","a1"],R:[3,3,2],da:!0};f.s103NNGLtextureNormalMap={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform sampler2D u1,u153;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(G,["u153"]),J:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};f.s103NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(G,v),J:["a0","a2","a1"],R:[3,3,2],da:!0};f.s103NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(G,["u153"],v),J:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};p="u136 u124 u137 u111 u147 u148 u13".split(" ");f.s103color={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:p,J:["a0","a2"],da:!0};f.s103={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(G),J:["a0","a2","a1"],da:!0};var l=["u153","u154"];f.s103NormalMap={name:"_",g:"uniform sampler2D u1,u153;uniform vec4 u111,u13;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(G,l),J:["a0","a2","a1","a3"],da:!0};f.s103ParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(G,v),J:["a0","a2","a1"],da:!0};f.s103NormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(G,l,v),J:["a0","a2","a1","a3"],da:!0}}else q();r();p=[{type:"1i",name:"u1",value:0}];g.j("s0",p);g.j("s1",p);g.j("s75",[{type:"1i",name:"u12",value:1}].concat(p));g.j("s76",[{type:"1i",name:"u12",
value:1}].concat(p));g.j("s12",[{type:"1i",name:"u88",value:1}].concat(p));g.j("s77",[{type:"1i",name:"u88",value:1}].concat(p));g.j("s78",p);g.j("s79",p);g.j("s80",[{type:"1i",name:"u92",value:1},{type:"1i",name:"u41",value:2}].concat(p));g.j("s81",p);g.j("s82",p);g.j("s13",p);g.j("s83",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u95",value:1}]);g.j("s84",[{type:"1i",name:"u98",value:0},{type:"1i",name:"u99",value:1}]);g.j("s85",p);g.j("s86",p);g.j("s87",p);g.j("s88",p);g.j("s89",p);g.j("s90",
[{type:"1i",name:"u88",value:1}].concat(p));g.j("s91",[{type:"1i",name:"u88",value:1}].concat(p));V.ea&&(g.j("s95",[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},{type:"1f",name:"u130",value:V.jk},{type:"1f",name:"u131",value:V.kk},{type:"1f",name:"u132",value:V.xk},{type:"1f",name:"u133",value:V.nk},{type:"1f",name:"u134",value:V.pk},{type:"1f",name:"u129",value:1},{type:"1f",name:"u120",value:1}]),g.j("s96",p));l=[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},
{type:"1i",name:"u110",value:2},{type:"1i",name:"u98",value:3},{type:"1i",name:"u112",value:4},{type:"1i",name:"u111",value:6},{type:"1i",name:"u100",value:7},{type:"1f",name:"u118",value:0},{type:"1f",name:"u115",value:0},{type:"1f",name:"u117",value:0}];V.ea&&g.j("s93",l.concat([{type:"1f",name:"u120",value:V.mk[fa.V()]},{type:"1i",name:"u119",value:5}]));g.j("s94",l.concat([{type:"1f",name:"u121",value:V.Rc},{type:"1f",name:"u122",value:V.ig},{type:"1f",name:"u123",value:0}]));g.j("s98",[{type:"1i",
name:"u138",value:0},{type:"1i",name:"u112",value:1},{type:"1i",name:"u99",value:2},{type:"1f",name:"u141",value:V.to}]);g.j("s99",p);g.j("s100",p);g.j("s92",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u101",value:2},{type:"1i",name:"u100",value:3},{type:"1f",name:"u106",value:1},{type:"2f",name:"u103",value:[0,0]}].concat(p));fa.aa()?(g.j("s103",p),g.j("s103NormalMap",[{type:"1i",name:"u153",value:1}].concat(p)),g.j("s103ParamsMap",[{type:"1i",name:"u74",value:1}].concat(p)),g.j("s103NormalParamsMap",
[{type:"1i",name:"u153",value:1},{type:"1i",name:"u74",value:2}].concat(p))):n();y=!0},fo:function(){q();r();n()},Ed:function(){return B.id},tf:function(){return H},uf:function(){return u},set:function(p){ub.tj(g);f[p].set()},Ab:function(p){return m(p,w())},he:function(p){return m(p,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},jo:function(p){return m(p,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",da:!0})},I:function(){-1!==h&&B.I()},ke:function(){var p=0;B.va.forEach(function(l,C){C=B.R[C];c.vertexAttribPointer(l,C,c.FLOAT,!1,B.Wg,p);p+=4*C})},fc:function(){g.hc(c)},hc:function(p){p.vertexAttribPointer(B.va[0],2,p.FLOAT,!1,8,0)},qq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,12,0)},Qa:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0)},$a:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0)},mj:function(){c.vertexAttribPointer(B.attributes.a2,
3,c.FLOAT,!1,32,12)},nj:function(){c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},Uc:function(){c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},rq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,20,12)},Vn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},Wn:function(){c.vertexAttribPointer(B.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12)},Xn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},fe:function(){c.vertexAttribPointer(B.attributes.a3,4,c.FLOAT,!1,16,0)},ie:function(p,l){c.uniform1i(B.A[p],l)},H:function(p,l){c.uniform1f(B.A[p],l)},N:function(p,l,C){c.uniform2f(B.A[p],l,C)},je:function(p,l){c.uniform2fv(B.A[p],l)},zg:function(p,l,C,K){c.uniform3f(B.A[p],l,C,K)},Ag:function(p,
l){c.uniform3fv(B.A[p],l)},xa:function(p,l){c.uniform4fv(B.A[p],l)},no:function(p,l){c.uniformMatrix2fv(B.A[p],!1,l)},oo:function(p,l){c.uniformMatrix3fv(B.A[p],!1,l)},Vc:function(p,l){c.uniformMatrix4fv(B.A[p],!1,l)},j:function(p,l){g.set(p);l.forEach(function(C){switch(C.type){case "4f":c.uniform4fv(B.A[C.name],C.value);break;case "3f":c.uniform3fv(B.A[C.name],C.value);break;case "2f":c.uniform2fv(B.A[C.name],C.value);break;case "1f":c.uniform1f(B.A[C.name],C.value);break;case "1i":c.uniform1i(B.A[C.name],
C.value);break;case "mat2":c.uniformMatrix2fv(B.A[C.name],!1,C.value);break;case "mat4":c.uniformMatrix4fv(B.A[C.name],!1,C.value)}})},M:function(){for(var p in f){var l=f[p];c.detachShader(l.na,l.wf);c.detachShader(l.na,l.vf);c.deleteShader(l.wf);c.deleteShader(l.vf);c.deleteProgram(l.na)}},v:function(){c.disableVertexAttribArray(0);g.I();g.M();J=0;y=!1;B=null;h=-1}};return g}(),Wa=function(){var a={},b=[],d=!1,e=0,k=0,m=-1,w=-1,n=-1,q=1,r=null,y=!1,G=null,v=!1,H=!1,u=!1,f=!1,h=!1,B=!1,J=!1,g=!1,
p=null,l=null,C=-1,K=-1,L=null,A=-1,F,N=null,x=null,z=null,P=null,T=null,la=null,ba=null,Q=[{type:"1f",name:"u85",value:0},{type:"1f",name:"u149",value:0},{type:"1f",name:"u150",value:0},{type:"1f",name:"u80",value:1},{type:"1f",name:"u77",value:0},{type:"1f",name:"u87",value:1}],ia={m:function(t,O){a.Cg=t;fa.Sg();Fc.hf();Rb.hf(t.Ce);m=t.lf;w=t.Zo;n=t.$f;q=t.Be;var D=[{type:"1f",name:"u80",value:m},{type:"1f",name:"u77",value:n},{type:"1f",name:"u81",value:t.Mn},{type:"mat4",name:"u76",value:t.qn},
{type:"2f",name:"u42",value:t.Vj}];t.Qg=D;var W=[{type:"3f",name:"u82",value:[0,0,0]},{type:"3f",name:"u83",value:t.$g},{type:"3f",name:"u84",value:t.Zg},{type:"1f",name:"u85",value:0},{type:"1f",name:"u86",value:t.Ce},{type:"1f",name:"u87",value:1}];t.Mj=W;ia.sm(t,O);d||void 0!==t.Da||(t.Da=[0,0,120]);g=J=I.xf;if(!d&&J){O=1*fa.ub();var ja=1*fa.tb(),ma={isLinear:!0,isPot:!1,width:O,height:ja};p=aa.instance(ma);l=aa.instance(ma);C=1/O;K=1/ja}D=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",
value:t.Da},{type:"1f",name:"u145",value:t.jd},{type:"1f",name:"u146",value:t.Kb}].concat(D,W);r=t.Nc;W=[{type:"1f",name:"u149",value:r[0]},{type:"1f",name:"u150",value:r[1]}];fa.aa()?(O=[{type:"1i",name:"u1",value:0}],ja=[{type:"1i",name:"u153",value:2}],E.j("s103NNGLcolor",D.concat(W)),E.j("s103NNGLtexture",[].concat(O,D,W)),E.j("s103NNGLtextureNormalMap",[].concat(O,ja,D,W)),E.j("s103NNGLtextureParamsMap",[{type:"1i",name:"u74",value:2}].concat(O,D,W)),E.j("s103NNGLtextureNormalParamsMap",[{type:"1i",
name:"u74",value:3}].concat(O,ja,D,W))):(E.j("s107",D.concat(W)),E.j("s108",[{type:"1i",name:"u1",value:0}].concat(D)),E.j("s109",D),E.j("s110",D),E.j("s111",D.concat([{type:"1i",name:"u153",value:0}])),E.j("s112",D),E.j("s113",D.concat([{type:"1i",name:"u74",value:0}])));E.j("s80",[{type:"2f",name:"u93",value:t.Jg}]);E.j(V.ea?"s93":"s94",[{type:"1f",name:"u115",value:t.Le},{type:"3f",name:"u116",value:t.og},{type:"1f",name:"u117",value:t.Ye},{type:"1f",name:"u118",value:1},{type:"3f",name:"u113",
value:t.Zj}]);if(F=t.Sd)L=t.Tm,A=t.Td,E.j("s92",[{type:"4f",name:"u102",value:t.Rd},{type:"1f",name:"u105",value:t.Rf},{type:"2f",name:"u103",value:t.Sm},{type:"1f",name:"u107",value:Math.sign(A)}]);b.forEach(function(va){va.ij(t)});d=!0},dc:function(t){H&&ua.ha.dc(t);f&&ua.sa.dc(t)},sm:function(t,O){void 0!==ua.ha&&t.jc&&fa.aa()&&(ua.ha.m(t),v=!0,O.push(function(D){ua.ha.dc(D);H=!u}));void 0!==ua.sa&&t.qd&&(ua.sa.m(t),O.push(function(D){ua.sa.dc(D);f=!0}));void 0!==ua.qc&&t.Oe&&(ua.qc.m(t),B=h=!0);
void 0!==ua.mb&&(ua.mb.m(t),G=ua.mb.um({width:t.Fc,height:2*t.Fc,depth:1.5*t.Fc,yl:-t.Bf,Ua:t.zf,bl:t.Af}),y=!0)},lo:function(t,O,D,W){t&&(ba=t,v&&ua.ha.ec(t),f&&ua.sa.ec(t),h&&ua.qc.ec(t),b.forEach(function(ja){ja.ec(t)}));D&&(P=D);W&&(T=W)},Bb:function(t){fa.aa()?(E.j("s103NNGLcolor",t),E.j("s103NNGLtexture",t),E.j("s103NNGLtextureNormalMap",t),E.j("s103NNGLtextureParamsMap",t),E.j("s103NNGLtextureNormalParamsMap",t)):(E.j("s107",t),E.j("s108",t),E.j("s109",t),E.j("s110",t),E.j("s111",t),E.j("s112",
t),E.j("s113",t))},bb:function(t,O,D){var W=[t[0]+O[0],t[1]+O[1],t[2]+O[2]];W=[W[0]+D[0],W[1]+D[1],W[2]+D[2]];a.ce=W;a.an=O;a.No=D;ia.Bb([{type:"3f",name:"u143",value:W}]);fa.aa()&&(v&&ua.ha.bb(t,O,D),f&&ua.sa.bb(W));y&&ua.mb.bb(t)},cb:function(t,O,D){var W=t*O*D;a.bn=O;a.Oo=D;a.lm=t;ia.Bb([{type:"1f",name:"u144",value:W}]);fa.aa()&&(v&&ua.ha.cb(t*O,D),f&&ua.sa.cb(W));y&&ua.mb.cb(t)},cj:function(){ia.bb(a.ce,a.an,a.No);ia.cb(a.lm,a.bn,a.Oo);ia.rj(a.rx);ia.m(a.Cg);ia.oj(a.Fk,a.Kb)},rj:function(t){a.rx=
t;ia.Bb([{type:"1f",name:"u79",value:t}]);fa.aa()&&(v&&ua.ha.xg(t),f&&ua.sa.xg(t))},oj:function(t,O){a.Fk=t;a.Kb=O;ia.Bb([{type:"1f",name:"u145",value:t},{type:"1f",name:"u146",value:O}])},co:function(t){r=t;0===e&&ia.Bb([{type:"1f",name:"u149",value:r[0]},{type:"1f",name:"u150",value:r[1]}])},ab:function(t){function O(){y&&ua.mb.toggle(!1);F&&E.j("s92",[{type:"1f",name:"u106",value:0}])}0>=t?(k=0,0!==e&&(e=0,Rb.Gn(),y&&ua.mb.toggle(!0),F&&E.j("s92",[{type:"1f",name:"u106",value:1}]))):1<=t?(k=1,
1!==e&&(e=1,Rb.zj(!0)),O()):(k=t,2!==e&&(Rb.zj(!1),e=2,O()));E.j("s94",[{type:"1f",name:"u118",value:1-t}]);Q[0].value=k;Q[1].value=r[0]*(1-t)+-300*t;Q[2].value=r[1]*(1-t)+-300*t;Q[3].value=m*(1-t)+t*w;Q[4].value=n*(1-t);Q[5].value=1-t+t*q;H&&ua.ha.yg(k,Q);f&&ua.sa.yg(k,Q);ia.Bb(Q)},vl:function(t){ba.h(1);t.forEach(function(O){O.ql()});y&&G.U()},Mm:function(){return 1===e},Me:function(t){ba.Ja(t)},dk:function(t){b.push(t)},Hg:function(t){u=!t;H=t&&v},Gg:function(t){B=t&&h},ug:function(t){f&&fa.aa()&&
ua.sa.po(t)},Cb:function(t){fa.aa()&&(v&&ua.ha.Cb(t),f&&ua.sa.Cb(t))},sl:function(t,O){if(!g)return!1;p.L();t.h(0);E.set("s85");E.N("u14",0,K);X.l(!1,!1);l.o();p.h(0);E.N("u14",C,0);X.l(!1,!1);E.set("s86");O.L();l.h(0);X.l(!1,!1);return!0},yj:function(t){g=t&&J},resize:function(t,O,D){J&&(t*=D,O*=D,p.resize(t,O),l.resize(t,O),C=1/t,K=1/O)},sg:function(t,O){var D=t.O(),W=t.Y(),ja={width:D,height:W,isPot:!1};v&&(z&&z.remove(),z=aa.instance(ja));N=za.instance({width:D,height:W});h||f?(ua.qc.tg(D,W),
x&&x.remove(),x=aa.instance(ja)):x=t;v&&ua.ha.tg(D,W);O&&(la&&la.remove(),la=aa.instance(ja))},ol:function(t){var O=null;switch(e){case 0:O=t;break;case 2:N.bind(!1,!0);la.o();E.set("s75");E.H("u13",k);t.h(1);T.h(0);X.l(!0,!0);O=la;break;case 1:O=T}if(!H||1===e||!fa.aa())return O;O.Ja(0);B&&ua.qc.U(O,x);N.bind(!1,!B);f&&(B?O.h(0):(x.o(),E.set("s1"),X.l(!0,!0)),ua.sa.U());x.h(0);P.Ja(2);ua.ha.U();z.o();E.set("s1");B||f?x.h(0):O.h(0);X.l(!0,!V.ea);ua.ha.add();return z},ek:function(t,O){if(!H)return t;
P.Ja(2);ua.ha.U();za.$();E.set("s74");O.L();ua.ha.fm().h(0);X.l(!0,!0);E.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);t.h(0);X.l(!1,!1);c.disable(c.BLEND);return O},tl:function(t,O){if(!F)return!1;E.set("s92");E.H("u104",t*A);L.h(1);Wa.Me(2);x?x.h(3):O.h(3);return!0},v:function(){d=!1;k=e=0;n=w=m=-1;q=1;r=null;y=!1;G=null;B=h=f=u=H=v=!1;ua.ha.v();ua.Ha.v()}};return ia}(),xa=function(){function a(){n.forEach(function(D){D.wl(z)})}function b(){n.forEach(function(D){D.ud(z)})}
function d(){n.forEach(function(D){D.ul(z)})}function e(){n.forEach(function(D){D.vd(z)})}function k(){z?Wa.vl(n):n.forEach(function(D){D.rl()})}function m(){F&&clearTimeout(F);F=setTimeout(function(){l=!1;F=null},16)}function w(D){D()}var n=[],q=[],r={ia:!1,position:!1,wb:!1},y=[],G=[],v=null,H=0,u=null,f=null,h=null,B=null,J=!1,g=!1,p=!1,l=!1,C=!1,K=!1,L=null,A=null,F=null,N=null,x=!1,z=!1,P=!1,T=!1,la=!0,ba=!1,Q=!1,ia=null,t=null,O={m:function(){c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clearDepth(1);
V.$k?(c.enable(c.CULL_FACE),c.frontFace("CCW"===V.al?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);O.sh();var D={isPot:!1,isLinear:!1,width:fa.ub(),height:fa.tb(),G:4,isFloat:!1};u=aa.instance(D);D=Object.assign({},D,{isLinear:!0,width:fa.O(),height:fa.Y()});f=aa.instance(D);h=aa.instance(D);V.Oa&&(D=Object.assign({},D,{isLinear:!1}),B=aa.instance(D));K=Ga.fa();V.Oa||(v=gc.instance({Jb:V.Jb,wc:V.wc,xc:V.xc,vc:V.vc}));J=!0},sh:function(){fa.aa()?r=uc.instance({}):(r.ia=Ib.instance({ic:V.Oa?
!1:"s104",isFloat:!1,Vb:!0,clearColor:[0,0,0,0],G:4}),r.position=Ib.instance({ic:V.Oa?!1:"s114",isFloat:!0,Vb:!0,clearColor:[0,0,0,0],G:4}),r.wb=Ib.instance({ic:!1,isFloat:!0,Vb:!0,clearColor:[0,0,0,0],G:4}),r.Oc=Ib.instance({ic:!1,isFloat:!1,Vb:!0,clearColor:[0,0,0,0],G:4}))},Tl:function(){return v},oa:function(D){v=D},Hq:function(){},Cb:function(D){Wa.Cb(D)},ij:function(D){Wa.m(D,y);fa.aa()||(r.ia.sj(!1),r.position.sj("s107"));z=T=!0},nq:function(){Wa.cj()},hp:function(D){Wa.dk(D)},Rn:function(D,
W,ja){Wa.bb(D,W,ja)},Sn:function(D,W,ja){Wa.cb(D,W,ja)},Pn:function(D,W){Wa.oj(D,W)},Qn:function(D){Wa.co(D)},Tn:function(D){Wa.rj(D)},ab:function(D){Wa.ab(D)},jj:function(D,W,ja,ma){Wa.lo(D,W,ja,ma);W&&O.sg(W,ma?!0:!1);P=!0},Hg:function(D){Wa.Hg(D)},ug:function(D){Wa.ug(D)},Gg:function(D){Wa.Gg(D)},yj:function(D){Wa.yj(D)},ip:function(D){x&&(Q=!0,ia=aa.instance({width:N.O(),height:N.Y(),isPot:!1}),t=D)},sg:function(D,W){N="string"===typeof D?aa.instance({url:D,isFloat:!1}):D;z&&Wa.sg(N,W);x=!0},
ck:function(D){n.push(D);0!==y.length&&(y.forEach(function(W){W(D)}),y.splice(0,y.length))},Bn:function(D){D=n.indexOf(D);-1!==D&&n.splice(D,1)},jp:function(D){q.push(D)},kq:function(D){D=q.indexOf(D);-1!==D&&q.splice(D,1)},pe:function(D){z&&(g=D)},animate:function(D){!V.Oa||z&&P?g&&(l||H>V.cn&&C?(L&&clearTimeout(L),++H,window.cancelAnimationFrame(O.animate),L=setTimeout(function(){window.requestAnimationFrame(O.animate)},16)):(O.Yi(D),++H,z||g&&window.requestAnimationFrame(O.animate))):setTimeout(O.animate,
100)},lp:function(D){G.push(D)},Yi:function(D){if((!V.Oa||z&&P)&&J){G.forEach(w);fa.aa()?r.set()||fa.la()?(z||zc.Dn(),k(),r.I(),K&&c.depthMask(!1)):(fa.Do(),O.sh(),Ib.gd(),E.fo(),V.Oa&&Wa.cj(),c.flush(),window.requestAnimationFrame(O.animate)):(z&&Wa.Me(1),r.ia.set(!0,!0,!0),b(),r.ia.I(),K&&c.depthMask(!1),r.Oc.set(!1,!K,!1),d(),r.Oc.I(),r.position.set(!0,!K,!1),sb.U(),a(),r.position.I(),r.wb.set(!1,!K,!1),e(),r.wb.I());c.disable(c.DEPTH_TEST);K||c.depthMask(!1);V.ea&&Ab.U();var W=O.Oh();if(null!==
W){W.h(7);E.set(V.ea?"s93":"s94");E.N("u14",1/fa.ub(),1/fa.tb());Ib.Gk();u.L();ba?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),E.H("u123",1)):c.disable(c.BLEND);z||sb.gf();r.position.h(0);r.wb.h(1);r.ia.h(2);v.kd(3);r.Oc.h(6);v.ld(4);v.wh();V.ea&&Ab.h(5);X.l(!0,!0);ba&&E.H("u123",0);za.$();if(ba){c.disable(c.BLEND);var ja=Wa.ek(u,f);E.set("s82");h.L();ja.h(0);X.l(!1,!1);f.o();h.h(0);X.l(!1,!1);f.h(0)}else Wa.sl(u,f)||(E.set("s1"),f.L(),
u.h(0),X.l(!1,!1)),la?(E.set("s81"),h.L(),f.h(0),X.l(!1,!1),f.o(),h.h(0),T&&z?(E.set("s80"),B.h(1),Wa.Me(2),X.l(!1,!1),E.set("s1"),B.L(),f.h(0),X.l(!1,!1)):(E.set("s79"),X.l(!1,!1),f.h(0))):f.h(0);za.ba();c.viewport(0,0,fa.O(),fa.Y());!ba&&z&&Wa.tl(D,W)||E.set("s1");X.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Oh:function(){if(!x||ba)return aa.$h();if(!z)return N;if(Q&&!Wa.Mm()){E.set(t);za.$();ia.Wc();ia.o();N.h(0);var D=ia;X.l(!0,!0)}else D=N;return Wa.ol(D)},Dq:function(){V.fl||
g||(g=!0,O.animate(Date.now()),p||vc.yo(),p||Rb.gb(!1),A&&clearTimeout(A),V.ea&&Ab.ge(),A=setTimeout(O.ta,V.Ck),p||fa.om(),p=!0)},Eq:function(){g&&(C=g=!1,cancelAnimationFrame(O.animate))},ta:function(){C||!p||l||V.uh||(C=l=!0,A&&clearTimeout(A),F&&clearTimeout(F),sb.pf().$i(),A=setTimeout(function(){fa.Ug(V.gn);V.ea&&Ab.Nj();H=0;m()},24))},wake:function(){C&&p&&!l&&(l=!0,C=!1,H=0,sb.pf().$i(),A&&clearTimeout(A),F&&clearTimeout(F),A=setTimeout(function(){fa.Ug(1);V.ea&&Ab.ge();m()},16))},Up:function(){},
Ap:function(){},oe:function(D){T=D},Gq:function(D){la=D},Aj:function(D){ba=D},Lq:function(){E.j("s94",[{type:"1f",name:"u121",value:V.Rc},{type:"1f",name:"u122",value:V.ig}])},resize:function(D,W,ja){u.resize(D*ja,W*ja);f.resize(D,W);h.resize(D,W);V.Oa&&B.resize(D,W);Wa.resize(D,W,ja);D=[{type:"2f",name:"u14",value:[1/D,1/W]}];E.j("s81",D);E.j("s79",D);E.j("s82",D)},M:function(){L&&clearTimeout(L);A&&clearTimeout(A);F&&clearTimeout(F);n.concat(q).forEach(function(D){D.M()});n.splice(0,n.length);q.splice(0,
q.length);r.ia.remove();r.wb.remove();r.Oc.remove();r.position.remove();u.remove();f.remove();h.remove();B&&B.remove();l=!0},v:function(){O.M();K=C=l=p=g=z=P=l=!1}};return O}(),ua={},fa=function(){function a(){Ib.resize(d*q,e*q);u.aa()&&uc.resize(d*q,e*q);xa.resize(d,e,q);V.ea&&Ab.resize(d*q,e*q,q);u.Sg()}var b=null,d=0,e=0,k=-1,m=!1,w={re:!1,Kg:!1,Kj:!1,Dg:!1,drawBuffers:!1,Fm:!1,ri:!1,Hm:!1,Kc:!1,Ya:!1},n=Object.assign({},w),q=1,r=!1,y=!1,G=!1,v=!1,H=!1,u={m:function(f){void 0!==f.onload&&f.onload&&
(y=f.onload);void 0===f.expand&&(f.expand=!1);void 0===f.Md&&(f.Md=!1);void 0===f.qa&&(f.qa=!1);void 0===f.Qb&&(f.Qb=!1);void 0===f.alpha&&(f.alpha=!1);void 0===f.preserveDrawingBuffer&&(f.preserveDrawingBuffer=!1);f.Md&&(m=!0);b=f.qa?f.qa:document.getElementById(f.Uk);f.expand&&u.expand();try{window.ep=f.Qb?f.Qb.Fl():b.getContext("webgl",{antialias:!1,alpha:f.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:f.preserveDrawingBuffer});v=f.Qb?f.Qb.la():!1;G=!v;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&
u.rd("too few texture image units");if(!Ga.m())return u.rd("invalid config");V.Ko&&(n.Kg=c.getExtension("EXT_texture_filter_anisotropic"),n.Kg&&(n.ri=!0));V.Lo&&(n.re=c.getExtension("WEBGL_compressed_texture_s3tc"),n.re&&void 0!==n.re.COMPRESSED_RGBA_S3TC_DXT5_EXT&&n.re.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(n.Fm=!0));G&&(n.Kj=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),n.Kj&&(n.Hm=!0));!v&&V.Mo&&(n.Dg=c.getExtension("EXT_sRGB"),
n.Dg&&(n.Kc=!0));G?(n.drawBuffers=c.getExtension("WEBGL_draw_buffers"),n.drawBuffers&&!V.th&&(n.Ya=!0)):n.Ya=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(n.Ya){var h=u.hl();n.Ya=n.Ya&&h}}catch(B){return u.rd(B)}if(null===c||!c)return u.rd("NO_GL");f.expand&&window.addEventListener("resize",u.expand,!1);b.addEventListener("contextmenu",function(B){B.preventDefault();return!1},!1);d=b.width;e=b.height;u.Ff();return!0},Ff:function(){k=m?3:2;Ga.fa()||(k=Math.min(k,1));Ga.Qk()||(k=Math.min(k,0));Fc.m();Ib.m();
for(var f in ua)ua[f].Sc();E.m();sb.m();Rb.m();xa.m();vc.m();V.ea&&Ab.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();u.Sg();u.jl();r=!0;y&&y();return!0},jl:function(){if(n.Ya){var f=uc.instance({width:256,height:1});f.bind();c.viewport(0,0,256,1);E.set("s102");E.xa("color",[1,0,0,1]);X.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);za.ba();E.set("s1");f.wb.h(0);X.l(!1,!1);f=new Uint8Array(1024);c.readPixels(0,0,256,1,c.RGBA,c.UNSIGNED_BYTE,f);H=1>=f[1020]}},hl:function(){var f=
uc.instance({width:1,height:1});if(!f.set())return f.remove(),!1;E.jo(c);X.Ob(c);c.bindFramebuffer(c.FRAMEBUFFER,null);E.Ab(c);f.ia.Ja(0);X.Ob(c);var h=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h);f.remove();return 3<Math.abs(h[0]-127)?!1:!0},la:function(){return v},O:function(){return d},Y:function(){return e},ub:function(){return q*u.O()},tb:function(){return q*u.Y()},Gl:function(){return d/e},V:function(){return k},Km:function(){return 3===k},ui:function(){return H},aa:function(){return n.Ya},
Do:function(){n.Ya=!1},bq:function(){return!1},Sk:function(){return 0<u.V()},rp:function(){return u.aa()&&0<u.V()},mf:function(f){var h=c,B="";v||(h=n.drawBuffers,B="_WEBGL");return[h["COLOR_ATTACHMENT0"+B],h["COLOR_ATTACHMENT1"+B],h["COLOR_ATTACHMENT2"+B],h["COLOR_ATTACHMENT3"+B]].splice(0,f)},Dd:function(f){return u.mf(4)[f]},im:function(){return v?c.SRGB?c.SRGB:c.RGBA:n.Kc?n.Dg.SRGB_ALPHA_EXT:c.RGBA},Im:function(){return n.ri},Ll:function(){return n.Kg},Wm:function(f){u.la()?c.drawBuffers(u.mf(f)):
n.drawBuffers.drawBuffersWEBGL(u.mf(f))},expand:function(){xa.wake();u.resize(window.innerWidth,window.innerHeight);xa.ta()},resize:function(f,h){!b||f===d&&h===e||(d=f,e=h,b.width=d,b.height=e,r&&(sb.resize(),a()))},Sg:function(){var f=[{type:"2f",name:"u14",value:[1/fa.ub(),1/fa.tb()]}];E.j("s81",f);E.j("s79",f)},Ug:function(f){q=f;a()},Ia:function(f,h){b.addEventListener(f,h,!1)},rd:function(){k=-1;return!1},nh:function(){return 0<=k},fq:function(){},oq:function(){},Bq:function(){var f=document.getElementById("loading");
f&&(f.style.display="block")},om:function(){var f=document.getElementById("loading");f&&(f.style.display="none")},M:function(){u.nh()&&(aa.Lj(),xa.M(),X.M(),Ib.M(),V.ea&&Ab.M(),gc.M(),vc.M(),E.M(),aa.M(),c.flush(),c=null)},v:function(){xa.v();Wa.v();E.v();Object.assign(n,w);r=!1}};return u}(),sb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(e){void 0===e.aj&&(e.aj=!0);void 0===e.Fe&&(e.Fe=.1);void 0===e.Ee&&(e.Ee=100);void 0===e.direction&&(e.direction=[0,0,-1]);void 0===e.Pb&&
(e.Pb=45);var k=new $b,m=new Va(50,-50,-400),w=null;k.setPosition(m);var n=new Int8Array(20),q=new Int8Array(20),r=0,y=0,G=0,v=0,H={U:function(){q[E.Ed()]||(E.Vc("u124",k.elements),q[E.Ed()]=1);n[E.Ed()]||(E.Vc("u136",w),n[E.Ed()]=1)},ff:function(){y||(E.Vc("u124",k.elements),y=1);r||(E.N("u125",w[0],w[5]),r=1)},gf:function(){G||(E.zg("u113",m.x,m.y,m.z),G=1)},Lb:function(){v||(E.zg("u154",m.x,m.y,m.z),v=1)},ph:function(){var u=e.Fe,f=e.Ee,h=Math.tan(.5*e.Pb*Math.PI/180);w=[.5/h,0,0,0,0,.5*fa.Gl()/
h,0,0,0,0,-(f+u)/(f-u),-1,0,0,-2*f*u/(f-u),0];for(u=0;20>u;++u)n[u]=0;r=0},eo:function(u,f){m.gj(f[0]).hj(f[1]).z=f[2];k.elements.set(u);for(u=0;20>u;++u)q[u]=0;v=G=y=0},$i:function(){for(var u=v=G=0;20>u;++u)q[u]=0}};H.ph();a=H;b=!0;e.aj&&d.push(H);return H},U:function(){b&&a.U()},ff:function(){b&&a.ff()},gf:function(){b&&a.gf()},Lb:function(){b&&a.Lb()},resize:function(){d.forEach(function(e){e.ph()})},pf:function(){return a}}}(),Ib=function(){var a=[],b=null;return{m:function(){b=za.instance({width:fa.ub(),
height:fa.tb(),Gc:!fa.aa()})},instance:function(d){void 0===d.width&&(d.width=fa.ub());void 0===d.height&&(d.height=fa.tb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Vb&&(d.Vb=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.G&&(d.G=4);var e=aa.instance({isFloat:d.isFloat&&Ga.fa(),S:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,G:d.G}),k=void 0!==d.ic&&d.ic?!0:!1,m=d.ic,w={set:function(n,q,r){r&&b.bind(!1,r);e.o();n&&(c.clearColor(d.clearColor[0],d.clearColor[1],
d.clearColor[2],d.clearColor[3]),b.Te());q&&b.oh();k&&E.set(m)},sj:function(n){k=(m=n)?!0:!1},I:function(){e.te()},h:function(n){e.h(n)},resize:function(n,q){e.resize(n,q)},debug:function(){e.debug()},remove:function(){e.remove()}};d.Vb&&a.push(w);return w},resize:function(d,e){b.resize(d,e);a.forEach(function(k){k.resize(d,e)})},Gk:function(){b.hh()},gd:function(){b.gd()},Wc:function(){b.Wc()},up:function(){b.oh()},tp:function(){b.Te()},sp:function(){b.clear()},M:function(){b.remove()}}}(),uc=function(){var a=
[];return{instance:function(b){void 0===b.width&&(b.width=fa.ub());void 0===b.height&&(b.height=fa.tb());var d=c.createFramebuffer(),e=b.width,k=b.height,m=!0;b={isFloat:Ga.fa(),S:!0,width:e,height:k,isPot:!1,isLinear:!1,G:4};var w=aa.instance(b),n=aa.instance(b),q=aa.instance(b),r=aa.instance(b),y=za.Ml(),G=za.Th();c.bindFramebuffer(y,d);var v=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,v);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,k);c.framebufferRenderbuffer(y,c.DEPTH_ATTACHMENT,
c.RENDERBUFFER,v);c.clearDepth(1);c.framebufferTexture2D(y,fa.Dd(0),c.TEXTURE_2D,w.get(),0);c.framebufferTexture2D(y,fa.Dd(1),c.TEXTURE_2D,n.get(),0);c.framebufferTexture2D(y,fa.Dd(2),c.TEXTURE_2D,r.get(),0);c.framebufferTexture2D(y,fa.Dd(3),c.TEXTURE_2D,q.get(),0);fa.Wm(4);c.bindFramebuffer(y,null);za.reset();var H={position:w,wb:n,Oc:q,ia:r,bind:function(){c.bindFramebuffer(y,d);za.reset()},set:function(){m&&c.checkFramebufferStatus(G);c.bindFramebuffer(y,d);za.reset();if(m){if(c.checkFramebufferStatus(G)!==
c.FRAMEBUFFER_COMPLETE)return!1;m=!1}c.viewport(0,0,e,k);c.clearColor(0,0,0,0);E.Zb()&&!fa.ui()&&(E.set("s101"),X.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},I:function(){},resize:function(u,f){e=u;k=f;w.resize(u,f);n.resize(u,f);r.resize(u,f);q.resize(u,f);c.bindRenderbuffer(c.RENDERBUFFER,v);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,k);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){w.remove();n.remove();r.remove();q.remove();c.deleteRenderbuffer(v);
c.deleteFramebuffer(d);var u=a.indexOf(H);-1!==u&&a.splice(u,1)}};a.push(H);return H},resize:function(b,d){a.forEach(function(e){e.resize(b,d)})}}}(),gc=function(){var a=[],b=V.gh;return{instance:function(d){function e(){q?k():(h=yd.instance({ga_:G,Em:b}),n=V.Dk[fa.V()],v=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!0,isLinear:!1,Tb:!0,width:n,height:n/2,G:3}),H=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!0,isLinear:!1,Tb:!0,width:n,height:n/2,G:3}),u=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!0,width:1,height:n/
2,G:3}),f=aa.instance({isFloat:Ga.fa()&&!b,S:!b,isPot:!1,isLinear:!0,Tb:!0,isMipmap:!1,width:n,height:n/2,G:b?4:3}),q=!0,k(),J.forEach(function(g){g()}),J.splice(0,J.length))}function k(){if(q){za.$();h.Yn(G);h.zn();v.L();E.set("s84");G.h(0);E.H("u91",V.Rc);aa.Lk(1);X.l(!0,!0);for(var g=V.vm[fa.V()],p=0;p<g;++p)H.o(),E.set("s87"),E.N("u14",1/n,0),v.h(0),X.l(!1,!1),v.o(),E.N("u14",0,2/n),H.h(0),X.l(!1,!1);u.L();E.set("s89");v.h(0);X.l(!1,!1);E.set(b?"s91":"s90");f.L();v.h(0);u.h(1);X.l(!1,!1);aa.ba(0);
aa.ba(1)}}var m=Object.assign({Jb:null,wc:null,vc:0,xc:0},d),w=0,n=0,q=!1,r=null,y=null,G=null,v=null,H=null,u=null,f=null,h=null,B=0,J=[];d={m:function(){function g(){2===++p&&(G=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,Tb:!0,width:w,height:w/2,G:3}),za.$(),G.L(),E.set("s83"),E.H("u96",m.xc),E.H("u97",m.vc),r.h(0),y.h(1),X.l(!0,!0),e())}var p=0;w=V.Ek[fa.V()];B=Math.log2(w)-1;m.Jb&&(r=aa.instance({isPot:!1,url:m.Jb,B:g,G:3,isFlipY:!1}),y=aa.instance({isPot:!1,url:m.wc,B:g,
G:3,isFlipY:!1}))},pj:function(g){G=g;e()},kd:function(g){q&&(h.h(g),E.H("u114",h.O()))},ld:function(g){q&&f.h(g)},wh:function(){E.H("u3",B)},Ph:function(){return B},O:function(){return w},nd:function(g){q?g():J.push(g)},M:function(){r&&r.remove();y&&y.remove();v.remove();u.remove();H.remove();h.remove();f.remove();G.remove()}};a.push(d);d.m();return d},M:function(){a.forEach(function(d){d.M()})}}}(),ed={instance:function(a){var b=a.Qm,d=a.Om,e=0,k=b.O();a=V.gh;var m=aa.instance({isFloat:Ga.fa()&&
!a,S:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:k,G:a?4:3,isFlipY:!1}),w=aa.instance({isFloat:Ga.fa()&&!a,S:!a,isPot:!1,isLinear:!0,Tb:!0,isMipmap:!1,width:k,height:k/2,G:a?4:3}),n=za.instance({width:k,height:k}),q=a?"s76":"s75";return{ko:function(r){e=r;E.set(q);c.viewport(0,0,k,k);n.o();m.o();E.H("u13",e);b.kd(1);d.kd(0);X.l(!0,!0);c.viewport(0,0,k,k/2);w.o();b.ld(1);d.ld(0);X.l(!1,!1);c.flush()},kd:function(r){m.h(r)},ld:function(r){w.h(r)},wh:function(){E.H("u3",b.Ph()*(1-e)+d.Ph()*e)}}}},Rb=function(){function a(N){var x=
(l-V.Re)/(V.kh-V.Re);x=1-Math.pow(1-x,V.bp);l+=N*(1+x*V.cp);l=Math.min(Math.max(l,V.Re),V.kh);F.gb()}function b(N){-1!==n&&(B=h=0,w(),a(V.ap*N.deltaY/window.innerHeight),N.preventDefault())}function d(){g+=h;p+=B;p=Math.min(Math.max(p,V.ln),V.kn);F.gb()}function e(N){if(0===n||-1===n)return!1;var x=void 0!==N.touches&&N.touches.length;N.preventDefault();if(2===n){var z=Vc(N.touches[0].pageX,N.touches[0].pageY,N.touches[1].pageX,N.touches[1].pageY);a(-(u-z)*V.mn);u=z}else z=x?N.touches[0].clientX:
N.clientX,N=x?N.touches[0].clientY:N.clientY,h=2*(z-v)*Math.PI/fa.O(),B=2*(N-H)*Math.PI/fa.Y(),4===n?(A[0]+=h*V.Ni,A[1]-=B*V.Ni,A[0]=Math.min(Math.max(A[0],-V.Qi),V.Qi),A[1]=Math.min(Math.max(A[1],-V.Ri),V.Ri),F.gb()):d(),v=z,H=N}function k(){0!==n&&-1!==n&&(0===h&&0===B||1!==n||!K?xa.ta():(w(),f=Date.now(),C=setInterval(F.Nm,J)),n=0)}function m(N){if(2!==n&&-1!==n){B=h=0;w();xa.wake();var x=void 0!==N.changedTouches&&N.touches.length;N.preventDefault();x&&2===N.touches.length?(n=2,u=Vc(N.touches[0].pageX,
N.touches[0].pageY,N.touches[1].pageX,N.touches[1].pageY)):(n=x||2!==N.button?1:4,v=x?N.touches[0].clientX:N.clientX,H=x?N.touches[0].clientY:N.clientY);return!1}}function w(){C&&(clearInterval(C),C=!1)}var n=0,q=!1,r=!1,y=!1,G=1,v=0,H=0,u=0,f=0,h=0,B=0,J=16,g=V.Fj,p=V.Pi,l=V.Qe,C=!1,K=0,L=new Float32Array([0,0,0,0,0]),A=[V.Ok,V.Pk],F={m:function(){K=V.gk[fa.V()];J=V.wd[fa.V()];fa.Ia("mousedown",m);fa.Ia("mouseup",k);fa.Ia("mouseout",k);fa.Ia("mousemove",e);fa.Ia("mousemove",e);fa.Ia("wheel",b);fa.Ia("touchstart",
m);fa.Ia("touchend",k);fa.Ia("touchmove",e)},gb:function(N){q?(r[0]=-p,r[1]=g,y[1].value=G/V.Qe*l,Wa.Bb(y)):(L[0]=g,L[1]=p,L[2]=l,L[3]=A[0],L[4]=A[1],vc.Nn(L,N))},Nm:function(){if(1E-4>h&&1E-4>B||-1===n)w(),B=h=0,0===n&&xa.ta();var N=Date.now(),x=N-f;f=N;N=Math.pow(K,x/J);h*=N;B*=N;d()},hf:function(N){q||(q=!0,n=-1,r=[0,0,0],y=[{name:"u82",type:"3f",value:r},{name:"u86",type:"1f",value:1}],G=N)},zj:function(N){-1===n&&N&&(n=0);N||(n=-1)},Gn:function(){B=h=0;g=V.Fj;p=V.Pi;l=V.Qe;F.gb()},tq:function(N){l=
N},uq:function(N){A[0]=N[0];A[1]=N[1];V.lh=N[2]},sq:function(N,x){g=N;p=x}};return F}(),zc=function(){var a={s103:!1,s103color:!1,s103NormalMap:!1,s103ParamsMap:!1,s103NormalParamsMap:!1};return{instance:function(b){function d(t){if(ia){t.tweaker&&window.JEELIZVTO&&"undefined"!==typeof S&&S.fh(t.tweaker);F=t.partsNames||[];A.splice(0);A.push({n:0,offset:0});C.min.set(Infinity,Infinity,Infinity);C.max.set(-Infinity,-Infinity,-Infinity);var O=t.uvs;O&&(O=O.filter(function(ca){return ca}));ba=O&&0<O.length&&
0<O[0].length?!0:!1;"undefined"!==typeof xb&&"string"===typeof t.faces&&(t.faces=xb(t.faces));"undefined"!==typeof Mb&&("string"===typeof t.vertices&&(t.vertices=Mb(t.vertices)),O&&O.length&&O.forEach(function(ca,Ca){"string"===typeof ca&&(O[Ca]=Mb(ca))}));var D=t.metadata.faces,W=1+(ba?1:0);D=(t.faces.length-D)/(t.metadata.faces*W);6!==D&&8!==D||ba||(++W,D/=2);if(4===D){D=6*W+2;for(var ja=4*W+1,ma=Array(t.metadata.faces*D),va=0;va<t.metadata.faces;++va)for(var Da=0;Da<W;++Da)ma[va*D+4*Da]=t.faces[va*
ja+5*Da],ma[va*D+4*Da+1]=t.faces[va*ja+5*Da+1],ma[va*D+4*Da+2]=t.faces[va*ja+5*Da+2],0===Da&&(ma[va*D+3]=t.faces[va*ja+4]),ma[va*D+4*Da+3*W+1]=t.faces[va*ja+5*Da],ma[va*D+4*Da+3*W+2]=t.faces[va*ja+5*Da+2],ma[va*D+4*Da+3*W+3]=t.faces[va*ja+5*Da+3],0===Da&&(ma[va*D+3*W+4]=t.faces[va*ja+4]);t.faces=ma;t.metadata.faces*=2}H=Array(t.metadata.vertices);for(D=0;D<t.metadata.vertices;++D)H[D]=new Va(t.vertices[3*D],t.vertices[3*D+1],t.vertices[3*D+2]),jd(C,H[D]);u=Array(t.metadata.faces);W=3*W+1;for(D=0;D<
t.metadata.faces;++D)u[D]=new Bc(t.faces[W*D],t.faces[W*D+1],t.faces[W*D+2]),u[D].ac=t.faces[W*D+3];x=3<H.length;ia&&(ia.visible=x);md(H,u);f=nd(H,u);if(ba){W=Array(H.length);D=["a","b","c"];for(ja=0;ja<t.metadata.faces;++ja)for(ma=0;3>ma;++ma)if(va=t.faces[7*ja+ma],Da=t.faces[7*ja+1+ma+3],"undefined"===typeof W[va])W[va]=[[va,Da]];else if(W[va][0][1]!==Da){for(var ka=-1,na=1;na<W[va].length;++na)if(W[va][na][1]===Da){ka=W[va][na][0];break}na=-1;-1===ka?(na=H.length,H.push(H[va].clone()),f.push(f[va].clone()),
W[va].push([na,Da]),W[na]=[[na,Da]]):na=ka;t.faces[7*ja+ma]=na;u[ja][D[ma]]=na}h=Array(H.length);for(t=0;t<H.length;++t)D="undefined"===typeof W[t]?t:W[t][0][1],h[t]=new Yb(O[0][2*D],O[0][2*D+1])}var Fa=tc(C);b.Hb&&(H.forEach(function(ca){ca.x-=Fa.x;ca.z-=Fa.z;ca.y-=C.min.y}),C.min.x-=Fa.x,C.max.x-=Fa.x,C.min.z-=Fa.z,C.max.z-=Fa.z,C.max.y-=C.min.y,C.min.y=0);if(b.Ib){var Y=V.Bk/Math.max(C.max.x-C.min.x,C.max.y-C.min.y,C.max.z-C.min.z);H.forEach(function(ca){ca.Ca(Y)});C.min.Ca(Y);C.max.Ca(Y)}t=ba?
8:6;W=new Float32Array(H.length*t);for(D=0;D<H.length;++D)W[t*D]=H[D].x,W[t*D+1]=H[D].y,W[t*D+2]=H[D].z,W[t*D+3]=f[D].x,W[t*D+4]=f[D].y,W[t*D+5]=f[D].z,ba&&(W[t*D+6]=h[D].x,W[t*D+7]=h[D].y);u.sort(function(ca,Ca){return ca.ac-Ca.ac});var oa=new (65536>3*u.length?Uint16Array:Uint32Array)(3*u.length),da=0;u.forEach(function(ca,Ca){ca.ac===da?A[da].n+=3:(A.push({n:3,offset:3*Ca}),++da);oa[3*Ca]=ca.a;oa[3*Ca+1]=ca.b;oa[3*Ca+2]=ca.c});B&&B.remove();B=X.instance({ja:W,indices:oa});p=g=!1;la&&ia.qh();z=
!0;ia.ef();b.B&&(b.B(ia),b.B=null)}}function e(t){B.Ka(t.n,t.offset)}function k(t,O){T[O]&&(E.set(T[O].cm()),B.bind(!1),ba?(E.Qa(),E.mj()):(E.$a(),E.nj()),T[O].Lc()&&(E.Uc(),g.yc(!1),E.fe(),sb.Lb()),T[O].ml(),T[O].vd(),B.Ka(t.n,t.offset))}function m(t,O){T[O]&&(E.set(T[O].dm()),B.bind(!1),ba?(E.Qa(),E.mj()):(E.$a(),E.nj()),T[O].Lc()&&(E.Uc(),g.yc(!1),E.fe(),sb.Lb()),ia.Cc(),T[O].vd(),B.Ka(t.n,t.offset))}function w(t,O){Q&&T[O]&&(T[O].nl(),B.Ka(t.n,t.offset))}function n(t,O){Q&&T[O]&&(T[O].pl(ba),
B.Ka(t.n,t.offset))}function q(t,O){T[O]&&(E.set(T[O].Zl()),T[O].Bh(),B.Ka(t.n,t.offset))}function r(t,O){T[O]&&(E.set(T[O].$l()),ia.Cc(),T[O].Bh(),B.Ka(t.n,t.offset))}function y(t,O){T[O]&&(E.set(T[O].am()),T[O].Lc()&&(g.yc(!1),E.fe(),sb.Lb()),B.bind(!1),T[O].yh(ba),B.Ka(t.n,t.offset))}function G(t,O){if(T[O]){var D=T[O].bm();E.set(D);T[O].Lc()&&(g.yc(!1),E.fe(),sb.Lb(),B.bind(!1));a[D]||(ia.Cc(),B.bind(!1),a[D]=!0);T[O].yh(ba);B.Ka(t.n,t.offset)}}function v(t,O){return new Promise(function(D,W){t?
(t.B=function(ja){T[O]&&T[O].M();T[O]=ja;la=la||ja.Lc();D()},Fc.instance(t)):W()})}if(!fa.nh())return!1;void 0===b.Hb&&(b.Hb=!1);void 0===b.Ib&&(b.Ib=!1);void 0===b.Pe&&(b.Pe=!1);var H=null,u=null,f=null,h=null,B=null,J=null,g=null,p=!1,l=new $b,C=new Ac,K=[],L=null,A=[{n:0,offset:0}],F=[],N=[],x=!1,z=!1,P=[],T=[],la=!1,ba=!1,Q=!1,ia={visible:x,Zk:function(){return A.length},Wl:function(){return F},qh:function(){!p&&ba&&(u=u.filter(function(t){return null!==t}),J=od(H,f,h,u),g=X.instance({ja:J,indices:!1}),
h=f=u=H=J=null,p=!0)},Cc:function(){sb.U();ia.Ah()},Ah:function(){E.Vc("u137",l.elements)},Bp:function(){x&&(ia.Ah(),B.bind(!1),ba?E.Qa():E.$a(),B.U())},wl:function(t){x&&(t||ia.Cc(),B.bind(!1),ba?E.Qa():E.$a(),B.U())},xl:function(){x&&(B.bind(!1),ba?E.Qa():E.$a(),A.forEach(w))},xh:function(){x&&(B.bind(!1),ba?E.Qa():E.$a(),N.forEach(e))},ul:function(t){Q&&x&&(B.bind(!1),ba?E.Qa():E.$a(),t?A.forEach(q):A.forEach(r))},ud:function(t){x&&(t||ia.Cc(),B.bind(!1),t||(E.Qa(),E.Uc()),Q&&A.forEach(n))},vd:function(t){Q&&
x&&(t?A.forEach(k):A.forEach(m))},rl:function(){Q&&x&&A.forEach(G)},ql:function(){Q&&x&&A.forEach(y)},Yh:function(){return L},Wh:function(){return P},Jo:function(t,O){T[t].update(O);ia.Pj()},vg:function(t,O){P=t;Q=!1;T=Array(t.length);la=!1;t=t.map(function(D,W){return"string"===typeof D?ld(-1===D.indexOf(".json")?D+".json":D).then(function(ja){ja.name=D;return v(ja,W,D)}):v(D,W,!1)});Promise.all(t).then(function(){Q=!0;ia.nd(function(){la&&ia.qh();ia.Pj();xa.Cb(ia);xa.pe(!0);O&&O(ia)},4);ia.ef()})},
Pj:function(){N.splice(0);A.forEach(function(t,O){T[O]&&T[O].Lm()&&N.push(t)})},nd:function(t,O){z&&Q?t(ia):K.push({rb:t,order:O?O:0})},ef:function(){z&&Q&&(K.sort(function(t,O){return 0>t.order-O.order?1:-1}),K.forEach(function(t){t.rb(ia)}),K.splice(0))},remove:function(){ia.M();ia=null},M:function(){x=z=!1;B&&B.remove();T.forEach(function(t){t.M()});p&&g.remove()},gm:function(){return C.size().x},hm:function(){return C.size().y},Sp:function(){return C.size().z},Il:function(){return tc(C).x},Jl:function(){return tc(C).y},
Gp:function(){return tc(C).z},Op:function(){return C.min.y},replace:function(t,O,D){if(t===L)return O&&ia&&(ia.ef(),O(ia)),!1;L=t;xa.pe(!1);Cc(t,function(W){d(W);O&&O(ia)},D);return!0}};b.Pc&&ia.vg(b.Pc,b.Pe);L=b.url;Cc(b.url,d);return ia},Dn:function(){a.s103=!1;a.s103color=!1;a.s103NormalMap=!1;a.s103ParamsMap=!1;a.s103NormalParamsMap=!1}}}(),vc=function(){var a=null,b=!1,d=!1,e=null,k=new Float32Array(16),m=new Float32Array(3),w={data:0},n={m:function(){a=V.Mb?new Worker("js/worker.php"):{postMessage:function(q){w.data=
q;Gc.en(w)},terminate:function(){}};a.onmessage=function(q){switch(q.data[0]){case 3:for(var r=0;16>r;++r)k[r]=q.data[r+1];for(r=0;3>r;++r)m[r]=q.data[r+17];sb.pf().eo(k,m);break;case 6:n.Zn(),b=!0,Rb.gb(!1),V.ea&&(Ab.enable(),Ab.ge())}};e=new Float32Array(6);e[0]=2;V.Mb||Gc.ao(a)},yo:function(){V.vh||(d=!0)},Fq:function(){d=!1},Nn:function(q,r){if(r||b&&d)e[1]=q[0],e[2]=q[1],e[3]=q[2],e[4]=q[3],e[5]=q[4],a.postMessage(e)},Zn:function(){a.postMessage([5,V.lh])},M:function(){V.Mb&&a.terminate()}};
return n}(),Gc=function(){var a=0,b=0,d=0,e=[0,0],k=new $b,m=new sc,w=new sc,n=new Va,q=new Va,r=new Zb,y=0,G=new Float32Array(20);G[0]=3;var v=null,H={data:!1},u={m:function(){"undefined"===typeof V&&(self.fp={Mb:!0});V.Mb&&u.jg([6])},en:function(f){switch(f.data[0]){case 2:u.wg(f.data);break;case 5:y=f.data[1]}},jg:function(f){V.Mb?postMessage(f):(H.data=f,v.onmessage(H))},wg:function(f){a=f[1];b=f[2];d=f[3];e[0]=f[4];e[1]=f[5];n.set(e[0],e[1],-d);r.set(b,a,0,"XYZ");if(!1===r instanceof Zb)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
f=Math.cos(r.C/2);var h=Math.cos(r.D/2),B=Math.cos(r.F/2),J=Math.sin(r.C/2),g=Math.sin(r.D/2),p=Math.sin(r.F/2),l=r.order;"XYZ"===l?(m.C=J*h*B+f*g*p,m.D=f*g*B-J*h*p,m.F=f*h*p+J*g*B,m.P=f*h*B-J*g*p):"YXZ"===l?(m.C=J*h*B+f*g*p,m.D=f*g*B-J*h*p,m.F=f*h*p-J*g*B,m.P=f*h*B+J*g*p):"ZXY"===l?(m.C=J*h*B-f*g*p,m.D=f*g*B+J*h*p,m.F=f*h*p+J*g*B,m.P=f*h*B-J*g*p):"ZYX"===l?(m.C=J*h*B-f*g*p,m.D=f*g*B+J*h*p,m.F=f*h*p-J*g*B,m.P=f*h*B+J*g*p):"YZX"===l?(m.C=J*h*B+f*g*p,m.D=f*g*B+J*h*p,m.F=f*h*p-J*g*B,m.P=f*h*B-J*g*p):
"XZY"===l&&(m.C=J*h*B-f*g*p,m.D=f*g*B-J*h*p,m.F=f*h*p+J*g*B,m.P=f*h*B+J*g*p);n.y-=y;f=k.elements;p=m.x;var C=m.y,K=m.z;J=m.w;var L=p+p,A=C+C;g=K+K;h=p*L;B=p*A;p*=g;l=C*A;C*=g;K*=g;L*=J;A*=J;J*=g;f[0]=1-(l+K);f[4]=B-J;f[8]=p+A;f[1]=B+J;f[5]=1-(h+K);f[9]=C-L;f[2]=p-A;f[6]=C+L;f[10]=1-(h+l);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;k.setPosition(n);w.K(m).inverse();f=q.K(n);C=f.x;L=f.y;K=f.z;h=w.x;B=w.y;J=w.z;g=w.w;p=g*C+B*K-J*L;l=g*L+J*C-h*K;A=g*K+h*L-B*C;C=-h*C-B*L-J*K;f.x=p*g+C*-h+l*-J-
A*-B;f.y=l*g+C*-B+A*-h-p*-J;f.z=A*g+C*-J+p*-B-l*-h;for(f=1;17>f;++f)G[f]=k.elements[f-1];G[17]=q.x;G[18]=q.y;G[19]=q.z;u.jg(G)},ao:function(f){v=f;u.jg([6])}};return u}();Gc.m();var Fc=function(){function a(w){var n=w.split(":").shift();return"data"===n||"blob"===n?w:("undefined"!==typeof I&&I.ca?I:V).ca+V.Hi+w}function b(w,n){return Math.min(n+w+n*w,1)}var d=!1,e=null,k=1,m={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,
fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],B:null};return{m:function(){e=aa.instance({width:1,height:1,isMipmap:!1,G:4,array:new Uint8Array([255,255,255,255]),Kc:!1})},hf:function(){d=!0;k=2},instance:function(w){function n(){"number"===typeof h.alpha?(u[0]=h.alpha,u[1]=0,u[2]=0,u[3]=0):(u[0]=h.alpha[0],u[1]=h.alpha[1]-h.alpha[0],u[2]=h.alpha[2],u[3]=h.alpha[3]);var z=1<=h.fresnelPow?h.fresnelMin:h.fresnelMax;f[0]=b(u[0],z);f[1]=b(u[1],z);f[2]=u[2];f[3]=u[3];l={Oi:h.fresnelMax,
Di:[h.fresnelMin,h.roughness,h.fresnelPow/15,h.metalness],Gi:h.paramsMapMask}}function q(){return new Promise(function(z){(v=h.normalTexture&&fa.Sk()?!0:!1)&&!g.Pa?g.Pa=aa.instance({url:a(h.normalTexture),isLinear:!0,isMipmap:!0,ki:fa.Km(),isPot:!0,G:3,B:z}):z()})}function r(){return new Promise(function(z){(H=h.diffuseTexture&&""!==h.diffuseTexture?!0:!1)&&!g.ia?(g.ia=aa.instance({url:a(h.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,ki:!0,Kc:!1,Tb:!1,Bm:!1,G:4,B:z}),J="s108"):(g.ia||(J="s109",
g.ia=e),z());B=[h.diffuseColor[0]/255,h.diffuseColor[1]/255,h.diffuseColor[2]/255]})}function y(){return new Promise(function(z){(p=h.paramsTexture?!0:!1)&&!g.yb?h.paramsTexture===h.diffuseTexture?(g.yb=g.ia,z()):g.yb=aa.instance({url:a(h.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,ki:!0,Kc:!1,Tb:!1,Bm:!1,G:4,B:z}):z()})}function G(z){n();Promise.all([q(),r(),y()]).then(function(){v||p||H?v||p?v&&!p?(C="s103NormalMap",K="s103NNGLtextureNormalMap"):!v&&p?(C="s103ParamsMap",K="s103NNGLtextureParamsMap"):
(C="s103NormalParamsMap",K="s103NNGLtextureNormalParamsMap"):(C="s103",K="s103NNGLtexture"):(C="s103color",K="s103NNGLcolor");L=v?"s111":"s110";A=v?"s105":"s115";F=p?"s113":"s112";N=p?"s106":"s116";h.B&&setTimeout(h.B.bind(null,z),1)})}var v,H,u=[1,0,0,0],f=[0,0,0,0],h=Object.assign({},m,w),B=null,J=null,g={ia:null,Pa:null,yb:null},p=v=H=!1,l=null,C=null,K=null,L=null,A=null,F=null,N=null,x={update:function(z){Object.assign(h,z);G()},Lc:function(){return v},Lm:function(){return.99>u[0]},dm:function(){return A},
cm:function(){return L},$l:function(){return N},Zl:function(){return F},bm:function(){return C},am:function(){return K},vd:function(){v&&g.Pa.h(0)},pl:function(z){d&&E.set(J);z?E.Qa():E.$a();H&&E.Uc();x.ud()},ud:function(){H&&(E.H("u73",h.colorTextureUsage),g.ia.h(0));E.Ag("u147",B)},Bh:function(){p&&(g.yb.h(0),E.xa("u75",l.Gi),E.Uc());E.xa("u111",l.Di);E.H("u148",l.Oi)},yh:function(z){p&&!v?g.yb.h(k):v&&(H||e.h(0),g.Pa.h(k),p&&g.yb.h(k+1));p&&E.xa("u75",l.Gi);H||v?E.Vn():z?E.Wn():E.Xn();x.ud();E.xa("u13",
u);E.xa("u111",l.Di);E.H("u148",l.Oi)},ml:function(){E.xa("u13",u)},nl:function(){E.xa("u13",f)},M:function(){H&&g.ia.remove();v&&g.Pa.remove();p&&h.paramsTexture!==h.diffuseTexture&&g.yb.remove()}};G(x);return x}}}(),Ab=function(){var a=0,b=0,d=0,e=0,k=0,m=0,w=V.zk,n=V.yk,q=V.Ak,r=0,y=0,G=null,v=null,H=0,u=0,f=0,h=0,B=0,J=null,g=0,p=0,l=0,C=Date.now(),K=null,L=!1,A=!1,F=!1,N=1,x=!1,z={m:function(){a=V.uk[fa.V()];b=V.tk[fa.V()];d=V.sk[fa.V()];p=V.vk[fa.V()];e=V.lk[fa.V()];k=V.qk[fa.V()];f=V.rk[fa.V()];
h=fa.O();B=fa.Y();r=Math.round(h*a);y=Math.round(B*a);v=za.instance({width:r,height:y,Gc:!1});G=aa.instance({width:r,height:y,isPot:!1,isLinear:!0});J=aa.instance({width:r,height:y,isPot:!1,isLinear:!0,G:1});L=!0},resize:function(P,T,la){N=la;h=P;B=T;r=Math.round(P*a);y=Math.round(T*a);v.resize(r,y);A=!0},U:function(){var P=Math.exp(-(Date.now()-C)/p);g=F?l+(1-P)*(1-l):l*P;H=b+g*(d-b);u=e+(1-g)*(1-e);m=k+(1-g)*(1-k);aa.ba(5);if(A&&L)aa.ba(6),J.resize(r,y),E.set("s0"),E.ie("u1",6),v.bind(!1,!0),J.o(),
v.Te(),G.h(6),X.l(!0,!0),G.resize(r,y),G.o(),J.h(6),X.l(!1,!1),E.ie("u1",0),A=!1;else{c.enable(c.BLEND);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);P=H/f;c.blendColor(P,P,P,P);c.colorMask(!0,!1,!1,!0);E.set("s95");sb.ff();E.H("u128",H);p&&(E.H("u129",u),E.H("u120",m));var T=N*(w+Math.pow(Math.random(),q)*(n-w));E.N("u14",T/h,T/B);v.hh();v.Wc();G.o();T=2*Math.PI*Math.random();for(var la=!0,ba=0;ba<f;++ba)1===ba&&(c.blendFunc(c.SRC_ALPHA,c.ONE),E.H("u128",P)),E.H("u127",T+ba/f*(Math.PI/2)),
E.N("u126",(Math.random()-.5)/h,(Math.random()-.5)/B),X.l(la,la),la=!1;c.disable(c.BLEND);E.set("s96");E.N("u14",1/r,1/y);J.o();G.h(7);X.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(P){J.h(P)},enable:function(){x=!0},on:function(){if(F||!x)return!1;K&&clearTimeout(K);z.ge();K=setTimeout(z.Nj,400)},ge:function(){K&&(clearTimeout(K),K=!1);!F&&x&&(window.Yj.disable(),F=!0,C=Date.now(),l=g)},Nj:function(){F&&x&&(K&&(clearTimeout(K),K=null),window.Yj.enable(),F=!1,C=Date.now(),l=g)},M:function(){G.remove();
J.remove();v.remove()}};z.on();return z}(),yd={instance:function(a){var b=a.ga_.O(),d=a.Em?!0:!1,e=d?"s77":"s12",k=aa.instance({isFloat:a.ga_.vi()&&Ga.fa()&&!d,S:a.ga_.wi()&&!d,isLinear:!0,isMipmap:!1,isPot:!1,width:b,height:b,G:d?4:3}),m=aa.instance({isFloat:a.ga_.vi()&&Ga.fa(),S:a.ga_.wi(),isPot:!0,width:1,height:b/2,G:3});m.o();E.set("s89");a.ga_.h(0);X.l(!0,!0);var w=Math.round(Math.log(b)/Math.log(2));k.Yn=function(n){a.ga_=n};k.zn=function(){k.o();E.set(e);E.H("u91",V.Rc);a.ga_.h(0);m.h(1);
for(var n=0,q=0;q<=w;++q){var r=Math.pow(2,w-q),y=r/2;c.viewport(0,n,b,y);E.N("u89",b/r,1);E.H("u90",Math.min(6/y,.6));n+=r/2;X.l(0===q,0===q)}};k.Cn=k.remove;k.remove=function(){k.Cn();m.remove()};return k}};ua.Ha=function(){var a={Tc:45,rg:1,zb:"../../images/debug/picsou.png",ee:.8,Pf:3.14/6,Qf:.314,Qd:4,Pd:.5,Of:-.25,Pm:1,Z:256,Nf:.15},b={Nb:null,zd:null,screen:null},d=!1,e=!1,k=-1,m=null,w=null,n=null,q=Math.PI/180,r=[1,1],y=!1,G={m:function(v){k=v.width;v={isFloat:Ga.fa(),S:!0,isPot:!1,isMipmap:!1,
isLinear:!1,isMirrorY:!0,width:k,height:k/2,G:3};b.Nb=aa.instance(v);b.zd=aa.instance(v);E.j("s117",[{type:"1i",name:"u155",value:0}]);E.j("s118",[{type:"1i",name:"u160",value:0}]);G.Qj();y=!0},Qj:function(){E.j("s118",[{type:"1f",name:"u161",value:a.Pf},{type:"1f",name:"u162",value:a.Qf},{type:"1f",name:"u163",value:a.Qd},{type:"1f",name:"u164",value:a.Pd},{type:"1f",name:"u165",value:a.Of}])},cq:function(){return e},oa:function(v){m=v},Sc:function(){w="uniform sampler2D u155;uniform vec2 u156,u157,u10;uniform int u158;uniform float u159,u141;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u156)/u157;float b=1.;if(u158==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u159*g,texture2D(u155,a).rgb*u141,b*g);gl_FragColor=vec4(d,1.);}";
n="uniform sampler2D u160;uniform float u161,u162,u163,u164,u165;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u160,vec2(.5,.5));float d=a.r,j=u163*a.g,k=u164*(a.b+u165),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u161-u162,u161+u162,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";E.pa("s117",{name:"_",
g:w,i:"u155 u156 u158 u157 u159 u141 u10".split(" "),precision:"highp"});E.pa("s118",{name:"_",g:n,i:"u160 u161 u162 u163 u164 u165".split(" "),precision:"highp"})},Fg:function(v,H,u,f,h,B,J){E.N("u156",H,u);E.ie("u158",f?1:0);E.N("u157",h,h/B);E.je("u10",J);v.h(0);X.l(!1,!1)},bk:function(v){c.viewport(0,0,a.Z,a.Z/2);E.set("s118");v.h(0);X.l(!1,!1)},Zh:function(){return b.Nb},jh:function(v){G.m({width:a.Z});G.Rj(v,!1,1);e=!0},ih:function(){d&&b.screen.jm()===a.zb||(d=!1,b.screen=aa.instance({url:a.zb,
isFloat:!1,B:function(){d=!0}}))},wg:function(v){Object.assign(a,v)},gb:function(v){G.wg(v);y&&(G.Qj(),G.ih())},Rj:function(v,H,u){var f=a.Z;za.$();b.zd.L();E.set("s0");b.Nb.h(0);X.l(!0,!0);b.Nb.o();E.set("s117");E.H("u159",a.Nf);E.H("u141",a.Pm);G.Fg(v,Math.PI,0,!0,90*q,v.O()/v.Y(),r);d&&(E.H("u141",a.ee),c.viewport(0,0,f/2,f/2),G.Fg(b.screen,0,0,!1,2*a.Tc*q,2*a.rg,r),c.viewport(f/2,0,f/2,f/2),G.Fg(b.screen,2*Math.PI,0,!1,2*a.Tc*q,2*a.rg,r));c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE);H&&G.bk(H);
E.set("s0");c.blendColor(0,0,0,1-u);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_CONSTANT_ALPHA);b.zd.h(0);X.l(!1,!1);c.disable(c.BLEND);m.pj(b.Nb)},v:function(){Object.assign(b,{Nb:null,zd:null,screen:null});e=d=!1;k=-1;m=null}};return G}();ua.mb=function(){var a=!1,b=!0,d=null,e=null,k={Sc:function(){fa.aa()&&(E.pa("s119",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform vec3 u143;const float l=1.,m=0.,n=0.,E=1.;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 F=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(l,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-m)*n;k.x+=A*sign(a0.x)*(1.-u85);vec3 B=v*(k+w)*x+b;vec2 C=j*z;vec3 D=vec3(g*C,-j)+B*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(D,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u78","u143"].concat(E.tf(),E.uf()),J:["a0"],R:[3],da:!0}),a=!0)},m:function(m){a&&E.j("s119",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:m.Da},{type:"1f",name:"u79",value:0},{type:"1f",name:"u87",value:1}].concat(m.Qg))},cb:function(m){e=m;d&&k.fi()},bb:function(m){d=m;e&&k.fi()},fi:function(){fa.aa()&&(E.j("s119",[{type:"3f",
name:"u143",value:[d[0]*e,d[1]*e,d[2]*e]}]),E.I())},um:function(m){for(var w=m.width/2,n=m.height/2,q=m.depth,r=m.yl,y=m.height/4,G=m.bl,v=2*G+4,H=[],u=[],f=-w+m.Ua,h=-r-m.Ua,B=w-m.Ua,J=-r-m.Ua,g=0;g<v;++g){var p=0,l=0;0===g?(p=-w,l=-r-q):1<=g&&g<=1+G?(l=(g-1)/G*Math.PI/2,p=f-Math.cos(l)*m.Ua,l=h+Math.sin(l)*m.Ua):g>=2+G&&g<=2+2*G?(l=(g-2-G)/G*Math.PI/2,p=B+Math.sin(l)*m.Ua,l=J+Math.cos(l)*m.Ua):g===v-1&&(p=w,l=-r-q);H.push(p,n+y,l,p,-n+y,l);0!==g&&u.push(2*g,2*g-2,2*g-1,2*g,2*g-1,2*g+1)}return k.instance({ja:H,
indices:u})},toggle:function(m){b=m},instance:function(m){var w=X.instance({ja:m.ja,indices:m.indices});return{U:function(){a&&b&&(E.set("s119"),w.bind(!0),w.U())}}}};return k}();ua.ha=function(){var a={yf:-87,nm:[85,95],ei:[90,90],di:[85,70],od:24,cl:12,dl:2,kg:[-80,10],ci:[40,140],Kd:[1,8],mm:80,Li:[-120,-10],dn:2,le:[0,-15],De:1024,jb:256,Xd:4,wo:[6,30],Ki:1.2};a.Ui=a.kg;var b=!1,d=!1,e=!1,k=null,m=null,w=null,n=null,q=null,r=null,y=!1,G=!1,v=null,H=null,u=null,f=null,h=.5,B=[{type:"1f",name:"u167",
value:1}],J=null,g=null,p=null,l=null,C=null,K={em:function(){return{name:"_",u:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 h=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 k=u80/v;vec3 l=a0;float B=max(0.,-a0.z-o)*p;l.x+=B*sign(a0.x)*(1.-u85);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=h*a2;vv1=-F.z;}",
g:"uniform sampler2D u174,u160;uniform vec2 u89,u175;uniform float u176,u167;varying vec2 vv0;varying float vv1;void main(){vec2 b=u175*u176+u89*vv0;vec4 a=u167*texture2D(u174,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u41 u174 u160 u42 u78 u176 u175 u144 u143 u89 u167".split(" ").concat(E.tf()).concat(E.uf()),J:["a0","a2","a1"],R:[3,3,2],precision:"lowp"}},Sc:function(){E.pa("s120",{name:"_",u:"attribute vec3 a0;uniform vec3 u143;uniform vec2 u168,u169;uniform float u144,u170,u171,u172;varying float vv0,vv1;void main(){vec3 a=(a0+u143)*u144;float b=atan(a.x,a.z-u170),d=2.*(a.y-u171)/(u172-u171)-1.;vv0=a0.y;float g=1.-u168.x*u168.x/(u168.y*u168.y),c=u168.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u170);vv1=smoothstep(u169.x,u169.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u173;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u173;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u144 u143 u168 u169 u170 u171 u172 u13 u173".split(" "),J:["a0"],R:[3],precision:"highp"});E.pa("s121",K.em());E.pa("s122",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});b=!0},m:function(L){if(b){if(void 0===L.jc||!L.jc)return!1;if(d)K.kj(L);else{n=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.De,height:a.De/4,G:4});var A=a.jb/4,F={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:a.jb,height:A,G:4};w=aa.instance(F);r=aa.instance(F);q=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.jb,height:A*a.Xd,G:4});A=.5-.5/L.kc[1];F=.5+.5/L.kc[1];for(var N=a.cl+1,x=[],z=[],P=new Float32Array(16*a.od),T=new Uint16Array(6*
(a.od-1)),la=0,ba=0,Q=0,ia=0;ia<a.od;++ia){var t=2*ia/(a.od-1)-1;t=Math.sign(t)*Math.pow(Math.abs(t),a.dl);t=Math.PI*(t+1)/2-Math.PI/2;var O=Math.sin(t),D=Math.cos(t),W=Math.sin(t*a.Ki),ja=Math.cos(t*a.Ki),ma=t/(Math.PI*L.kc[0])+.5,va=a.di[0]*O,Da=a.Ui[0],ka=a.di[1]*D+a.yf,na=ma,Fa=A,Y=a.ei[0]*O,oa=a.Ui[1],da=a.ei[1]*D+a.yf,ca=F,Ca=16*ia;P[Ca]=Y;P[Ca+1]=oa;P[Ca+2]=da;P[Ca+3]=W;P[Ca+4]=0;P[Ca+5]=ja;P[Ca+6]=ma;P[Ca+7]=ca;P[Ca+8]=va;P[Ca+9]=Da;P[Ca+10]=ka;P[Ca+11]=W;P[Ca+12]=0;P[Ca+13]=ja;P[Ca+14]=na;
P[Ca+15]=Fa;0!==ia&&(na=2*ia,Fa=6*(ia-1),T[Fa]=na,T[Fa+1]=na-1,T[Fa+2]=na-2,T[Fa+3]=na,T[Fa+4]=na+1,T[Fa+5]=na-1);Fa=Math.pow(.5*(1+Math.cos(Math.min(Math.max(Math.PI/a.ci[0]*va,-Math.PI),Math.PI))),a.dn);Da-=a.mm*Fa;na=a.ci[1]*Fa;va-=O*a.Kd[0];ka-=D*a.Kd[1];Y-=O*a.Kd[0];da-=D*a.Kd[1];O=.001>Fa?2:N;for(D=0;D<O;++D)Fa=D/(O-1),ma=Da*(1-Fa)+oa*Fa,ca=a.Li[0],ca=Math.min(Math.max((ma-ca)/(a.Li[1]-ca),0),1),ca=ca*ca*(3-2*ca),x.push(va*(1-Fa)+Y*Fa,ma,(ka+na*Math.exp(400*-Math.abs(t)*Math.pow(Fa,4)))*(1-
ca)+da*ca,W,0,ja,0,0);t=0===ia?0:2<O&&2<ba?O-1:1;for(W=1;W<=t;++W)ja=O>ba?O-2:0,z.push(la+W+ja,la+W-1,Q+W-1,Q+W-1,Q+W+(O<ba?ba-2:0),la+W+ja);ba=O;Q=la;la+=O}l=X.instance({ja:new Float32Array(x),indices:new Uint16Array(z)});C=X.instance({ja:P,indices:T});K.kj(L);E.j("s122",[{type:"1i",name:"u1",value:0}]);d=!0}}},kj:function(L){h=L.ro;f=L.me;J=[{type:"1i",name:"u41",value:1},{type:"1i",name:"u174",value:0},{type:"1i",name:"u160",value:2},{type:"3f",name:"u78",value:[L.Da[0],L.Da[1]-a.le[0],L.Da[2]+
a.le[1]]},{type:"1f",name:"u176",value:L.so},{type:"2f",name:"u89",value:[1,1/a.Xd]},{type:"2f",name:"u175",value:[0,1/a.Xd]},{type:"1f",name:"u167",value:1}].concat(L.Qg,L.Mj);E.j("s121",J)},ec:function(L){k=L},dc:function(L){g=L;g.nd(K.zc)},xi:function(){return e&&null!==g&&null!==p},zc:function(){if(!(e||G&&y)||null===g||null===p)return!1;c.viewport(0,0,a.De,a.De/4);za.$();n.o();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);E.j("s120",[{type:"1f",name:"u170",value:a.yf},{type:"1f",name:"u171",
value:a.kg[0]},{type:"1f",name:"u172",value:a.kg[1]},{type:"3f",name:"u143",value:[v[0]+H[0],v[1]+H[1],v[2]+H[2]]},{type:"1f",name:"u173",value:h},{type:"2f",name:"u168",value:a.nm},{type:"2f",name:"u169",value:a.wo}]);g.xl();E.set("s1");var L=a.jb/4;c.viewport(0,0,a.jb,L);w.o();n.h(0);n.Cd();X.l(!0,!0);for(var A=0;A<a.Xd;++A)E.set("s122"),0!==A&&c.viewport(0,0,a.jb,L),r.o(),w.h(0),E.N("u14",1/a.jb,0),X.l(!1,!1),w.o(),r.h(0),E.N("u14",0,1/L),X.l(!1,!1),a.el&&c.colorMask(0===A,1===A,2===A,!0),E.set("s1"),
q.o(),w.h(0),c.viewport(0,A*L,a.jb,L),X.l(!1,!1),a.el&&c.colorMask(!0,!0,!0,!0);return e=!0},U:function(){K.xi()&&(p.bind(!1,!1),m.L(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),E.set("s121"),k.h(1),q.h(0),l.bind(!0),l.U(),C.bind(!0),C.U(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},fm:function(){return m},add:function(){K.xi()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),m.h(0),X.l(!1,!1),c.disable(c.BLEND))},tg:function(L,
A){p=za.instance({width:L,height:A,Gc:!0});m=aa.instance({width:L,height:A,isFloat:!1,isPot:!1});K.zc()},bb:function(L,A,F){L||(L=v,A=H,F=u);E.j("s121",[{type:"3f",name:"u143",value:[F[0]+f[0],F[1]+f[1]-a.le[0],F[2]+f[2]+a.le[1]]}]);v=L;H=A;u=F;G=!0;!e&&y&&K.zc();E.I()},cb:function(L,A){E.j("s120",[{type:"1f",name:"u144",value:L}]);E.j("s121",[{type:"1f",name:"u144",value:A}]);y=!0;!e&&G&&K.zc();E.I()},xg:function(L){E.j("s121",[{type:"1f",name:"u79",value:L}]);E.I()},Cb:function(L){L&&(g=L);K.zc()},
yg:function(L,A){B[0].value=1-L;E.j("s121",B);E.j("s121",A)},M:function(){},v:function(){e=d=b=!1;r=q=n=w=m=k=null}};return K}();ua.sa=function(){var a=!1,b=null,d=0,e=0,k=0,m=[{type:"1f",name:"u167",value:1}],w=null,n=null,q=null,r={Sc:function(){E.pa("s123",{name:"_",u:"attribute vec3 a0;uniform vec2 u177,u178;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u178)/u177;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u179;uniform float u180,u181,u182;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u180,u181),a=vv0-b,c=u182*a,d=(c-a)*u179;gl_FragColor=vec4(d,0.,1.);}",
i:"u177 u178 u180 u181 u182 u179".split(" "),J:["a0"],R:[3],precision:"highp"});E.pa("s124",{name:"_",u:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u177,u178;uniform float u144;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u85*e;vec3 c=u85*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u79,0.,0.),u82,c);float v=mix(texture2D(u41,s).r,0.,u85);a.z+=v;mat3 w=t(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 j=u80/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u85);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u178)/u177,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u183,u184;uniform float u167;varying vec2 vv0,vv1;void main(){vec2 a=u167*texture2D(u183,vv0).rg;gl_FragColor=texture2D(u184,a+vv1);}",i:"u167 u41 u183 u184 u177 u178 u42 u78 u144 u143".split(" ").concat(E.tf(),E.uf()),J:["a0"],R:[3],precision:"lowp"});a=!0},m:function(y){if(a){if(void 0===y.jc||!y.qd)return!1;n=aa.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,G:4});q=za.instance({width:256,height:128});E.j("s124",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u183",value:2},{type:"1i",name:"u184",value:0},{type:"3f",name:"u78",value:y.Da},{type:"1f",name:"u167",value:1}].concat(y.Mj,y.Qg));e=y.$e;k=y.Ze;d=y.af}},ec:function(y){b=y},dc:function(y){w=y;w.nd(r.We)},We:function(){c.viewport(0,0,256,128);q.o();n.o();var y=w.gm(),G=w.hm(),v=[{type:"2f",name:"u177",value:[y,G]},{type:"2f",name:"u178",value:[w.Il(),w.Jl()]}];E.j("s123",v.concat([{type:"1f",name:"u180",value:e},{type:"1f",name:"u181",value:k},{type:"1f",name:"u182",value:d},{type:"2f",name:"u179",
value:[1/y,-1/G]}]));w.xh();E.j("s124",v)},U:function(){E.set("s124");b.h(1);n.h(2);w.xh()},bb:function(y){E.j("s124",[{type:"3f",name:"u143",value:y}]);E.I()},cb:function(y){E.j("s124",[{type:"1f",name:"u144",value:y}]);E.I()},xg:function(y){E.j("s124",[{type:"1f",name:"u79",value:y}]);E.I()},po:function(y){d=y;r.We();E.I();xa.animate(Date.now())},Cb:function(y){y&&(w=y);r.We()},yg:function(y,G){m.u167=1-y;E.j("s124",m);E.j("s124",G)},M:function(){}};return r}();ua.qc=function(){var a=[0,-.5],b=
!1,d=!1,e=null,k=null,m=null,w=null,n=null,q=-1,r=-1;return{Sc:function(){E.pa("s125",{name:"_",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u185;varying vec2 vv0;void main(){gl_FragColor=texture2D(u185,vv0);}",i:["u41","u185","u42","u11","u10"],precision:"lowp"});
E.pa("s126",{name:"_",g:"uniform sampler2D u2,u186,u187;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u187,vv0).rgb,c=texture2D(u186,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u187","u186"],precision:"lowp"});b=!0},m:function(y){b&&(n=aa.instance({isFloat:!1,isPot:!0,url:y.Ne,B:function(){d=!0}}),E.j("s125",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u185",value:0},{type:"2f",name:"u42",value:y.Vj},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),E.j("s126",[{type:"1i",name:"u186",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u187",value:2}]))},ec:function(y){k=y},tg:function(y,G){var v={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:y,height:G,G:4};q=2/y;r=2/G;m=aa.instance(v);w=aa.instance(v);e=za.instance({width:y,height:G})},U:function(y,G){if(d){e.bind(!1,!0);E.set("s88");for(var v=0;2>v;++v){E.N("u14",q,0);m.o();0!==v&&w.h(0);var H=0===v&&!V.ea;X.l(H,H);E.N("u14",0,r);w.o();m.h(0);X.l(!1,
!1)}E.set("s125");k.h(1);n.h(0);m.o();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);X.l(!1,!1);E.set("s126");G.o();w.h(0);m.h(1);y.h(2);X.l(!1,!1)}},M:function(){}}}();var Kc=function(){var a={instance:function(b){var d=b.Zf,e=b.Vf,k=b.pd,m=b.background?b.background:aa.$h(),w=b.Na,n={scale:1,offsetX:0,offsetY:0},q=null;b.Uf&&(n.scale=b.Uf.scale,n.offsetY=b.Uf.offsetY);return{Vh:function(){return w},Oh:function(){return m},set:function(){q=fb.Ul();fb.qj(n);fb.ve();fb.we();xa.jj(k,m,!1,!1)},I:function(){fb.qj(q)},
cc:function(){return{modelURL:d,materialsURLs:e,background:m.cc(!1),pd:k.cc(!1),Na:w.cc(!0)}},Yl:function(){return k.cc(!1)},kp:function(r){m.h(r)}}},Zc:function(b,d,e){function k(){if(3===++q&&d){var r=a.instance({Zf:b.modelURL,Vf:b.materialsURLs,background:m,pd:w,Na:n});d(r)}}var m=null,w=null,n=null,q=0;aa.Zc(b.background,function(r){!r&&e?e():(m=r,k())});aa.Zc(b.dataState,function(r){!r&&e?e():(w=r,k())});aa.Zc(b.light,function(r){!r&&e?e():(n=r,k())})}};return a}();return Ta||window.JEELIZVTO}();
(function(U,sa){"function"===typeof define&&define.amd?define(sa):"object"===typeof exports?module.exports=sa():U.ResizeSensor=sa()})("undefined"!==typeof window?window:this,function(){function U(La,Za){var db=Object.prototype.toString.call(La),Db=0,Ma=La.length;if("[object Array]"===db||"[object NodeList]"===db||"[object HTMLCollection]"===db||"[object Object]"===db||"undefined"!==typeof jQuery&&La instanceof jQuery||"undefined"!==typeof Elements&&La instanceof Elements)for(;Db<Ma;Db++)Za(La[Db]);
else Za(La)}if("undefined"===typeof window)return null;var sa=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(La){return window.setTimeout(La,20)},Na=function(La,Za){function db(){var Ma=[];this.add=function(Jb){Ma.push(Jb)};var jb,qb;this.call=function(){jb=0;for(qb=Ma.length;jb<qb;jb++)Ma[jb].call()};this.remove=function(Jb){var xb=[];jb=0;for(qb=Ma.length;jb<qb;jb++)Ma[jb]!==Jb&&xb.push(Ma[jb]);Ma=xb};this.length=function(){return Ma.length}}
function Db(Ma,jb){if(Ma)if(Ma.resizedAttached)Ma.resizedAttached.add(jb);else{Ma.resizedAttached=new db;Ma.resizedAttached.add(jb);Ma.resizeSensor=document.createElement("div");Ma.resizeSensor.className="resize-sensor";Ma.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";Ma.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
Ma.appendChild(Ma.resizeSensor);Ma.resizeSensor.offsetParent!==Ma&&(Ma.style.position="relative");var qb=Ma.resizeSensor.childNodes[0],Jb=qb.childNodes[0],xb=Ma.resizeSensor.childNodes[1],Mb,bc,Eb,Vb,mc=Ma.offsetWidth,cc=Ma.offsetHeight,dc=function(){Jb.style.width="100000px";Jb.style.height="100000px";qb.scrollLeft=1E5;qb.scrollTop=1E5;xb.scrollLeft=1E5;xb.scrollTop=1E5};dc();var nc=function(){bc=0;Mb&&(mc=Eb,cc=Vb,Ma.resizedAttached&&Ma.resizedAttached.call())};jb=function(){Eb=Ma.offsetWidth;Vb=
Ma.offsetHeight;(Mb=Eb!=mc||Vb!=cc)&&!bc&&(bc=sa(nc));dc()};var ec=function(fc,oc,Nb){fc.attachEvent?fc.attachEvent("on"+oc,Nb):fc.addEventListener(oc,Nb)};ec(qb,"scroll",jb);ec(xb,"scroll",jb)}}U(La,function(Ma){Db(Ma,Za)});this.detach=function(Ma){Na.detach(La,Ma)}};Na.detach=function(La,Za){U(La,function(db){if(db){if(db.resizedAttached&&"function"==typeof Za&&(db.resizedAttached.remove(Za),db.resizedAttached.length()))return;db.resizeSensor&&(db.contains(db.resizeSensor)&&db.removeChild(db.resizeSensor),
delete db.resizeSensor,delete db.resizedAttached)}})};return Na});var lc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},ob={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Ra={isRT:!0,sku:void 0,materialsReplacements:"",mode:ob.notLoaded},ib={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},Yc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},ya=Object.assign({},Yc),zd={ADJUST_START:null,
ADJUST_END:null,LOADING_START:null,LOADING_END:null},Hc=null,Ub={enabled:!1,callback:null,interval:1E3},wc={error:!1},jc=null,ac=null,xc="undef",wb={start:function(U){console.log("INFO in JeelizVTOWidget.js: start()");if(Ra.mode!==ob.notLoaded)wb.resume();else{wa();if(U.settings)for(var sa in U.settings)lc[sa]=U.settings[sa];U.NNCPath&&Ta.set_NNCPath(U.NNCPath);U.faceDetectionCallback&&(Ub.enabled=!0,Ub.callback=U.faceDetectionCallback,Ub.interval="undefined"===typeof U.faceDetectionInterval?1E3:
U.faceDetectionInterval);Hc=Object.assign({},zd,U.callbacks||{});ya.container=U.placeHolder||document.getElementById("JeelizVTOWidget");if(!ya.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");ya.cv=U.canvas||document.getElementById("JeelizVTOWidgetCanvas");ya.cv||(ya.cv=document.createElement("canvas"),ya.container.appendChild(ya.cv));ya.cv.style.position="absolute";ya.loading=document.getElementById("JeelizVTOWidgetLoading");U.onError&&(wc.error=
U.onError);Cb();sa=Bb(ya.container);if(!sa.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!sa.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");nb();new ResizeSensor(ya.container,function(Na){nb()});(U.searchImageMask||U.searchImageColor||U.searchImageRotationSpeed)&&Ta.set_loading(U.searchImageMask,U.searchImageColor,U.searchImageRotationSpeed);U.callbackReady&&(ac=U.callbackReady);Ra.mode=ob.init;xc="undefined"===typeof U.assetsPath?lc.appstaticURL+"jeefit/":U.assetsPath;"undefined"!==
typeof U.catalog&&(jc=U.catalog);if(U.onWebcamGet)Ta.onWebcamGet(U.onWebcamGet);return new Promise(function(Na,La){Ta.init(xc,ra,function(){Ra.isRT=!1;eb("NO_ERROR_LABEL");La()},ya.cv);var Za=U.sku?U.sku:null;Ta.onHalfLoad(function(){!1===U.isShadow&&Ta.switch_shadow(!1);wb.load(Za,Na,U.materialsReplacements)})})}},destroy:function(){return Ta.destroy().then(function(){Ra.mode=ob.notLoaded;Ra.sku=void 0;Ra.materialsReplacements="";ac=jc=null;Object.assign(ya,Yc)})},pause:function(U){if(!Ra.isRT)return Promise.reject();
Ra.mode=ob.paused;var sa=Ta.switch_sleep(!0,U);return U?sa:Promise.resolve(sa)},resume:function(U){if(!Ra.isRT)return Promise.reject();Ra.mode=ob.realtime;var sa=Ta.switch_sleep(!1,U);return U?sa:Promise.resolve(sa)},set_videoRotation:function(U){Ra.isRT&&Ta.set_videoRotation(U)},set_videoSizes:function(U,sa,Na,La,Za,db){Ra.isRT&&Ta.set_videoSizes(U,sa,Na,La,Za,db)},resize:function(){nb()},set_scale:function(U){Ta.set_scale(U)},capture_image:function(U,sa,Na){Ta&&Ta.ready?Ta.capture_image(U,sa,Na,
!1):sa(!1)},toggle_loading:function(U){U?(Ha(ya.loading),kc("LOADING_START")):(Sa(ya.loading),kc("LOADING_END"))},load_modelStandalone:function(U,sa){if(!Ra.isRT)throw Error("Loading standalone models is only available in RT mode");Ra.mode===ob.paused&&wb.resume();Ra.mode=ob.loadingModel;if("string"===typeof U){var Na=U;Ja(U,Na).then(sa).catch(Qa)}else{var La=Na="RANDOM_SKU_"+Date.now().toString();Ta.set_modelStandalone(U,Lb.bind(null,La,sa),La)}Ra.sku=Na;Ra.materialsReplacements=""},load:function(U,
sa,Na){wb.toggle_loading(!0);Ra.isRT&&wb.load_RT(U,sa,Na)},load_RT:function(U,sa,Na){var La=Na?JSON.stringify(Na):"";U===Ra.sku&&La===Ra.materialsReplacements?wb.toggle_loading(!1):(Ra.sku=U,Ra.materialsReplacements=La,Ra.mode=ob.loadingModel,Ra.mode===ob.paused&&wb.resume(),U?jc&&jc[U]?Sb(U,jc[U],sa,Na):qa(lc.glassesDBURL+U).then(function(Za){if(Za.error)return Qa();Sb(U,Za.intrinsic,sa,Na)}).catch(Qa):(Ra.mode=ob.realtime,wb.toggle_loading(!1),Ta.start_rendering(),sa&&sa()))},enter_adjustMode:Tb,
exit_adjustMode:tb,set_LUT:function(U){return Ta&&Ta.ready?Ta.set_LUT(U||null):Promise.reject("NOT_READY")}};return wb}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:"3.0.0",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};
